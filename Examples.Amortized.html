<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Examples.Amortized</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Examples.Amortized.html" class="Module">Examples.Amortized</a> <a id="27" class="Keyword">where</a>

<a id="34" class="Keyword">open</a> <a id="39" class="Keyword">import</a> <a id="46" href="Calf.CostMonoid.html" class="Module">Calf.CostMonoid</a>
<a id="62" class="Keyword">open</a> <a id="67" class="Keyword">import</a> <a id="74" href="Calf.CostMonoids.html" class="Module">Calf.CostMonoids</a> <a id="91" class="Keyword">using</a> <a id="97" class="Symbol">(</a><a id="98" href="Calf.CostMonoids.html#293" class="Function">ℕ-CostMonoid</a><a id="110" class="Symbol">)</a>

<a id="costMonoid"></a><a id="113" href="Examples.Amortized.html#113" class="Function">costMonoid</a> <a id="124" class="Symbol">=</a> <a id="126" href="Calf.CostMonoids.html#293" class="Function">ℕ-CostMonoid</a>
<a id="139" class="Keyword">open</a> <a id="144" href="Calf.CostMonoid.html#2892" class="Module">CostMonoid</a> <a id="155" href="Examples.Amortized.html#113" class="Function">costMonoid</a> <a id="166" class="Keyword">using</a> <a id="172" class="Symbol">(</a><a id="173" href="Calf.CostMonoid.html#2944" class="Field">ℂ</a><a id="174" class="Symbol">)</a>

<a id="177" class="Keyword">open</a> <a id="182" class="Keyword">import</a> <a id="189" href="Level.html" class="Module">Level</a> <a id="195" class="Keyword">using</a> <a id="201" class="Symbol">(</a><a id="202" href="Level.html#521" class="Function">0ℓ</a><a id="204" class="Symbol">)</a>

<a id="207" class="Keyword">open</a> <a id="212" class="Keyword">import</a> <a id="219" href="Calf.html" class="Module">Calf</a> <a id="224" href="Examples.Amortized.html#113" class="Function">costMonoid</a>
<a id="235" class="Keyword">open</a> <a id="240" class="Keyword">import</a> <a id="247" href="Calf.Types.Unit.html" class="Module">Calf.Types.Unit</a>
<a id="263" class="Keyword">open</a> <a id="268" class="Keyword">import</a> <a id="275" href="Calf.Types.Product.html" class="Module">Calf.Types.Product</a>
<a id="294" class="Keyword">open</a> <a id="299" class="Keyword">import</a> <a id="306" href="Calf.Types.Bool.html" class="Module">Calf.Types.Bool</a>
<a id="322" class="Keyword">open</a> <a id="327" class="Keyword">import</a> <a id="334" href="Calf.Types.Maybe.html" class="Module">Calf.Types.Maybe</a>
<a id="351" class="Keyword">open</a> <a id="356" class="Keyword">import</a> <a id="363" href="Calf.Types.Nat.html" class="Module">Calf.Types.Nat</a>
<a id="378" class="Keyword">open</a> <a id="383" class="Keyword">import</a> <a id="390" href="Calf.Types.List.html" class="Module">Calf.Types.List</a>
<a id="406" class="Keyword">open</a> <a id="411" class="Keyword">import</a> <a id="418" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="427" class="Symbol">as</a> <a id="430" class="Module">Nat</a> <a id="434" class="Keyword">using</a> <a id="440" class="Symbol">(</a><a id="441" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a><a id="444" class="Symbol">;</a> <a id="446" href="Data.Nat.Base.html#3211" class="Primitive Operator">_∸_</a><a id="449" class="Symbol">;</a> <a id="451" href="Data.Nat.Base.html#3280" class="Function">pred</a><a id="455" class="Symbol">;</a> <a id="457" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a><a id="460" class="Symbol">;</a> <a id="462" href="Data.Nat.Base.html#4551" class="Function Operator">_^_</a><a id="465" class="Symbol">;</a> <a id="467" href="Data.Nat.Base.html#1933" class="Function Operator">_&gt;_</a><a id="470" class="Symbol">)</a>
<a id="472" class="Keyword">open</a> <a id="477" class="Keyword">import</a> <a id="484" href="Data.Product.html" class="Module">Data.Product</a>
<a id="497" class="Keyword">import</a> <a id="504" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="524" class="Symbol">as</a> <a id="527" class="Module">Nat</a>
<a id="531" class="Keyword">open</a> <a id="536" class="Keyword">import</a> <a id="543" href="Data.Nat.PredExp2.html" class="Module">Data.Nat.PredExp2</a>
<a id="561" class="Keyword">import</a> <a id="568" href="Data.List.Properties.html" class="Module">Data.List.Properties</a> <a id="589" class="Symbol">as</a> <a id="592" class="Module">List</a>

<a id="598" class="Keyword">open</a> <a id="603" class="Keyword">import</a> <a id="610" href="Function.html" class="Module">Function</a> <a id="619" class="Keyword">hiding</a> <a id="626" class="Symbol">(</a><a id="627" href="Function.Bundles.html#8929" class="Function Operator">_⇔_</a><a id="630" class="Symbol">)</a>

<a id="633" class="Keyword">open</a> <a id="638" class="Keyword">import</a> <a id="645" href="Relation.Nullary.html" class="Module">Relation.Nullary</a>
<a id="662" class="Keyword">open</a> <a id="667" class="Keyword">import</a> <a id="674" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="712" class="Symbol">as</a> <a id="715" class="Module">Eq</a> <a id="718" class="Keyword">using</a> <a id="724" class="Symbol">(</a><a id="725" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="728" class="Symbol">;</a> <a id="730" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="734" class="Symbol">;</a> <a id="736" class="Keyword">module</a> <a id="743" href="Relation.Binary.PropositionalEquality.Core.html#2731" class="Module">≡-Reasoning</a><a id="754" class="Symbol">)</a>

<a id="757" class="Keyword">variable</a>
  <a id="768" href="Examples.Amortized.html#768" class="Generalizable">A</a> <a id="770" href="Examples.Amortized.html#770" class="Generalizable">B</a> <a id="772" href="Examples.Amortized.html#772" class="Generalizable">C</a> <a id="774" class="Symbol">:</a> <a id="776" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="779" href="Calf.Metalanguage.html#248" class="Function">pos</a>
  <a id="785" href="Examples.Amortized.html#785" class="Generalizable">X</a> <a id="787" href="Examples.Amortized.html#787" class="Generalizable">Y</a> <a id="789" href="Examples.Amortized.html#789" class="Generalizable">Z</a> <a id="791" class="Symbol">:</a> <a id="793" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="796" href="Calf.Metalanguage.html#261" class="Function">neg</a>

<a id="_⋉_"></a><a id="801" href="Examples.Amortized.html#801" class="Function Operator">_⋉_</a> <a id="805" class="Symbol">:</a> <a id="807" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="810" href="Calf.Metalanguage.html#248" class="Function">pos</a> <a id="814" class="Symbol">→</a> <a id="816" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="819" href="Calf.Metalanguage.html#261" class="Function">neg</a> <a id="823" class="Symbol">→</a> <a id="825" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="828" href="Calf.Metalanguage.html#261" class="Function">neg</a>
<a id="832" href="Examples.Amortized.html#832" class="Bound">A</a> <a id="834" href="Examples.Amortized.html#801" class="Function Operator">⋉</a> <a id="836" href="Examples.Amortized.html#836" class="Bound">X</a> <a id="838" class="Symbol">=</a> <a id="840" href="Calf.Metalanguage.html#1232" class="Function">Σ+-</a> <a id="844" href="Examples.Amortized.html#832" class="Bound">A</a> <a id="846" class="Symbol">(</a><a id="847" href="Function.Base.html#725" class="Function">const</a> <a id="853" href="Examples.Amortized.html#836" class="Bound">X</a><a id="854" class="Symbol">)</a>

<a id="857" class="Keyword">infix</a> <a id="863" class="Number">3</a> <a id="865" href="Examples.Amortized.html#873" class="Function Operator">_⇒_</a> <a id="869" href="Examples.Amortized.html#877" class="Function Operator">_⇔_</a>
<a id="_⇒_"></a><a id="873" href="Examples.Amortized.html#873" class="Function Operator">_⇒_</a> <a id="_⇔_"></a><a id="877" href="Examples.Amortized.html#877" class="Function Operator">_⇔_</a> <a id="881" class="Symbol">:</a> <a id="883" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="886" href="Calf.Metalanguage.html#261" class="Function">neg</a> <a id="890" class="Symbol">→</a> <a id="892" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="895" href="Calf.Metalanguage.html#261" class="Function">neg</a> <a id="899" class="Symbol">→</a> <a id="901" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="904" href="Calf.Metalanguage.html#261" class="Function">neg</a>
<a id="908" href="Examples.Amortized.html#908" class="Bound">X</a> <a id="910" href="Examples.Amortized.html#873" class="Function Operator">⇒</a> <a id="912" href="Examples.Amortized.html#912" class="Bound">Y</a> <a id="914" class="Symbol">=</a> <a id="916" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="918" class="Symbol">(</a><a id="919" href="Calf.Metalanguage.html#333" class="Function">U</a> <a id="921" href="Examples.Amortized.html#908" class="Bound">X</a><a id="922" class="Symbol">)</a> <a id="924" class="Symbol">λ</a> <a id="926" href="Examples.Amortized.html#926" class="Bound">_</a> <a id="928" class="Symbol">→</a> <a id="930" href="Examples.Amortized.html#912" class="Bound">Y</a>
<a id="932" href="Examples.Amortized.html#932" class="Bound">X</a> <a id="934" href="Examples.Amortized.html#877" class="Function Operator">⇔</a> <a id="936" href="Examples.Amortized.html#936" class="Bound">Y</a> <a id="938" class="Symbol">=</a> <a id="940" href="Calf.Types.Product.html#402" class="Postulate">prod⁻</a> <a id="946" class="Symbol">(</a><a id="947" href="Examples.Amortized.html#932" class="Bound">X</a> <a id="949" href="Examples.Amortized.html#873" class="Function Operator">⇒</a> <a id="951" href="Examples.Amortized.html#936" class="Bound">Y</a><a id="952" class="Symbol">)</a> <a id="954" class="Symbol">(</a><a id="955" href="Examples.Amortized.html#936" class="Bound">Y</a> <a id="957" href="Examples.Amortized.html#873" class="Function Operator">⇒</a> <a id="959" href="Examples.Amortized.html#932" class="Bound">X</a><a id="960" class="Symbol">)</a>


<a id="964" class="Keyword">module</a> <a id="Simple"></a><a id="971" href="Examples.Amortized.html#971" class="Module">Simple</a> <a id="978" class="Keyword">where</a>
  <a id="986" class="Keyword">postulate</a>
    <a id="Simple.simple"></a><a id="1000" href="Examples.Amortized.html#1000" class="Postulate">simple</a> <a id="1007" class="Symbol">:</a> <a id="1009" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="1012" href="Calf.Metalanguage.html#261" class="Function">neg</a>
  <a id="1018" class="Keyword">record</a> <a id="Simple.Simple"></a><a id="1025" href="Examples.Amortized.html#1025" class="Record">Simple</a> <a id="1032" class="Symbol">:</a> <a id="1034" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1038" class="Keyword">where</a>
    <a id="1048" class="Keyword">coinductive</a>
    <a id="1064" class="Keyword">field</a>
      <a id="Simple.Simple.quit"></a><a id="1076" href="Examples.Amortized.html#1076" class="Field">quit</a> <a id="1081" class="Symbol">:</a> <a id="1083" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="1087" class="Symbol">(</a><a id="1088" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="1090" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="1094" class="Symbol">)</a>
      <a id="Simple.Simple.next"></a><a id="1102" href="Examples.Amortized.html#1102" class="Field">next</a> <a id="1107" class="Symbol">:</a> <a id="1109" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="1113" href="Examples.Amortized.html#1000" class="Postulate">simple</a>
  <a id="1122" class="Keyword">postulate</a>
    <a id="Simple.simple/decode"></a><a id="1136" href="Examples.Amortized.html#1136" class="Postulate">simple/decode</a> <a id="1150" class="Symbol">:</a> <a id="1152" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="1156" class="Symbol">(</a><a id="1157" href="Calf.Metalanguage.html#333" class="Function">U</a> <a id="1159" href="Examples.Amortized.html#1000" class="Postulate">simple</a><a id="1165" class="Symbol">)</a> <a id="1167" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1169" href="Examples.Amortized.html#1025" class="Record">Simple</a>
    <a id="1180" class="Symbol">{-#</a> <a id="1184" class="Keyword">REWRITE</a> <a id="1192" href="Examples.Amortized.html#1136" class="Postulate">simple/decode</a> <a id="1206" class="Symbol">#-}</a>

    <a id="Simple.quit/step"></a><a id="1215" href="Examples.Amortized.html#1215" class="Postulate">quit/step</a> <a id="1225" class="Symbol">:</a> <a id="1227" class="Symbol">∀</a> <a id="1229" class="Symbol">{</a><a id="1230" href="Examples.Amortized.html#1230" class="Bound">c</a> <a id="1232" href="Examples.Amortized.html#1232" class="Bound">e</a><a id="1233" class="Symbol">}</a> <a id="1235" class="Symbol">→</a> <a id="1237" href="Examples.Amortized.html#1076" class="Field">Simple.quit</a> <a id="1249" class="Symbol">(</a><a id="1250" href="Calf.Step.html#337" class="Function">step</a> <a id="1255" href="Examples.Amortized.html#1000" class="Postulate">simple</a> <a id="1262" href="Examples.Amortized.html#1230" class="Bound">c</a> <a id="1264" href="Examples.Amortized.html#1232" class="Bound">e</a><a id="1265" class="Symbol">)</a> <a id="1267" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1269" href="Calf.Step.html#337" class="Function">step</a> <a id="1274" class="Symbol">(</a><a id="1275" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="1277" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="1281" class="Symbol">)</a> <a id="1283" href="Examples.Amortized.html#1230" class="Bound">c</a> <a id="1285" class="Symbol">(</a><a id="1286" href="Examples.Amortized.html#1076" class="Field">Simple.quit</a> <a id="1298" href="Examples.Amortized.html#1232" class="Bound">e</a><a id="1299" class="Symbol">)</a>
    <a id="Simple.next/step"></a><a id="1305" href="Examples.Amortized.html#1305" class="Postulate">next/step</a> <a id="1315" class="Symbol">:</a> <a id="1317" class="Symbol">∀</a> <a id="1319" class="Symbol">{</a><a id="1320" href="Examples.Amortized.html#1320" class="Bound">c</a> <a id="1322" href="Examples.Amortized.html#1322" class="Bound">e</a><a id="1323" class="Symbol">}</a> <a id="1325" class="Symbol">→</a> <a id="1327" href="Examples.Amortized.html#1102" class="Field">Simple.next</a> <a id="1339" class="Symbol">(</a><a id="1340" href="Calf.Step.html#337" class="Function">step</a> <a id="1345" href="Examples.Amortized.html#1000" class="Postulate">simple</a> <a id="1352" href="Examples.Amortized.html#1320" class="Bound">c</a> <a id="1354" href="Examples.Amortized.html#1322" class="Bound">e</a><a id="1355" class="Symbol">)</a> <a id="1357" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1359" href="Calf.Step.html#337" class="Function">step</a> <a id="1364" href="Examples.Amortized.html#1000" class="Postulate">simple</a>   <a id="1373" href="Examples.Amortized.html#1320" class="Bound">c</a> <a id="1375" class="Symbol">(</a><a id="1376" href="Examples.Amortized.html#1102" class="Field">Simple.next</a> <a id="1388" href="Examples.Amortized.html#1322" class="Bound">e</a><a id="1389" class="Symbol">)</a>
    <a id="1395" class="Symbol">{-#</a> <a id="1399" class="Keyword">REWRITE</a> <a id="1407" href="Examples.Amortized.html#1215" class="Postulate">quit/step</a> <a id="1417" href="Examples.Amortized.html#1305" class="Postulate">next/step</a> <a id="1427" class="Symbol">#-}</a>

  <a id="1434" class="Symbol">{-#</a> <a id="1438" class="Keyword">TERMINATING</a> <a id="1450" class="Symbol">#-}</a>
  <a id="Simple.every"></a><a id="1456" href="Examples.Amortized.html#1456" class="Function">every</a> <a id="1462" class="Symbol">:</a> <a id="1464" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="1468" href="Examples.Amortized.html#1000" class="Postulate">simple</a>
  <a id="1477" href="Examples.Amortized.html#1076" class="Field">Simple.quit</a> <a id="1489" href="Examples.Amortized.html#1456" class="Function">every</a> <a id="1495" class="Symbol">=</a> <a id="1497" href="Calf.Metalanguage.html#554" class="Function">ret</a> <a id="1501" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a>
  <a id="1508" href="Examples.Amortized.html#1102" class="Field">Simple.next</a> <a id="1520" href="Examples.Amortized.html#1456" class="Function">every</a> <a id="1526" class="Symbol">=</a> <a id="1528" href="Calf.Step.html#337" class="Function">step</a> <a id="1533" href="Examples.Amortized.html#1000" class="Postulate">simple</a> <a id="1540" class="Number">1</a> <a id="1542" href="Examples.Amortized.html#1456" class="Function">every</a>

  <a id="Simple.Φ"></a><a id="1551" href="Examples.Amortized.html#1551" class="Function">Φ</a> <a id="1553" class="Symbol">:</a> <a id="1555" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="1559" href="Calf.Types.Bool.html#187" class="Function">bool</a> <a id="1564" class="Symbol">→</a> <a id="1566" href="Calf.CostMonoid.html#2944" class="Function">ℂ</a>
  <a id="1570" href="Examples.Amortized.html#1551" class="Function">Φ</a> <a id="1572" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a> <a id="1578" class="Symbol">=</a> <a id="1580" class="Number">1</a>
  <a id="1584" href="Examples.Amortized.html#1551" class="Function">Φ</a> <a id="1586" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>  <a id="1592" class="Symbol">=</a> <a id="1594" class="Number">0</a>

  <a id="1599" class="Symbol">{-#</a> <a id="1603" class="Keyword">TERMINATING</a> <a id="1615" class="Symbol">#-}</a>
  <a id="Simple.alternating"></a><a id="1621" href="Examples.Amortized.html#1621" class="Function">alternating</a> <a id="1633" class="Symbol">:</a> <a id="1635" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="1639" class="Symbol">(</a><a id="1640" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="1642" href="Calf.Types.Bool.html#187" class="Function">bool</a> <a id="1647" class="Symbol">λ</a> <a id="1649" href="Examples.Amortized.html#1649" class="Symbol">_</a> <a id="1651" class="Symbol">→</a> <a id="1653" href="Examples.Amortized.html#1000" class="Postulate">simple</a><a id="1659" class="Symbol">)</a>
  <a id="1663" href="Examples.Amortized.html#1076" class="Field">Simple.quit</a> <a id="1675" class="Symbol">(</a><a id="1676" href="Examples.Amortized.html#1621" class="Function">alternating</a> <a id="1688" href="Examples.Amortized.html#1688" class="Bound">b</a><a id="1689" class="Symbol">)</a> <a id="1691" class="Symbol">=</a> <a id="1693" href="Calf.Step.html#337" class="Function">step</a> <a id="1698" class="Symbol">(</a><a id="1699" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="1701" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="1705" class="Symbol">)</a> <a id="1707" class="Symbol">(</a><a id="1708" href="Examples.Amortized.html#1551" class="Function">Φ</a> <a id="1710" href="Examples.Amortized.html#1688" class="Bound">b</a><a id="1711" class="Symbol">)</a> <a id="1713" class="Symbol">(</a><a id="1714" href="Calf.Metalanguage.html#554" class="Function">ret</a> <a id="1718" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a><a id="1722" class="Symbol">)</a>
  <a id="1726" href="Examples.Amortized.html#1102" class="Field">Simple.next</a> <a id="1738" class="Symbol">(</a><a id="1739" href="Examples.Amortized.html#1621" class="Function">alternating</a> <a id="1751" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="1756" class="Symbol">)</a> <a id="1758" class="Symbol">=</a> <a id="1760" href="Calf.Step.html#337" class="Function">step</a> <a id="1765" href="Examples.Amortized.html#1000" class="Postulate">simple</a> <a id="1772" class="Number">2</a> <a id="1774" class="Symbol">(</a><a id="1775" href="Examples.Amortized.html#1621" class="Function">alternating</a> <a id="1787" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="1791" class="Symbol">)</a>
  <a id="1795" href="Examples.Amortized.html#1102" class="Field">Simple.next</a> <a id="1807" class="Symbol">(</a><a id="1808" href="Examples.Amortized.html#1621" class="Function">alternating</a> <a id="1820" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="1825" class="Symbol">)</a> <a id="1827" class="Symbol">=</a> <a id="1829" href="Examples.Amortized.html#1621" class="Function">alternating</a> <a id="1841" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>

  <a id="1850" class="Keyword">record</a> <a id="Simple._≈_"></a><a id="1857" href="Examples.Amortized.html#1857" class="Record Operator">_≈_</a> <a id="1861" class="Symbol">(</a><a id="1862" href="Examples.Amortized.html#1862" class="Bound">s₁</a> <a id="1865" href="Examples.Amortized.html#1865" class="Bound">s₂</a> <a id="1868" class="Symbol">:</a> <a id="1870" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="1874" href="Examples.Amortized.html#1000" class="Postulate">simple</a><a id="1880" class="Symbol">)</a> <a id="1882" class="Symbol">:</a> <a id="1884" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1888" class="Keyword">where</a>
    <a id="1898" class="Keyword">coinductive</a>
    <a id="1914" class="Keyword">field</a>
      <a id="Simple._≈_.quit"></a><a id="1926" href="Examples.Amortized.html#1926" class="Field">quit</a> <a id="1931" class="Symbol">:</a> <a id="1933" href="Examples.Amortized.html#1076" class="Field">Simple.quit</a> <a id="1945" href="Examples.Amortized.html#1862" class="Bound">s₁</a> <a id="1948" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1950" href="Examples.Amortized.html#1076" class="Field">Simple.quit</a> <a id="1962" href="Examples.Amortized.html#1865" class="Bound">s₂</a>
      <a id="Simple._≈_.next"></a><a id="1971" href="Examples.Amortized.html#1971" class="Field">next</a> <a id="1976" class="Symbol">:</a> <a id="1978" href="Examples.Amortized.html#1102" class="Field">Simple.next</a> <a id="1990" href="Examples.Amortized.html#1862" class="Bound">s₁</a> <a id="1993" href="Examples.Amortized.html#1857" class="Record Operator">≈</a> <a id="1995" href="Examples.Amortized.html#1102" class="Field">Simple.next</a> <a id="2007" href="Examples.Amortized.html#1865" class="Bound">s₂</a>

  <a id="Simple.≈-cong"></a><a id="2013" href="Examples.Amortized.html#2013" class="Function">≈-cong</a> <a id="2020" class="Symbol">:</a> <a id="2022" class="Symbol">(</a><a id="2023" href="Examples.Amortized.html#2023" class="Bound">c</a> <a id="2025" class="Symbol">:</a> <a id="2027" href="Calf.CostMonoid.html#2944" class="Function">ℂ</a><a id="2028" class="Symbol">)</a> <a id="2030" class="Symbol">{</a><a id="2031" href="Examples.Amortized.html#2031" class="Bound">x</a> <a id="2033" href="Examples.Amortized.html#2033" class="Bound">y</a> <a id="2035" class="Symbol">:</a> <a id="2037" href="Examples.Amortized.html#1025" class="Record">Simple</a><a id="2043" class="Symbol">}</a> <a id="2045" class="Symbol">→</a> <a id="2047" href="Examples.Amortized.html#2031" class="Bound">x</a> <a id="2049" href="Examples.Amortized.html#1857" class="Record Operator">≈</a> <a id="2051" href="Examples.Amortized.html#2033" class="Bound">y</a> <a id="2053" class="Symbol">→</a> <a id="2055" href="Calf.Step.html#337" class="Function">step</a> <a id="2060" href="Examples.Amortized.html#1000" class="Postulate">simple</a> <a id="2067" href="Examples.Amortized.html#2023" class="Bound">c</a> <a id="2069" href="Examples.Amortized.html#2031" class="Bound">x</a> <a id="2071" href="Examples.Amortized.html#1857" class="Record Operator">≈</a> <a id="2073" href="Calf.Step.html#337" class="Function">step</a> <a id="2078" href="Examples.Amortized.html#1000" class="Postulate">simple</a> <a id="2085" href="Examples.Amortized.html#2023" class="Bound">c</a> <a id="2087" href="Examples.Amortized.html#2033" class="Bound">y</a>
  <a id="2091" href="Examples.Amortized.html#1926" class="Field">_≈_.quit</a> <a id="2100" class="Symbol">(</a><a id="2101" href="Examples.Amortized.html#2013" class="Function">≈-cong</a> <a id="2108" href="Examples.Amortized.html#2108" class="Bound">c</a> <a id="2110" href="Examples.Amortized.html#2110" class="Bound">h</a><a id="2111" class="Symbol">)</a> <a id="2113" class="Symbol">=</a> <a id="2115" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="2123" class="Symbol">(</a><a id="2124" href="Calf.Step.html#337" class="Function">step</a> <a id="2129" class="Symbol">(</a><a id="2130" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="2132" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="2136" class="Symbol">)</a> <a id="2138" href="Examples.Amortized.html#2108" class="Bound">c</a><a id="2139" class="Symbol">)</a> <a id="2141" class="Symbol">(</a><a id="2142" href="Examples.Amortized.html#1926" class="Field">_≈_.quit</a> <a id="2151" href="Examples.Amortized.html#2110" class="Bound">h</a><a id="2152" class="Symbol">)</a>
  <a id="2156" href="Examples.Amortized.html#1971" class="Field">_≈_.next</a> <a id="2165" class="Symbol">(</a><a id="2166" href="Examples.Amortized.html#2013" class="Function">≈-cong</a> <a id="2173" href="Examples.Amortized.html#2173" class="Bound">c</a> <a id="2175" href="Examples.Amortized.html#2175" class="Bound">h</a><a id="2176" class="Symbol">)</a> <a id="2178" class="Symbol">=</a> <a id="2180" href="Examples.Amortized.html#2013" class="Function">≈-cong</a> <a id="2187" href="Examples.Amortized.html#2173" class="Bound">c</a> <a id="2189" class="Symbol">(</a><a id="2190" href="Examples.Amortized.html#1971" class="Field">_≈_.next</a> <a id="2199" href="Examples.Amortized.html#2175" class="Bound">h</a><a id="2200" class="Symbol">)</a>

  <a id="2205" class="Symbol">{-#</a> <a id="2209" class="Keyword">TERMINATING</a> <a id="2221" class="Symbol">#-}</a>
  <a id="Simple.every≈alternating"></a><a id="2227" href="Examples.Amortized.html#2227" class="Function">every≈alternating</a> <a id="2245" class="Symbol">:</a> <a id="2247" class="Symbol">∀</a> <a id="2249" href="Examples.Amortized.html#2249" class="Bound">b</a> <a id="2251" class="Symbol">→</a> <a id="2253" href="Examples.Amortized.html#1621" class="Function">alternating</a> <a id="2265" href="Examples.Amortized.html#2249" class="Bound">b</a> <a id="2267" href="Examples.Amortized.html#1857" class="Record Operator">≈</a> <a id="2269" href="Calf.Step.html#337" class="Function">step</a> <a id="2274" href="Examples.Amortized.html#1000" class="Postulate">simple</a> <a id="2281" class="Symbol">(</a><a id="2282" href="Examples.Amortized.html#1551" class="Function">Φ</a> <a id="2284" href="Examples.Amortized.html#2249" class="Bound">b</a><a id="2285" class="Symbol">)</a> <a id="2287" href="Examples.Amortized.html#1456" class="Function">every</a>
  <a id="2295" href="Examples.Amortized.html#1926" class="Field">_≈_.quit</a> <a id="2304" class="Symbol">(</a><a id="2305" href="Examples.Amortized.html#2227" class="Function">every≈alternating</a> <a id="2323" class="Symbol">_)</a> <a id="2326" class="Symbol">=</a> <a id="2328" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="2335" href="Examples.Amortized.html#1971" class="Field">_≈_.next</a> <a id="2344" class="Symbol">(</a><a id="2345" href="Examples.Amortized.html#2227" class="Function">every≈alternating</a> <a id="2363" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="2368" class="Symbol">)</a> <a id="2370" class="Symbol">=</a> <a id="2372" href="Examples.Amortized.html#2013" class="Function">≈-cong</a> <a id="2379" class="Number">2</a> <a id="2381" class="Symbol">(</a><a id="2382" href="Examples.Amortized.html#2227" class="Function">every≈alternating</a> <a id="2400" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="2404" class="Symbol">)</a>
  <a id="2408" href="Examples.Amortized.html#1971" class="Field">_≈_.next</a> <a id="2417" class="Symbol">(</a><a id="2418" href="Examples.Amortized.html#2227" class="Function">every≈alternating</a> <a id="2436" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="2441" class="Symbol">)</a> <a id="2443" class="Symbol">=</a> <a id="2445" href="Examples.Amortized.html#2227" class="Function">every≈alternating</a> <a id="2463" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>

  <a id="Simple.simple-program"></a><a id="2472" href="Examples.Amortized.html#2472" class="Function">simple-program</a> <a id="2487" class="Symbol">:</a> <a id="2489" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="2492" href="Calf.Metalanguage.html#248" class="Function">pos</a>
  <a id="2498" href="Examples.Amortized.html#2472" class="Function">simple-program</a> <a id="2513" class="Symbol">=</a> <a id="2515" href="Calf.Types.Nat.html#164" class="Function">nat</a>

  <a id="2522" class="Symbol">{-#</a> <a id="2526" class="Keyword">TERMINATING</a> <a id="2538" class="Symbol">#-}</a>
  <a id="Simple.ψ"></a><a id="2544" href="Examples.Amortized.html#2544" class="Function">ψ</a> <a id="2546" class="Symbol">:</a> <a id="2548" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="2552" class="Symbol">(</a><a id="2553" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="2555" href="Examples.Amortized.html#2472" class="Function">simple-program</a> <a id="2570" class="Symbol">λ</a> <a id="2572" href="Examples.Amortized.html#2572" class="Symbol">_</a> <a id="2574" class="Symbol">→</a> <a id="2576" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="2578" class="Symbol">(</a><a id="2579" href="Calf.Metalanguage.html#333" class="Function">U</a> <a id="2581" href="Examples.Amortized.html#1000" class="Postulate">simple</a><a id="2587" class="Symbol">)</a> <a id="2589" class="Symbol">λ</a> <a id="2591" href="Examples.Amortized.html#2591" class="Symbol">_</a> <a id="2593" class="Symbol">→</a> <a id="2595" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="2597" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="2601" class="Symbol">)</a>
  <a id="2605" href="Examples.Amortized.html#2544" class="Function">ψ</a> <a id="2607" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a>    <a id="2615" href="Examples.Amortized.html#2615" class="Bound">s</a> <a id="2617" class="Symbol">=</a> <a id="2619" href="Examples.Amortized.html#1076" class="Field">Simple.quit</a> <a id="2631" href="Examples.Amortized.html#2615" class="Bound">s</a>
  <a id="2635" href="Examples.Amortized.html#2544" class="Function">ψ</a> <a id="2637" class="Symbol">(</a><a id="2638" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="2642" href="Examples.Amortized.html#2642" class="Bound">n</a><a id="2643" class="Symbol">)</a> <a id="2645" href="Examples.Amortized.html#2645" class="Bound">s</a> <a id="2647" class="Symbol">=</a> <a id="2649" href="Examples.Amortized.html#2544" class="Function">ψ</a> <a id="2651" href="Examples.Amortized.html#2642" class="Bound">n</a> <a id="2653" class="Symbol">(</a><a id="2654" href="Examples.Amortized.html#1102" class="Field">Simple.next</a> <a id="2666" href="Examples.Amortized.html#2645" class="Bound">s</a><a id="2667" class="Symbol">)</a>

  <a id="Simple._≈&#39;_"></a><a id="2672" href="Examples.Amortized.html#2672" class="Function Operator">_≈&#39;_</a> <a id="2677" class="Symbol">:</a> <a id="2679" class="Symbol">(</a><a id="2680" href="Examples.Amortized.html#2680" class="Bound">q₁</a> <a id="2683" href="Examples.Amortized.html#2683" class="Bound">q₂</a> <a id="2686" class="Symbol">:</a> <a id="2688" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="2692" href="Examples.Amortized.html#1000" class="Postulate">simple</a><a id="2698" class="Symbol">)</a> <a id="2700" class="Symbol">→</a> <a id="2702" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="2708" href="Examples.Amortized.html#2708" class="Bound">s₁</a> <a id="2711" href="Examples.Amortized.html#2672" class="Function Operator">≈&#39;</a> <a id="2714" href="Examples.Amortized.html#2714" class="Bound">s₂</a> <a id="2717" class="Symbol">=</a> <a id="2719" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="2723" class="Symbol">(</a><a id="2724" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="2726" href="Examples.Amortized.html#2472" class="Function">simple-program</a> <a id="2741" class="Symbol">λ</a> <a id="2743" href="Examples.Amortized.html#2743" class="Bound">p</a> <a id="2745" class="Symbol">→</a> <a id="2747" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="2752" class="Symbol">(</a><a id="2753" href="Examples.Amortized.html#2544" class="Function">ψ</a> <a id="2755" href="Examples.Amortized.html#2743" class="Bound">p</a> <a id="2757" href="Examples.Amortized.html#2708" class="Bound">s₁</a> <a id="2760" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2762" href="Examples.Amortized.html#2544" class="Function">ψ</a> <a id="2764" href="Examples.Amortized.html#2743" class="Bound">p</a> <a id="2766" href="Examples.Amortized.html#2714" class="Bound">s₂</a><a id="2768" class="Symbol">))</a>

  <a id="2774" class="Symbol">{-#</a> <a id="2778" class="Keyword">TERMINATING</a> <a id="2790" class="Symbol">#-}</a>
  <a id="Simple.classic-amortization"></a><a id="2796" href="Examples.Amortized.html#2796" class="Function">classic-amortization</a> <a id="2817" class="Symbol">:</a> <a id="2819" class="Symbol">{</a><a id="2820" href="Examples.Amortized.html#2820" class="Bound">s₁</a> <a id="2823" href="Examples.Amortized.html#2823" class="Bound">s₂</a> <a id="2826" class="Symbol">:</a> <a id="2828" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="2832" href="Examples.Amortized.html#1000" class="Postulate">simple</a><a id="2838" class="Symbol">}</a> <a id="2840" class="Symbol">→</a> <a id="2842" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="2846" class="Symbol">(</a><a id="2847" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="2852" class="Symbol">(</a><a id="2853" href="Examples.Amortized.html#2820" class="Bound">s₁</a> <a id="2856" href="Examples.Amortized.html#1857" class="Record Operator">≈</a> <a id="2858" href="Examples.Amortized.html#2823" class="Bound">s₂</a><a id="2860" class="Symbol">)</a> <a id="2862" href="Examples.Amortized.html#877" class="Function Operator">⇔</a> <a id="2864" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="2869" class="Symbol">(</a><a id="2870" href="Examples.Amortized.html#2820" class="Bound">s₁</a> <a id="2873" href="Examples.Amortized.html#2672" class="Function Operator">≈&#39;</a> <a id="2876" href="Examples.Amortized.html#2823" class="Bound">s₂</a><a id="2878" class="Symbol">))</a>
  <a id="2883" href="Examples.Amortized.html#2796" class="Function">classic-amortization</a> <a id="2904" class="Symbol">=</a> <a id="2906" href="Examples.Amortized.html#2941" class="Function">forward</a> <a id="2914" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2916" href="Examples.Amortized.html#3086" class="Function">backward</a>
    <a id="2929" class="Keyword">where</a>
      <a id="2941" href="Examples.Amortized.html#2941" class="Function">forward</a> <a id="2949" class="Symbol">:</a> <a id="2951" class="Symbol">{</a><a id="2952" href="Examples.Amortized.html#2952" class="Bound">s₁</a> <a id="2955" href="Examples.Amortized.html#2955" class="Bound">s₂</a> <a id="2958" class="Symbol">:</a> <a id="2960" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="2964" href="Examples.Amortized.html#1000" class="Postulate">simple</a><a id="2970" class="Symbol">}</a> <a id="2972" class="Symbol">→</a> <a id="2974" href="Examples.Amortized.html#2952" class="Bound">s₁</a> <a id="2977" href="Examples.Amortized.html#1857" class="Record Operator">≈</a> <a id="2979" href="Examples.Amortized.html#2955" class="Bound">s₂</a> <a id="2982" class="Symbol">→</a> <a id="2984" href="Examples.Amortized.html#2952" class="Bound">s₁</a> <a id="2987" href="Examples.Amortized.html#2672" class="Function Operator">≈&#39;</a> <a id="2990" href="Examples.Amortized.html#2955" class="Bound">s₂</a>
      <a id="2999" href="Examples.Amortized.html#2941" class="Function">forward</a> <a id="3007" href="Examples.Amortized.html#3007" class="Bound">h</a> <a id="3009" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a>    <a id="3017" class="Symbol">=</a> <a id="3019" href="Examples.Amortized.html#1926" class="Field">_≈_.quit</a> <a id="3028" href="Examples.Amortized.html#3007" class="Bound">h</a>
      <a id="3036" href="Examples.Amortized.html#2941" class="Function">forward</a> <a id="3044" href="Examples.Amortized.html#3044" class="Bound">h</a> <a id="3046" class="Symbol">(</a><a id="3047" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="3051" href="Examples.Amortized.html#3051" class="Bound">n</a><a id="3052" class="Symbol">)</a> <a id="3054" class="Symbol">=</a> <a id="3056" href="Examples.Amortized.html#2941" class="Function">forward</a> <a id="3064" class="Symbol">(</a><a id="3065" href="Examples.Amortized.html#1971" class="Field">_≈_.next</a> <a id="3074" href="Examples.Amortized.html#3044" class="Bound">h</a><a id="3075" class="Symbol">)</a> <a id="3077" href="Examples.Amortized.html#3051" class="Bound">n</a>

      <a id="3086" href="Examples.Amortized.html#3086" class="Function">backward</a> <a id="3095" class="Symbol">:</a> <a id="3097" class="Symbol">{</a><a id="3098" href="Examples.Amortized.html#3098" class="Bound">s₁</a> <a id="3101" href="Examples.Amortized.html#3101" class="Bound">s₂</a> <a id="3104" class="Symbol">:</a> <a id="3106" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="3110" href="Examples.Amortized.html#1000" class="Postulate">simple</a><a id="3116" class="Symbol">}</a> <a id="3118" class="Symbol">→</a> <a id="3120" href="Examples.Amortized.html#3098" class="Bound">s₁</a> <a id="3123" href="Examples.Amortized.html#2672" class="Function Operator">≈&#39;</a> <a id="3126" href="Examples.Amortized.html#3101" class="Bound">s₂</a> <a id="3129" class="Symbol">→</a> <a id="3131" href="Examples.Amortized.html#3098" class="Bound">s₁</a> <a id="3134" href="Examples.Amortized.html#1857" class="Record Operator">≈</a> <a id="3136" href="Examples.Amortized.html#3101" class="Bound">s₂</a>
      <a id="3145" href="Examples.Amortized.html#1926" class="Field">_≈_.quit</a> <a id="3154" class="Symbol">(</a><a id="3155" href="Examples.Amortized.html#3086" class="Function">backward</a> <a id="3164" href="Examples.Amortized.html#3164" class="Bound">classic</a><a id="3171" class="Symbol">)</a> <a id="3173" class="Symbol">=</a> <a id="3175" href="Examples.Amortized.html#3164" class="Bound">classic</a> <a id="3183" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a>
      <a id="3194" href="Examples.Amortized.html#1971" class="Field">_≈_.next</a> <a id="3203" class="Symbol">(</a><a id="3204" href="Examples.Amortized.html#3086" class="Function">backward</a> <a id="3213" href="Examples.Amortized.html#3213" class="Bound">classic</a><a id="3220" class="Symbol">)</a> <a id="3222" class="Symbol">=</a> <a id="3224" href="Examples.Amortized.html#3086" class="Function">backward</a> <a id="3233" class="Symbol">(λ</a> <a id="3236" href="Examples.Amortized.html#3236" class="Bound">n</a> <a id="3238" class="Symbol">→</a> <a id="3240" href="Examples.Amortized.html#3213" class="Bound">classic</a> <a id="3248" class="Symbol">(</a><a id="3249" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="3253" href="Examples.Amortized.html#3236" class="Bound">n</a><a id="3254" class="Symbol">))</a>


<a id="3259" class="Keyword">module</a> <a id="Queue"></a><a id="3266" href="Examples.Amortized.html#3266" class="Module">Queue</a> <a id="3272" class="Keyword">where</a>
  <a id="3280" class="Comment">-- moving `E` to a parameter on `module Queue` breaks things - Agda bug?</a>
  <a id="Queue.E"></a><a id="3355" href="Examples.Amortized.html#3355" class="Function">E</a> <a id="3357" class="Symbol">:</a> <a id="3359" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="3362" href="Calf.Metalanguage.html#248" class="Function">pos</a>
  <a id="3368" href="Examples.Amortized.html#3355" class="Function">E</a> <a id="3370" class="Symbol">=</a> <a id="3372" href="Calf.Types.Nat.html#164" class="Function">nat</a>

  <a id="3379" class="Keyword">postulate</a>
    <a id="Queue.queue"></a><a id="3393" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="3399" class="Symbol">:</a> <a id="3401" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="3404" href="Calf.Metalanguage.html#261" class="Function">neg</a> <a id="3408" class="Symbol">→</a> <a id="3410" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="3413" href="Calf.Metalanguage.html#261" class="Function">neg</a>
  <a id="3419" class="Keyword">record</a> <a id="Queue.Queue"></a><a id="3426" href="Examples.Amortized.html#3426" class="Record">Queue</a> <a id="3432" class="Symbol">(</a><a id="3433" href="Examples.Amortized.html#3433" class="Bound">X</a> <a id="3435" class="Symbol">:</a> <a id="3437" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="3440" href="Calf.Metalanguage.html#261" class="Function">neg</a><a id="3443" class="Symbol">)</a> <a id="3445" class="Symbol">:</a> <a id="3447" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3451" class="Keyword">where</a>
    <a id="3461" class="Keyword">coinductive</a>
    <a id="3477" class="Keyword">field</a>
      <a id="Queue.Queue.quit"></a><a id="3489" href="Examples.Amortized.html#3489" class="Field">quit</a>    <a id="3497" class="Symbol">:</a> <a id="3499" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="3503" href="Examples.Amortized.html#3433" class="Bound">X</a>
      <a id="Queue.Queue.enqueue"></a><a id="3511" href="Examples.Amortized.html#3511" class="Field">enqueue</a> <a id="3519" class="Symbol">:</a> <a id="3521" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="3525" class="Symbol">(</a><a id="3526" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="3528" href="Examples.Amortized.html#3355" class="Function">E</a> <a id="3530" class="Symbol">λ</a> <a id="3532" href="Examples.Amortized.html#3532" class="Bound">_</a> <a id="3534" class="Symbol">→</a> <a id="3536" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="3542" href="Examples.Amortized.html#3433" class="Bound">X</a><a id="3543" class="Symbol">)</a>
      <a id="Queue.Queue.dequeue"></a><a id="3551" href="Examples.Amortized.html#3551" class="Field">dequeue</a> <a id="3559" class="Symbol">:</a> <a id="3561" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="3565" class="Symbol">(</a><a id="3566" href="Calf.Types.Maybe.html#177" class="Function">maybe</a> <a id="3572" href="Examples.Amortized.html#3355" class="Function">E</a> <a id="3574" href="Examples.Amortized.html#801" class="Function Operator">⋉</a> <a id="3576" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="3582" href="Examples.Amortized.html#3433" class="Bound">X</a><a id="3583" class="Symbol">)</a>
  <a id="3587" class="Keyword">postulate</a>
    <a id="Queue.queue/decode"></a><a id="3601" href="Examples.Amortized.html#3601" class="Postulate">queue/decode</a> <a id="3614" class="Symbol">:</a> <a id="3616" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="3620" class="Symbol">(</a><a id="3621" href="Calf.Metalanguage.html#333" class="Function">U</a> <a id="3623" class="Symbol">(</a><a id="3624" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="3630" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="3631" class="Symbol">))</a> <a id="3634" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3636" href="Examples.Amortized.html#3426" class="Record">Queue</a> <a id="3642" href="Examples.Amortized.html#785" class="Generalizable">X</a>
    <a id="3648" class="Symbol">{-#</a> <a id="3652" class="Keyword">REWRITE</a> <a id="3660" href="Examples.Amortized.html#3601" class="Postulate">queue/decode</a> <a id="3673" class="Symbol">#-}</a>

    <a id="Queue.quit/step"></a><a id="3682" href="Examples.Amortized.html#3682" class="Postulate">quit/step</a>    <a id="3695" class="Symbol">:</a> <a id="3697" class="Symbol">∀</a> <a id="3699" class="Symbol">{</a><a id="3700" href="Examples.Amortized.html#3700" class="Bound">c</a> <a id="3702" href="Examples.Amortized.html#3702" class="Bound">e</a><a id="3703" class="Symbol">}</a> <a id="3705" class="Symbol">→</a> <a id="3707" href="Examples.Amortized.html#3489" class="Field">Queue.quit</a>    <a id="3721" class="Symbol">(</a><a id="3722" href="Calf.Step.html#337" class="Function">step</a> <a id="3727" class="Symbol">(</a><a id="3728" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="3734" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="3735" class="Symbol">)</a> <a id="3737" href="Examples.Amortized.html#3700" class="Bound">c</a> <a id="3739" href="Examples.Amortized.html#3702" class="Bound">e</a><a id="3740" class="Symbol">)</a> <a id="3742" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3744" href="Calf.Step.html#337" class="Function">step</a> <a id="3749" href="Examples.Amortized.html#785" class="Generalizable">X</a>                   <a id="3769" href="Examples.Amortized.html#3700" class="Bound">c</a> <a id="3771" class="Symbol">(</a><a id="3772" href="Examples.Amortized.html#3489" class="Field">Queue.quit</a> <a id="3783" href="Examples.Amortized.html#3702" class="Bound">e</a><a id="3784" class="Symbol">)</a>
    <a id="Queue.enqueue/step"></a><a id="3790" href="Examples.Amortized.html#3790" class="Postulate">enqueue/step</a> <a id="3803" class="Symbol">:</a> <a id="3805" class="Symbol">∀</a> <a id="3807" class="Symbol">{</a><a id="3808" href="Examples.Amortized.html#3808" class="Bound">c</a> <a id="3810" href="Examples.Amortized.html#3810" class="Bound">e</a><a id="3811" class="Symbol">}</a> <a id="3813" class="Symbol">→</a> <a id="3815" href="Examples.Amortized.html#3511" class="Field">Queue.enqueue</a> <a id="3829" class="Symbol">(</a><a id="3830" href="Calf.Step.html#337" class="Function">step</a> <a id="3835" class="Symbol">(</a><a id="3836" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="3842" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="3843" class="Symbol">)</a> <a id="3845" href="Examples.Amortized.html#3808" class="Bound">c</a> <a id="3847" href="Examples.Amortized.html#3810" class="Bound">e</a><a id="3848" class="Symbol">)</a> <a id="3850" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3852" href="Calf.Step.html#337" class="Function">step</a> <a id="3857" class="Symbol">(</a><a id="3858" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="3860" href="Examples.Amortized.html#3355" class="Function">E</a> <a id="3862" class="Symbol">λ</a> <a id="3864" href="Examples.Amortized.html#3864" class="Bound">_</a> <a id="3866" class="Symbol">→</a> <a id="3868" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="3874" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="3875" class="Symbol">)</a> <a id="3877" href="Examples.Amortized.html#3808" class="Bound">c</a> <a id="3879" class="Symbol">(</a><a id="3880" href="Examples.Amortized.html#3511" class="Field">Queue.enqueue</a> <a id="3894" href="Examples.Amortized.html#3810" class="Bound">e</a><a id="3895" class="Symbol">)</a>
    <a id="Queue.dequeue/step"></a><a id="3901" href="Examples.Amortized.html#3901" class="Postulate">dequeue/step</a> <a id="3914" class="Symbol">:</a> <a id="3916" class="Symbol">∀</a> <a id="3918" class="Symbol">{</a><a id="3919" href="Examples.Amortized.html#3919" class="Bound">c</a> <a id="3921" href="Examples.Amortized.html#3921" class="Bound">e</a><a id="3922" class="Symbol">}</a> <a id="3924" class="Symbol">→</a> <a id="3926" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="3940" class="Symbol">(</a><a id="3941" href="Calf.Step.html#337" class="Function">step</a> <a id="3946" class="Symbol">(</a><a id="3947" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="3953" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="3954" class="Symbol">)</a> <a id="3956" href="Examples.Amortized.html#3919" class="Bound">c</a> <a id="3958" href="Examples.Amortized.html#3921" class="Bound">e</a><a id="3959" class="Symbol">)</a> <a id="3961" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3963" href="Calf.Step.html#337" class="Function">step</a> <a id="3968" class="Symbol">(</a><a id="3969" href="Calf.Types.Maybe.html#177" class="Function">maybe</a> <a id="3975" href="Examples.Amortized.html#3355" class="Function">E</a> <a id="3977" href="Examples.Amortized.html#801" class="Function Operator">⋉</a> <a id="3979" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="3985" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="3986" class="Symbol">)</a> <a id="3988" href="Examples.Amortized.html#3919" class="Bound">c</a> <a id="3990" class="Symbol">(</a><a id="3991" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="4005" href="Examples.Amortized.html#3921" class="Bound">e</a><a id="4006" class="Symbol">)</a>
    <a id="4012" class="Symbol">{-#</a> <a id="4016" class="Keyword">REWRITE</a> <a id="4024" href="Examples.Amortized.html#3682" class="Postulate">quit/step</a> <a id="4034" href="Examples.Amortized.html#3790" class="Postulate">enqueue/step</a> <a id="4047" href="Examples.Amortized.html#3901" class="Postulate">dequeue/step</a> <a id="4060" class="Symbol">#-}</a>

  <a id="4067" class="Symbol">{-#</a> <a id="4071" class="Keyword">TERMINATING</a> <a id="4083" class="Symbol">#-}</a>
  <a id="Queue.list-queue"></a><a id="4089" href="Examples.Amortized.html#4089" class="Function">list-queue</a> <a id="4100" class="Symbol">:</a> <a id="4102" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="4106" class="Symbol">(</a><a id="4107" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="4109" class="Symbol">(</a><a id="4110" href="Calf.Types.List.html#202" class="Function">list</a> <a id="4115" href="Examples.Amortized.html#3355" class="Function">E</a><a id="4116" class="Symbol">)</a> <a id="4118" class="Symbol">λ</a> <a id="4120" href="Examples.Amortized.html#4120" class="Symbol">_</a> <a id="4122" class="Symbol">→</a> <a id="4124" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="4130" class="Symbol">(</a><a id="4131" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="4133" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="4137" class="Symbol">))</a>
  <a id="4142" href="Examples.Amortized.html#3489" class="Field">Queue.quit</a> <a id="4153" class="Symbol">(</a><a id="4154" href="Examples.Amortized.html#4089" class="Function">list-queue</a> <a id="4165" href="Examples.Amortized.html#4165" class="Bound">l</a><a id="4166" class="Symbol">)</a> <a id="4168" class="Symbol">=</a> <a id="4170" href="Calf.Metalanguage.html#554" class="Function">ret</a> <a id="4174" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a>
  <a id="4181" href="Examples.Amortized.html#3511" class="Field">Queue.enqueue</a> <a id="4195" class="Symbol">(</a><a id="4196" href="Examples.Amortized.html#4089" class="Function">list-queue</a> <a id="4207" href="Examples.Amortized.html#4207" class="Bound">l</a><a id="4208" class="Symbol">)</a> <a id="4210" href="Examples.Amortized.html#4210" class="Bound">e</a> <a id="4212" class="Symbol">=</a> <a id="4214" href="Calf.Step.html#337" class="Function">step</a> <a id="4219" class="Symbol">(</a><a id="4220" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="4226" class="Symbol">(</a><a id="4227" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="4229" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="4233" class="Symbol">))</a> <a id="4236" class="Symbol">(</a><a id="4237" href="Data.List.Base.html#5067" class="Function">length</a> <a id="4244" href="Examples.Amortized.html#4207" class="Bound">l</a><a id="4245" class="Symbol">)</a> <a id="4247" class="Symbol">(</a><a id="4248" href="Examples.Amortized.html#4089" class="Function">list-queue</a> <a id="4259" class="Symbol">(</a><a id="4260" href="Examples.Amortized.html#4207" class="Bound">l</a> <a id="4262" href="Data.List.Base.html#1938" class="Function Operator">++</a> <a id="4265" href="Data.List.Base.html#5228" class="Function Operator">[</a> <a id="4267" href="Examples.Amortized.html#4210" class="Bound">e</a> <a id="4269" href="Data.List.Base.html#5228" class="Function Operator">]</a><a id="4270" class="Symbol">))</a>
  <a id="4275" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="4289" class="Symbol">(</a><a id="4290" href="Examples.Amortized.html#4089" class="Function">list-queue</a> <a id="4301" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>     <a id="4308" class="Symbol">)</a> <a id="4310" class="Symbol">=</a> <a id="4312" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a> <a id="4320" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4322" href="Examples.Amortized.html#4089" class="Function">list-queue</a> <a id="4333" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="4338" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="4352" class="Symbol">(</a><a id="4353" href="Examples.Amortized.html#4089" class="Function">list-queue</a> <a id="4364" class="Symbol">(</a><a id="4365" href="Examples.Amortized.html#4365" class="Bound">e</a> <a id="4367" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="4369" href="Examples.Amortized.html#4369" class="Bound">l</a><a id="4370" class="Symbol">))</a> <a id="4373" class="Symbol">=</a> <a id="4375" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="4380" href="Examples.Amortized.html#4365" class="Bound">e</a> <a id="4382" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4384" href="Examples.Amortized.html#4089" class="Function">list-queue</a> <a id="4395" href="Examples.Amortized.html#4369" class="Bound">l</a>

  <a id="4400" class="Symbol">{-#</a> <a id="4404" class="Keyword">TERMINATING</a> <a id="4416" class="Symbol">#-}</a>
  <a id="Queue.SPEC/list-queue"></a><a id="4422" href="Examples.Amortized.html#4422" class="Function">SPEC/list-queue</a> <a id="4438" class="Symbol">:</a> <a id="4440" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="4444" class="Symbol">(</a><a id="4445" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="4447" class="Symbol">(</a><a id="4448" href="Calf.Types.List.html#202" class="Function">list</a> <a id="4453" href="Examples.Amortized.html#3355" class="Function">E</a><a id="4454" class="Symbol">)</a> <a id="4456" class="Symbol">λ</a> <a id="4458" href="Examples.Amortized.html#4458" class="Symbol">_</a> <a id="4460" class="Symbol">→</a> <a id="4462" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="4468" class="Symbol">(</a><a id="4469" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="4471" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="4475" class="Symbol">))</a>
  <a id="4480" href="Examples.Amortized.html#3489" class="Field">Queue.quit</a> <a id="4491" class="Symbol">(</a><a id="4492" href="Examples.Amortized.html#4422" class="Function">SPEC/list-queue</a> <a id="4508" href="Examples.Amortized.html#4508" class="Bound">l</a><a id="4509" class="Symbol">)</a> <a id="4511" class="Symbol">=</a> <a id="4513" href="Calf.Metalanguage.html#554" class="Function">ret</a> <a id="4517" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a>
  <a id="4524" href="Examples.Amortized.html#3511" class="Field">Queue.enqueue</a> <a id="4538" class="Symbol">(</a><a id="4539" href="Examples.Amortized.html#4422" class="Function">SPEC/list-queue</a> <a id="4555" href="Examples.Amortized.html#4555" class="Bound">l</a><a id="4556" class="Symbol">)</a> <a id="4558" href="Examples.Amortized.html#4558" class="Bound">e</a> <a id="4560" class="Symbol">=</a> <a id="4562" href="Calf.Step.html#337" class="Function">step</a> <a id="4567" class="Symbol">(</a><a id="4568" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="4574" class="Symbol">(</a><a id="4575" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="4577" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="4581" class="Symbol">))</a> <a id="4584" class="Number">1</a> <a id="4586" class="Symbol">(</a><a id="4587" href="Examples.Amortized.html#4422" class="Function">SPEC/list-queue</a> <a id="4603" class="Symbol">(</a><a id="4604" href="Examples.Amortized.html#4555" class="Bound">l</a> <a id="4606" href="Data.List.Base.html#1938" class="Function Operator">++</a> <a id="4609" href="Data.List.Base.html#5228" class="Function Operator">[</a> <a id="4611" href="Examples.Amortized.html#4558" class="Bound">e</a> <a id="4613" href="Data.List.Base.html#5228" class="Function Operator">]</a><a id="4614" class="Symbol">))</a>
  <a id="4619" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="4633" class="Symbol">(</a><a id="4634" href="Examples.Amortized.html#4422" class="Function">SPEC/list-queue</a> <a id="4650" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>     <a id="4657" class="Symbol">)</a> <a id="4659" class="Symbol">=</a> <a id="4661" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a> <a id="4669" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4671" href="Examples.Amortized.html#4422" class="Function">SPEC/list-queue</a> <a id="4687" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="4692" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="4706" class="Symbol">(</a><a id="4707" href="Examples.Amortized.html#4422" class="Function">SPEC/list-queue</a> <a id="4723" class="Symbol">(</a><a id="4724" href="Examples.Amortized.html#4724" class="Bound">e</a> <a id="4726" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="4728" href="Examples.Amortized.html#4728" class="Bound">l</a><a id="4729" class="Symbol">))</a> <a id="4732" class="Symbol">=</a> <a id="4734" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="4739" href="Examples.Amortized.html#4724" class="Bound">e</a> <a id="4741" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4743" href="Examples.Amortized.html#4422" class="Function">SPEC/list-queue</a> <a id="4759" href="Examples.Amortized.html#4728" class="Bound">l</a>

  <a id="Queue.Φ"></a><a id="4764" href="Examples.Amortized.html#4764" class="Function">Φ</a> <a id="4766" class="Symbol">:</a> <a id="4768" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="4772" class="Symbol">(</a><a id="4773" href="Calf.Types.List.html#202" class="Function">list</a> <a id="4778" href="Examples.Amortized.html#3355" class="Function">E</a><a id="4779" class="Symbol">)</a> <a id="4781" class="Symbol">→</a> <a id="4783" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="4787" class="Symbol">(</a><a id="4788" href="Calf.Types.List.html#202" class="Function">list</a> <a id="4793" href="Examples.Amortized.html#3355" class="Function">E</a><a id="4794" class="Symbol">)</a> <a id="4796" class="Symbol">→</a> <a id="4798" href="Calf.CostMonoid.html#2944" class="Function">ℂ</a>
  <a id="4802" href="Examples.Amortized.html#4764" class="Function">Φ</a> <a id="4804" href="Examples.Amortized.html#4804" class="Bound">bl</a> <a id="4807" href="Examples.Amortized.html#4807" class="Bound">fl</a> <a id="4810" class="Symbol">=</a> <a id="4812" href="Data.List.Base.html#5067" class="Function">length</a> <a id="4819" href="Examples.Amortized.html#4804" class="Bound">bl</a>

  <a id="4825" class="Symbol">{-#</a> <a id="4829" class="Keyword">TERMINATING</a> <a id="4841" class="Symbol">#-}</a>
  <a id="Queue.batched-queue"></a><a id="4847" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="4861" class="Symbol">:</a> <a id="4863" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="4867" class="Symbol">(</a><a id="4868" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="4870" class="Symbol">(</a><a id="4871" href="Calf.Types.List.html#202" class="Function">list</a> <a id="4876" href="Examples.Amortized.html#3355" class="Function">E</a><a id="4877" class="Symbol">)</a> <a id="4879" class="Symbol">λ</a> <a id="4881" href="Examples.Amortized.html#4881" class="Symbol">_</a> <a id="4883" class="Symbol">→</a> <a id="4885" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="4887" class="Symbol">(</a><a id="4888" href="Calf.Types.List.html#202" class="Function">list</a> <a id="4893" href="Examples.Amortized.html#3355" class="Function">E</a><a id="4894" class="Symbol">)</a> <a id="4896" class="Symbol">λ</a> <a id="4898" href="Examples.Amortized.html#4898" class="Symbol">_</a> <a id="4900" class="Symbol">→</a> <a id="4902" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="4908" class="Symbol">(</a><a id="4909" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="4911" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="4915" class="Symbol">))</a>
  <a id="4920" href="Examples.Amortized.html#3489" class="Field">Queue.quit</a> <a id="4931" class="Symbol">(</a><a id="4932" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="4946" href="Examples.Amortized.html#4946" class="Bound">bl</a> <a id="4949" href="Examples.Amortized.html#4949" class="Bound">fl</a><a id="4951" class="Symbol">)</a> <a id="4953" class="Symbol">=</a> <a id="4955" href="Calf.Step.html#337" class="Function">step</a> <a id="4960" class="Symbol">(</a><a id="4961" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="4963" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="4967" class="Symbol">)</a> <a id="4969" class="Symbol">(</a><a id="4970" href="Examples.Amortized.html#4764" class="Function">Φ</a> <a id="4972" href="Examples.Amortized.html#4946" class="Bound">bl</a> <a id="4975" href="Examples.Amortized.html#4949" class="Bound">fl</a><a id="4977" class="Symbol">)</a> <a id="4979" class="Symbol">(</a><a id="4980" href="Calf.Metalanguage.html#554" class="Function">ret</a> <a id="4984" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a><a id="4988" class="Symbol">)</a>
  <a id="4992" href="Examples.Amortized.html#3511" class="Field">Queue.enqueue</a> <a id="5006" class="Symbol">(</a><a id="5007" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="5021" href="Examples.Amortized.html#5021" class="Bound">bl</a> <a id="5024" href="Examples.Amortized.html#5024" class="Bound">fl</a><a id="5026" class="Symbol">)</a> <a id="5028" href="Examples.Amortized.html#5028" class="Bound">e</a> <a id="5030" class="Symbol">=</a> <a id="5032" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="5046" class="Symbol">(</a><a id="5047" href="Examples.Amortized.html#5028" class="Bound">e</a> <a id="5049" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="5051" href="Examples.Amortized.html#5021" class="Bound">bl</a><a id="5053" class="Symbol">)</a> <a id="5055" href="Examples.Amortized.html#5024" class="Bound">fl</a>
  <a id="5060" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="5074" class="Symbol">(</a><a id="5075" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="5089" href="Examples.Amortized.html#5089" class="Bound">bl</a> <a id="5092" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="5094" class="Symbol">)</a> <a id="5096" class="Keyword">with</a> <a id="5101" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="5109" href="Examples.Amortized.html#5089" class="Bound">bl</a>
  <a id="5114" class="Symbol">...</a> <a id="5118" class="Symbol">|</a> <a id="5120" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="5123" class="Symbol">=</a> <a id="5125" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a> <a id="5133" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5135" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="5149" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="5152" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="5157" class="Symbol">...</a> <a id="5161" class="Symbol">|</a> <a id="5163" href="Examples.Amortized.html#5163" class="Bound">e</a> <a id="5165" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="5167" href="Examples.Amortized.html#5167" class="Bound">fl</a> <a id="5170" class="Symbol">=</a> <a id="5172" href="Calf.Step.html#337" class="Function">step</a> <a id="5177" class="Symbol">(</a><a id="5178" href="Calf.Types.Maybe.html#177" class="Function">maybe</a> <a id="5184" href="Examples.Amortized.html#3355" class="Function">E</a> <a id="5186" href="Examples.Amortized.html#801" class="Function Operator">⋉</a> <a id="5188" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="5194" class="Symbol">(</a><a id="5195" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="5197" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="5201" class="Symbol">))</a> <a id="5204" class="Symbol">(</a><a id="5205" href="Data.List.Base.html#5067" class="Function">length</a> <a id="5212" class="Bound">bl</a><a id="5214" class="Symbol">)</a> <a id="5216" class="Symbol">(</a><a id="5217" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="5222" href="Examples.Amortized.html#5163" class="Bound">e</a> <a id="5224" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5226" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="5240" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="5243" href="Examples.Amortized.html#5167" class="Bound">fl</a><a id="5245" class="Symbol">)</a>
  <a id="5249" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="5263" class="Symbol">(</a><a id="5264" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="5278" href="Examples.Amortized.html#5278" class="Bound">bl</a> <a id="5281" class="Symbol">(</a><a id="5282" href="Examples.Amortized.html#5282" class="Bound">e</a> <a id="5284" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="5286" href="Examples.Amortized.html#5286" class="Bound">fl</a><a id="5288" class="Symbol">))</a> <a id="5291" class="Symbol">=</a> <a id="5293" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="5298" href="Examples.Amortized.html#5282" class="Bound">e</a> <a id="5300" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5302" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="5316" href="Examples.Amortized.html#5278" class="Bound">bl</a> <a id="5319" href="Examples.Amortized.html#5286" class="Bound">fl</a>

  <a id="5325" class="Symbol">{-#</a> <a id="5329" class="Keyword">TERMINATING</a> <a id="5341" class="Symbol">#-}</a>
  <a id="Queue.SPEC/batched-queue"></a><a id="5347" href="Examples.Amortized.html#5347" class="Function">SPEC/batched-queue</a> <a id="5366" class="Symbol">:</a> <a id="5368" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="5372" class="Symbol">(</a><a id="5373" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="5375" class="Symbol">(</a><a id="5376" href="Calf.Types.List.html#202" class="Function">list</a> <a id="5381" href="Examples.Amortized.html#3355" class="Function">E</a><a id="5382" class="Symbol">)</a> <a id="5384" class="Symbol">λ</a> <a id="5386" href="Examples.Amortized.html#5386" class="Symbol">_</a> <a id="5388" class="Symbol">→</a> <a id="5390" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="5392" class="Symbol">(</a><a id="5393" href="Calf.Types.List.html#202" class="Function">list</a> <a id="5398" href="Examples.Amortized.html#3355" class="Function">E</a><a id="5399" class="Symbol">)</a> <a id="5401" class="Symbol">λ</a> <a id="5403" href="Examples.Amortized.html#5403" class="Symbol">_</a> <a id="5405" class="Symbol">→</a> <a id="5407" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="5413" class="Symbol">(</a><a id="5414" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="5416" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="5420" class="Symbol">))</a>
  <a id="5425" href="Examples.Amortized.html#3489" class="Field">Queue.quit</a> <a id="5436" class="Symbol">(</a><a id="5437" href="Examples.Amortized.html#5347" class="Function">SPEC/batched-queue</a> <a id="5456" href="Examples.Amortized.html#5456" class="Bound">bl</a> <a id="5459" href="Examples.Amortized.html#5459" class="Bound">fl</a><a id="5461" class="Symbol">)</a> <a id="5463" class="Symbol">=</a> <a id="5465" href="Calf.Metalanguage.html#554" class="Function">ret</a> <a id="5469" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a>
  <a id="5476" href="Examples.Amortized.html#3511" class="Field">Queue.enqueue</a> <a id="5490" class="Symbol">(</a><a id="5491" href="Examples.Amortized.html#5347" class="Function">SPEC/batched-queue</a> <a id="5510" href="Examples.Amortized.html#5510" class="Bound">bl</a> <a id="5513" href="Examples.Amortized.html#5513" class="Bound">fl</a><a id="5515" class="Symbol">)</a> <a id="5517" href="Examples.Amortized.html#5517" class="Bound">e</a> <a id="5519" class="Symbol">=</a> <a id="5521" href="Calf.Step.html#337" class="Function">step</a> <a id="5526" class="Symbol">(</a><a id="5527" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="5533" class="Symbol">(</a><a id="5534" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="5536" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="5540" class="Symbol">))</a> <a id="5543" class="Number">1</a> <a id="5545" class="Symbol">(</a><a id="5546" href="Examples.Amortized.html#5347" class="Function">SPEC/batched-queue</a> <a id="5565" class="Symbol">(</a><a id="5566" href="Examples.Amortized.html#5517" class="Bound">e</a> <a id="5568" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="5570" href="Examples.Amortized.html#5510" class="Bound">bl</a><a id="5572" class="Symbol">)</a> <a id="5574" href="Examples.Amortized.html#5513" class="Bound">fl</a><a id="5576" class="Symbol">)</a>
  <a id="5580" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="5594" class="Symbol">(</a><a id="5595" href="Examples.Amortized.html#5347" class="Function">SPEC/batched-queue</a> <a id="5614" href="Examples.Amortized.html#5614" class="Bound">bl</a> <a id="5617" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="5619" class="Symbol">)</a> <a id="5621" class="Keyword">with</a> <a id="5626" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="5634" href="Examples.Amortized.html#5614" class="Bound">bl</a>
  <a id="5639" class="Symbol">...</a> <a id="5643" class="Symbol">|</a> <a id="5645" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="5648" class="Symbol">=</a> <a id="5650" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a> <a id="5658" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5660" href="Examples.Amortized.html#5347" class="Function">SPEC/batched-queue</a> <a id="5679" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="5682" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="5687" class="Symbol">...</a> <a id="5691" class="Symbol">|</a> <a id="5693" href="Examples.Amortized.html#5693" class="Bound">e</a> <a id="5695" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="5697" href="Examples.Amortized.html#5697" class="Bound">fl</a> <a id="5700" class="Symbol">=</a> <a id="5702" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="5707" href="Examples.Amortized.html#5693" class="Bound">e</a> <a id="5709" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5711" href="Examples.Amortized.html#5347" class="Function">SPEC/batched-queue</a> <a id="5730" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="5733" href="Examples.Amortized.html#5697" class="Bound">fl</a>
  <a id="5738" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="5752" class="Symbol">(</a><a id="5753" href="Examples.Amortized.html#5347" class="Function">SPEC/batched-queue</a> <a id="5772" href="Examples.Amortized.html#5772" class="Bound">bl</a> <a id="5775" class="Symbol">(</a><a id="5776" href="Examples.Amortized.html#5776" class="Bound">e</a> <a id="5778" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="5780" href="Examples.Amortized.html#5780" class="Bound">fl</a><a id="5782" class="Symbol">))</a> <a id="5785" class="Symbol">=</a> <a id="5787" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="5792" href="Examples.Amortized.html#5776" class="Bound">e</a> <a id="5794" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5796" href="Examples.Amortized.html#5347" class="Function">SPEC/batched-queue</a> <a id="5815" href="Examples.Amortized.html#5772" class="Bound">bl</a> <a id="5818" href="Examples.Amortized.html#5780" class="Bound">fl</a>

  <a id="5824" class="Keyword">record</a> <a id="Queue._≈_"></a><a id="5831" href="Examples.Amortized.html#5831" class="Record Operator">_≈_</a> <a id="5835" class="Symbol">(</a><a id="5836" href="Examples.Amortized.html#5836" class="Bound">q₁</a> <a id="5839" href="Examples.Amortized.html#5839" class="Bound">q₂</a> <a id="5842" class="Symbol">:</a> <a id="5844" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="5848" class="Symbol">(</a><a id="5849" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="5855" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="5856" class="Symbol">))</a> <a id="5859" class="Symbol">:</a> <a id="5861" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5865" class="Keyword">where</a>
    <a id="5875" class="Keyword">coinductive</a>
    <a id="5891" class="Keyword">field</a>
      <a id="Queue._≈_.quit"></a><a id="5903" href="Examples.Amortized.html#5903" class="Field">quit</a>    <a id="5911" class="Symbol">:</a> <a id="5913" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="5917" href="Function.Base.html#2003" class="Function Operator">$</a>
        <a id="5927" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="5932" class="Symbol">(</a><a id="5933" href="Examples.Amortized.html#3489" class="Field">Queue.quit</a> <a id="5944" href="Examples.Amortized.html#5836" class="Bound">q₁</a> <a id="5947" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5949" href="Examples.Amortized.html#3489" class="Field">Queue.quit</a> <a id="5960" href="Examples.Amortized.html#5839" class="Bound">q₂</a><a id="5962" class="Symbol">)</a>
      <a id="Queue._≈_.enqueue"></a><a id="5970" href="Examples.Amortized.html#5970" class="Field">enqueue</a> <a id="5978" class="Symbol">:</a> <a id="5980" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="5984" href="Function.Base.html#2003" class="Function Operator">$</a>
        <a id="5994" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="5996" href="Examples.Amortized.html#3355" class="Function">E</a> <a id="5998" class="Symbol">λ</a> <a id="6000" href="Examples.Amortized.html#6000" class="Bound">e</a> <a id="6002" class="Symbol">→</a> <a id="6004" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="6009" class="Symbol">(</a><a id="6010" href="Examples.Amortized.html#3511" class="Field">Queue.enqueue</a> <a id="6024" href="Examples.Amortized.html#5836" class="Bound">q₁</a> <a id="6027" href="Examples.Amortized.html#6000" class="Bound">e</a> <a id="6029" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="6031" href="Examples.Amortized.html#3511" class="Field">Queue.enqueue</a> <a id="6045" href="Examples.Amortized.html#5839" class="Bound">q₂</a> <a id="6048" href="Examples.Amortized.html#6000" class="Bound">e</a><a id="6049" class="Symbol">)</a>
      <a id="Queue._≈_.dequeue"></a><a id="6057" href="Examples.Amortized.html#6057" class="Field">dequeue</a> <a id="6065" class="Symbol">:</a> <a id="6067" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="6071" href="Function.Base.html#2003" class="Function Operator">$</a>
        <a id="6081" class="Symbol">(</a><a id="6082" href="Calf.Metalanguage.html#333" class="Function">U</a> <a id="6084" class="Symbol">(</a><a id="6085" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="6090" class="Symbol">(</a><a id="6091" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="6097" class="Symbol">(</a><a id="6098" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="6112" href="Examples.Amortized.html#5836" class="Bound">q₁</a><a id="6114" class="Symbol">)</a> <a id="6116" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="6118" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="6124" class="Symbol">(</a><a id="6125" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="6139" href="Examples.Amortized.html#5839" class="Bound">q₂</a><a id="6141" class="Symbol">))))</a> <a id="6146" href="Examples.Amortized.html#801" class="Function Operator">⋉</a>
        <a id="6156" class="Symbol">(</a><a id="6157" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="6162" class="Symbol">(</a><a id="6163" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="6169" class="Symbol">(</a><a id="6170" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="6184" href="Examples.Amortized.html#5836" class="Bound">q₁</a><a id="6186" class="Symbol">)</a> <a id="6188" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="6190" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="6196" class="Symbol">(</a><a id="6197" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="6211" href="Examples.Amortized.html#5839" class="Bound">q₂</a><a id="6213" class="Symbol">)))</a>

  <a id="Queue.≈-cong"></a><a id="6220" href="Examples.Amortized.html#6220" class="Function">≈-cong</a> <a id="6227" class="Symbol">:</a> <a id="6229" class="Symbol">(</a><a id="6230" href="Examples.Amortized.html#6230" class="Bound">c</a> <a id="6232" class="Symbol">:</a> <a id="6234" href="Calf.CostMonoid.html#2944" class="Function">ℂ</a><a id="6235" class="Symbol">)</a> <a id="6237" class="Symbol">{</a><a id="6238" href="Examples.Amortized.html#6238" class="Bound">x</a> <a id="6240" href="Examples.Amortized.html#6240" class="Bound">y</a> <a id="6242" class="Symbol">:</a> <a id="6244" href="Examples.Amortized.html#3426" class="Record">Queue</a> <a id="6250" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="6251" class="Symbol">}</a> <a id="6253" class="Symbol">→</a> <a id="6255" href="Examples.Amortized.html#6238" class="Bound">x</a> <a id="6257" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="6259" href="Examples.Amortized.html#6240" class="Bound">y</a> <a id="6261" class="Symbol">→</a> <a id="6263" href="Calf.Step.html#337" class="Function">step</a> <a id="6268" class="Symbol">(</a><a id="6269" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="6275" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="6276" class="Symbol">)</a> <a id="6278" href="Examples.Amortized.html#6230" class="Bound">c</a> <a id="6280" href="Examples.Amortized.html#6238" class="Bound">x</a> <a id="6282" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="6284" href="Calf.Step.html#337" class="Function">step</a> <a id="6289" class="Symbol">(</a><a id="6290" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="6296" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="6297" class="Symbol">)</a> <a id="6299" href="Examples.Amortized.html#6230" class="Bound">c</a> <a id="6301" href="Examples.Amortized.html#6240" class="Bound">y</a>
  <a id="6305" href="Examples.Amortized.html#5903" class="Field">_≈_.quit</a> <a id="6314" class="Symbol">(</a><a id="6315" href="Examples.Amortized.html#6220" class="Function">≈-cong</a> <a id="6322" class="Symbol">{</a><a id="6323" class="Argument">X</a> <a id="6325" class="Symbol">=</a> <a id="6327" href="Examples.Amortized.html#6327" class="Bound">X</a><a id="6328" class="Symbol">}</a> <a id="6330" href="Examples.Amortized.html#6330" class="Bound">c</a> <a id="6332" href="Examples.Amortized.html#6332" class="Bound">h</a><a id="6333" class="Symbol">)</a> <a id="6335" class="Symbol">=</a> <a id="6337" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="6345" class="Symbol">(</a><a id="6346" href="Calf.Step.html#337" class="Function">step</a> <a id="6351" href="Examples.Amortized.html#6327" class="Bound">X</a> <a id="6353" href="Examples.Amortized.html#6330" class="Bound">c</a><a id="6354" class="Symbol">)</a> <a id="6356" class="Symbol">(</a><a id="6357" href="Examples.Amortized.html#5903" class="Field">_≈_.quit</a> <a id="6366" href="Examples.Amortized.html#6332" class="Bound">h</a><a id="6367" class="Symbol">)</a>
  <a id="6371" href="Examples.Amortized.html#5970" class="Field">_≈_.enqueue</a> <a id="6383" class="Symbol">(</a><a id="6384" href="Examples.Amortized.html#6220" class="Function">≈-cong</a> <a id="6391" href="Examples.Amortized.html#6391" class="Bound">c</a> <a id="6393" href="Examples.Amortized.html#6393" class="Bound">h</a><a id="6394" class="Symbol">)</a> <a id="6396" href="Examples.Amortized.html#6396" class="Bound">e</a> <a id="6398" class="Symbol">=</a> <a id="6400" href="Examples.Amortized.html#6220" class="Function">≈-cong</a> <a id="6407" href="Examples.Amortized.html#6391" class="Bound">c</a> <a id="6409" class="Symbol">(</a><a id="6410" href="Examples.Amortized.html#5970" class="Field">_≈_.enqueue</a> <a id="6422" href="Examples.Amortized.html#6393" class="Bound">h</a> <a id="6424" href="Examples.Amortized.html#6396" class="Bound">e</a><a id="6425" class="Symbol">)</a>
  <a id="6429" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="6441" class="Symbol">(</a><a id="6442" href="Examples.Amortized.html#6220" class="Function">≈-cong</a> <a id="6449" href="Examples.Amortized.html#6449" class="Bound">c</a> <a id="6451" href="Examples.Amortized.html#6451" class="Bound">h</a><a id="6452" class="Symbol">)</a> <a id="6454" class="Symbol">=</a> <a id="6456" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="6462" class="Symbol">(</a><a id="6463" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="6475" href="Examples.Amortized.html#6451" class="Bound">h</a><a id="6476" class="Symbol">)</a> <a id="6478" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6480" href="Examples.Amortized.html#6220" class="Function">≈-cong</a> <a id="6487" href="Examples.Amortized.html#6449" class="Bound">c</a> <a id="6489" class="Symbol">(</a><a id="6490" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="6496" class="Symbol">(</a><a id="6497" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="6509" href="Examples.Amortized.html#6451" class="Bound">h</a><a id="6510" class="Symbol">))</a>

  <a id="6516" class="Symbol">{-#</a> <a id="6520" class="Keyword">TERMINATING</a> <a id="6532" class="Symbol">#-}</a>
  <a id="Queue.batched-queue≈SPEC/batched-queue"></a><a id="6538" href="Examples.Amortized.html#6538" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="6571" class="Symbol">:</a> <a id="6573" class="Symbol">(</a><a id="6574" href="Examples.Amortized.html#6574" class="Bound">bl</a> <a id="6577" href="Examples.Amortized.html#6577" class="Bound">fl</a> <a id="6580" class="Symbol">:</a> <a id="6582" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="6586" class="Symbol">(</a><a id="6587" href="Calf.Types.List.html#202" class="Function">list</a> <a id="6592" href="Examples.Amortized.html#3355" class="Function">E</a><a id="6593" class="Symbol">))</a> <a id="6596" class="Symbol">→</a>
    <a id="6602" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="6616" href="Examples.Amortized.html#6574" class="Bound">bl</a> <a id="6619" href="Examples.Amortized.html#6577" class="Bound">fl</a> <a id="6622" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="6624" href="Calf.Step.html#337" class="Function">step</a> <a id="6629" class="Symbol">(</a><a id="6630" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="6636" class="Symbol">(</a><a id="6637" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="6639" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="6643" class="Symbol">))</a> <a id="6646" class="Symbol">(</a><a id="6647" href="Examples.Amortized.html#4764" class="Function">Φ</a> <a id="6649" href="Examples.Amortized.html#6574" class="Bound">bl</a> <a id="6652" href="Examples.Amortized.html#6577" class="Bound">fl</a><a id="6654" class="Symbol">)</a> <a id="6656" class="Symbol">(</a><a id="6657" href="Examples.Amortized.html#5347" class="Function">SPEC/batched-queue</a> <a id="6676" href="Examples.Amortized.html#6574" class="Bound">bl</a> <a id="6679" href="Examples.Amortized.html#6577" class="Bound">fl</a><a id="6681" class="Symbol">)</a>
  <a id="6685" href="Examples.Amortized.html#5903" class="Field">_≈_.quit</a> <a id="6694" class="Symbol">(</a><a id="6695" href="Examples.Amortized.html#6538" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="6728" href="Examples.Amortized.html#6728" class="Bound">bl</a> <a id="6731" href="Examples.Amortized.html#6731" class="Bound">fl</a><a id="6733" class="Symbol">)</a> <a id="6735" class="Symbol">=</a> <a id="6737" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="6744" href="Examples.Amortized.html#5970" class="Field">_≈_.enqueue</a> <a id="6756" class="Symbol">(</a><a id="6757" href="Examples.Amortized.html#6538" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="6790" href="Examples.Amortized.html#6790" class="Bound">bl</a> <a id="6793" href="Examples.Amortized.html#6793" class="Bound">fl</a><a id="6795" class="Symbol">)</a> <a id="6797" href="Examples.Amortized.html#6797" class="Bound">e</a> <a id="6799" class="Symbol">=</a>
    <a id="6805" href="Relation.Binary.PropositionalEquality.Core.html#1803" class="Function">Eq.subst</a>
      <a id="6820" class="Symbol">(λ</a> <a id="6823" href="Examples.Amortized.html#6823" class="Bound">c</a> <a id="6825" class="Symbol">→</a> <a id="6827" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="6841" class="Symbol">(</a><a id="6842" href="Examples.Amortized.html#6797" class="Bound">e</a> <a id="6844" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6846" href="Examples.Amortized.html#6790" class="Bound">bl</a><a id="6848" class="Symbol">)</a> <a id="6850" href="Examples.Amortized.html#6793" class="Bound">fl</a> <a id="6853" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="6855" href="Calf.Step.html#337" class="Function">step</a> <a id="6860" class="Symbol">(</a><a id="6861" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="6867" class="Symbol">(</a><a id="6868" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="6870" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="6874" class="Symbol">))</a> <a id="6877" href="Examples.Amortized.html#6823" class="Bound">c</a> <a id="6879" class="Symbol">(</a><a id="6880" href="Examples.Amortized.html#5347" class="Function">SPEC/batched-queue</a> <a id="6899" class="Symbol">(</a><a id="6900" href="Examples.Amortized.html#6797" class="Bound">e</a> <a id="6902" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6904" href="Examples.Amortized.html#6790" class="Bound">bl</a><a id="6906" class="Symbol">)</a> <a id="6908" href="Examples.Amortized.html#6793" class="Bound">fl</a><a id="6910" class="Symbol">))</a>
      <a id="6919" class="Symbol">(</a><a id="6920" href="Data.Nat.Properties.html#14786" class="Function">Nat.+-comm</a> <a id="6931" class="Number">1</a> <a id="6933" class="Symbol">(</a><a id="6934" href="Data.List.Base.html#5067" class="Function">length</a> <a id="6941" href="Examples.Amortized.html#6790" class="Bound">bl</a><a id="6943" class="Symbol">))</a>
      <a id="6952" class="Symbol">(</a><a id="6953" href="Examples.Amortized.html#6538" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="6986" class="Symbol">(</a><a id="6987" href="Examples.Amortized.html#6797" class="Bound">e</a> <a id="6989" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6991" href="Examples.Amortized.html#6790" class="Bound">bl</a><a id="6993" class="Symbol">)</a> <a id="6995" href="Examples.Amortized.html#6793" class="Bound">fl</a><a id="6997" class="Symbol">)</a>
  <a id="7001" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="7013" class="Symbol">(</a><a id="7014" href="Examples.Amortized.html#6538" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="7047" href="Examples.Amortized.html#7047" class="Bound">bl</a> <a id="7050" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="7052" class="Symbol">)</a> <a id="7054" class="Keyword">with</a> <a id="7059" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="7067" href="Examples.Amortized.html#7047" class="Bound">bl</a> <a id="7070" class="Symbol">|</a> <a id="7072" href="Data.List.Properties.html#38104" class="Function">List.reverse-injective</a> <a id="7095" class="Symbol">{</a><a id="7096" class="Argument">xs</a> <a id="7099" class="Symbol">=</a> <a id="7101" href="Examples.Amortized.html#7047" class="Bound">bl</a><a id="7103" class="Symbol">}</a> <a id="7105" class="Symbol">{</a><a id="7106" class="Argument">ys</a> <a id="7109" class="Symbol">=</a> <a id="7111" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="7113" class="Symbol">}</a>
  <a id="7117" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="7129" class="Symbol">(</a><a id="7130" href="Examples.Amortized.html#6538" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="7163" href="Examples.Amortized.html#7163" class="Bound">bl</a> <a id="7166" class="InductiveConstructor">[]</a><a id="7168" class="Symbol">)</a> <a id="7170" class="Symbol">|</a> <a id="7172" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="7175" class="Symbol">|</a> <a id="7177" href="Examples.Amortized.html#7177" class="Bound">h</a> <a id="7179" class="Keyword">with</a> <a id="7184" href="Examples.Amortized.html#7177" class="Bound">h</a> <a id="7186" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="7193" class="Symbol">...</a> <a id="7197" class="Symbol">|</a> <a id="7199" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="7204" class="Symbol">=</a> <a id="7206" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="7211" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="7213" href="Examples.Amortized.html#6538" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="7246" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="7249" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="7254" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="7266" class="Symbol">(</a><a id="7267" href="Examples.Amortized.html#6538" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="7300" href="Examples.Amortized.html#7300" class="Bound">bl</a> <a id="7303" class="InductiveConstructor">[]</a><a id="7305" class="Symbol">)</a> <a id="7307" class="Symbol">|</a> <a id="7309" href="Examples.Amortized.html#7309" class="Bound">e</a> <a id="7311" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7313" href="Examples.Amortized.html#7313" class="Bound">fl</a> <a id="7316" class="Symbol">|</a> <a id="7318" class="Symbol">_</a> <a id="7320" class="Symbol">=</a>
    <a id="7326" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="7331" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="7333" href="Examples.Amortized.html#6220" class="Function">≈-cong</a> <a id="7340" class="Symbol">(</a><a id="7341" href="Examples.Amortized.html#4764" class="Function">Φ</a> <a id="7343" href="Examples.Amortized.html#7300" class="Bound">bl</a> <a id="7346" href="Examples.Amortized.html#7313" class="Bound">fl</a><a id="7348" class="Symbol">)</a> <a id="7350" class="Symbol">(</a><a id="7351" href="Examples.Amortized.html#6538" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="7384" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="7387" href="Examples.Amortized.html#7313" class="Bound">fl</a><a id="7389" class="Symbol">)</a>
  <a id="7393" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="7405" class="Symbol">(</a><a id="7406" href="Examples.Amortized.html#6538" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="7439" href="Examples.Amortized.html#7439" class="Bound">bl</a> <a id="7442" class="Symbol">(</a><a id="7443" href="Examples.Amortized.html#7443" class="Bound">e</a> <a id="7445" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7447" href="Examples.Amortized.html#7447" class="Bound">fl</a><a id="7449" class="Symbol">))</a> <a id="7452" class="Symbol">=</a>
    <a id="7458" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="7463" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="7465" href="Examples.Amortized.html#6538" class="Function">batched-queue≈SPEC/batched-queue</a> <a id="7498" href="Examples.Amortized.html#7439" class="Bound">bl</a> <a id="7501" href="Examples.Amortized.html#7447" class="Bound">fl</a>

  <a id="7507" class="Symbol">{-#</a> <a id="7511" class="Keyword">TERMINATING</a> <a id="7523" class="Symbol">#-}</a>
  <a id="Queue.batched-queue≈SPEC/list-queue"></a><a id="7529" href="Examples.Amortized.html#7529" class="Function">batched-queue≈SPEC/list-queue</a> <a id="7559" class="Symbol">:</a> <a id="7561" class="Symbol">(</a><a id="7562" href="Examples.Amortized.html#7562" class="Bound">bl</a> <a id="7565" href="Examples.Amortized.html#7565" class="Bound">fl</a> <a id="7568" class="Symbol">:</a> <a id="7570" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="7574" class="Symbol">(</a><a id="7575" href="Calf.Types.List.html#202" class="Function">list</a> <a id="7580" href="Examples.Amortized.html#3355" class="Function">E</a><a id="7581" class="Symbol">))</a> <a id="7584" class="Symbol">→</a>
    <a id="7590" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="7604" href="Examples.Amortized.html#7562" class="Bound">bl</a> <a id="7607" href="Examples.Amortized.html#7565" class="Bound">fl</a> <a id="7610" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="7612" href="Calf.Step.html#337" class="Function">step</a> <a id="7617" class="Symbol">(</a><a id="7618" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="7624" class="Symbol">(</a><a id="7625" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="7627" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="7631" class="Symbol">))</a> <a id="7634" class="Symbol">(</a><a id="7635" href="Examples.Amortized.html#4764" class="Function">Φ</a> <a id="7637" href="Examples.Amortized.html#7562" class="Bound">bl</a> <a id="7640" href="Examples.Amortized.html#7565" class="Bound">fl</a><a id="7642" class="Symbol">)</a> <a id="7644" class="Symbol">(</a><a id="7645" href="Examples.Amortized.html#4422" class="Function">SPEC/list-queue</a> <a id="7661" class="Symbol">(</a><a id="7662" href="Examples.Amortized.html#7565" class="Bound">fl</a> <a id="7665" href="Data.List.Base.html#1938" class="Function Operator">++</a> <a id="7668" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="7676" href="Examples.Amortized.html#7562" class="Bound">bl</a><a id="7678" class="Symbol">))</a>
  <a id="7683" href="Examples.Amortized.html#5903" class="Field">_≈_.quit</a> <a id="7692" class="Symbol">(</a><a id="7693" href="Examples.Amortized.html#7529" class="Function">batched-queue≈SPEC/list-queue</a> <a id="7723" href="Examples.Amortized.html#7723" class="Bound">bl</a> <a id="7726" href="Examples.Amortized.html#7726" class="Bound">fl</a><a id="7728" class="Symbol">)</a> <a id="7730" class="Symbol">=</a> <a id="7732" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="7739" href="Examples.Amortized.html#5970" class="Field">_≈_.enqueue</a> <a id="7751" class="Symbol">(</a><a id="7752" href="Examples.Amortized.html#7529" class="Function">batched-queue≈SPEC/list-queue</a> <a id="7782" href="Examples.Amortized.html#7782" class="Bound">bl</a> <a id="7785" href="Examples.Amortized.html#7785" class="Bound">fl</a><a id="7787" class="Symbol">)</a> <a id="7789" href="Examples.Amortized.html#7789" class="Bound">e</a> <a id="7791" class="Symbol">=</a>
    <a id="7797" href="Relation.Binary.PropositionalEquality.Core.html#1858" class="Function">Eq.subst₂</a>
      <a id="7813" class="Symbol">(λ</a> <a id="7816" href="Examples.Amortized.html#7816" class="Bound">c</a> <a id="7818" href="Examples.Amortized.html#7818" class="Bound">l</a> <a id="7820" class="Symbol">→</a> <a id="7822" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="7836" class="Symbol">(</a><a id="7837" href="Examples.Amortized.html#7789" class="Bound">e</a> <a id="7839" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7841" href="Examples.Amortized.html#7782" class="Bound">bl</a><a id="7843" class="Symbol">)</a> <a id="7845" href="Examples.Amortized.html#7785" class="Bound">fl</a> <a id="7848" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="7850" href="Calf.Step.html#337" class="Function">step</a> <a id="7855" class="Symbol">(</a><a id="7856" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="7862" class="Symbol">(</a><a id="7863" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="7865" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="7869" class="Symbol">))</a> <a id="7872" href="Examples.Amortized.html#7816" class="Bound">c</a> <a id="7874" class="Symbol">(</a><a id="7875" href="Examples.Amortized.html#4422" class="Function">SPEC/list-queue</a> <a id="7891" href="Examples.Amortized.html#7818" class="Bound">l</a><a id="7892" class="Symbol">))</a>
      <a id="7901" class="Symbol">(</a><a id="7902" href="Data.Nat.Properties.html#14786" class="Function">Nat.+-comm</a> <a id="7913" class="Number">1</a> <a id="7915" class="Symbol">(</a><a id="7916" href="Data.List.Base.html#5067" class="Function">length</a> <a id="7923" href="Examples.Amortized.html#7782" class="Bound">bl</a><a id="7925" class="Symbol">))</a>
      <a id="7934" class="Symbol">(</a><a id="7935" class="Keyword">let</a> <a id="7939" class="Keyword">open</a> <a id="7944" href="Relation.Binary.PropositionalEquality.Core.html#2731" class="Module">≡-Reasoning</a> <a id="7956" class="Keyword">in</a>
      <a id="7965" href="Relation.Binary.PropositionalEquality.Core.html#2829" class="Function Operator">begin</a>
        <a id="7979" href="Examples.Amortized.html#7785" class="Bound">fl</a> <a id="7982" href="Data.List.Base.html#1938" class="Function Operator">++</a> <a id="7985" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="7993" class="Symbol">(</a><a id="7994" href="Examples.Amortized.html#7789" class="Bound">e</a> <a id="7996" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7998" href="Examples.Amortized.html#7782" class="Bound">bl</a><a id="8000" class="Symbol">)</a>
      <a id="8008" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">≡⟨</a> <a id="8011" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="8019" class="Symbol">(</a><a id="8020" href="Examples.Amortized.html#7785" class="Bound">fl</a> <a id="8023" href="Data.List.Base.html#1938" class="Function Operator">++_</a><a id="8026" class="Symbol">)</a> <a id="8028" class="Symbol">(</a><a id="8029" href="Data.List.Properties.html#37329" class="Function">List.unfold-reverse</a> <a id="8049" href="Examples.Amortized.html#7789" class="Bound">e</a> <a id="8051" href="Examples.Amortized.html#7782" class="Bound">bl</a><a id="8053" class="Symbol">)</a> <a id="8055" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">⟩</a>
        <a id="8065" href="Examples.Amortized.html#7785" class="Bound">fl</a> <a id="8068" href="Data.List.Base.html#1938" class="Function Operator">++</a> <a id="8071" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="8079" href="Examples.Amortized.html#7782" class="Bound">bl</a> <a id="8082" href="Data.List.Base.html#7222" class="Function Operator">∷ʳ</a> <a id="8085" href="Examples.Amortized.html#7789" class="Bound">e</a>
      <a id="8093" href="Relation.Binary.PropositionalEquality.Core.html#3033" class="Function">≡˘⟨</a> <a id="8097" href="Data.List.Properties.html#5485" class="Function">List.++-assoc</a> <a id="8111" href="Examples.Amortized.html#7785" class="Bound">fl</a> <a id="8114" class="Symbol">(</a><a id="8115" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="8123" href="Examples.Amortized.html#7782" class="Bound">bl</a><a id="8125" class="Symbol">)</a> <a id="8127" href="Data.List.Base.html#5228" class="Function Operator">[</a> <a id="8129" href="Examples.Amortized.html#7789" class="Bound">e</a> <a id="8131" href="Data.List.Base.html#5228" class="Function Operator">]</a> <a id="8133" href="Relation.Binary.PropositionalEquality.Core.html#3033" class="Function">⟩</a>
        <a id="8143" class="Symbol">(</a><a id="8144" href="Examples.Amortized.html#7785" class="Bound">fl</a> <a id="8147" href="Data.List.Base.html#1938" class="Function Operator">++</a> <a id="8150" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="8158" href="Examples.Amortized.html#7782" class="Bound">bl</a><a id="8160" class="Symbol">)</a> <a id="8162" href="Data.List.Base.html#7222" class="Function Operator">∷ʳ</a> <a id="8165" href="Examples.Amortized.html#7789" class="Bound">e</a>
      <a id="8173" href="Relation.Binary.PropositionalEquality.Core.html#3128" class="Function Operator">∎</a><a id="8174" class="Symbol">)</a>
      <a id="8182" class="Symbol">(</a><a id="8183" href="Examples.Amortized.html#7529" class="Function">batched-queue≈SPEC/list-queue</a> <a id="8213" class="Symbol">(</a><a id="8214" href="Examples.Amortized.html#7789" class="Bound">e</a> <a id="8216" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8218" href="Examples.Amortized.html#7782" class="Bound">bl</a><a id="8220" class="Symbol">)</a> <a id="8222" href="Examples.Amortized.html#7785" class="Bound">fl</a><a id="8224" class="Symbol">)</a>
  <a id="8228" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="8240" class="Symbol">(</a><a id="8241" href="Examples.Amortized.html#7529" class="Function">batched-queue≈SPEC/list-queue</a> <a id="8271" href="Examples.Amortized.html#8271" class="Bound">bl</a> <a id="8274" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="8276" class="Symbol">)</a> <a id="8278" class="Keyword">with</a> <a id="8283" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="8291" href="Examples.Amortized.html#8271" class="Bound">bl</a> <a id="8294" class="Symbol">|</a> <a id="8296" href="Data.List.Properties.html#38104" class="Function">List.reverse-injective</a> <a id="8319" class="Symbol">{</a><a id="8320" class="Argument">xs</a> <a id="8323" class="Symbol">=</a> <a id="8325" href="Examples.Amortized.html#8271" class="Bound">bl</a><a id="8327" class="Symbol">}</a> <a id="8329" class="Symbol">{</a><a id="8330" class="Argument">ys</a> <a id="8333" class="Symbol">=</a> <a id="8335" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="8337" class="Symbol">}</a>
  <a id="8341" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="8353" class="Symbol">(</a><a id="8354" href="Examples.Amortized.html#7529" class="Function">batched-queue≈SPEC/list-queue</a> <a id="8384" href="Examples.Amortized.html#8384" class="Bound">bl</a> <a id="8387" class="InductiveConstructor">[]</a><a id="8389" class="Symbol">)</a> <a id="8391" class="Symbol">|</a> <a id="8393" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="8396" class="Symbol">|</a> <a id="8398" href="Examples.Amortized.html#8398" class="Bound">h</a> <a id="8400" class="Keyword">with</a> <a id="8405" href="Examples.Amortized.html#8398" class="Bound">h</a> <a id="8407" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="8414" class="Symbol">...</a> <a id="8418" class="Symbol">|</a> <a id="8420" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="8425" class="Symbol">=</a> <a id="8427" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="8432" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="8434" href="Examples.Amortized.html#7529" class="Function">batched-queue≈SPEC/list-queue</a> <a id="8464" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="8467" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="8472" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="8484" class="Symbol">(</a><a id="8485" href="Examples.Amortized.html#7529" class="Function">batched-queue≈SPEC/list-queue</a> <a id="8515" href="Examples.Amortized.html#8515" class="Bound">bl</a> <a id="8518" class="InductiveConstructor">[]</a><a id="8520" class="Symbol">)</a> <a id="8522" class="Symbol">|</a> <a id="8524" href="Examples.Amortized.html#8524" class="Bound">e</a> <a id="8526" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8528" href="Examples.Amortized.html#8528" class="Bound">fl</a> <a id="8531" class="Symbol">|</a> <a id="8533" class="Symbol">_</a> <a id="8535" class="Symbol">=</a>
    <a id="8541" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="8546" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a>
    <a id="8552" href="Examples.Amortized.html#6220" class="Function">≈-cong</a> <a id="8559" class="Symbol">(</a><a id="8560" href="Data.List.Base.html#5067" class="Function">length</a> <a id="8567" href="Examples.Amortized.html#8515" class="Bound">bl</a><a id="8569" class="Symbol">)</a>
      <a id="8577" class="Symbol">(</a> <a id="8579" href="Relation.Binary.PropositionalEquality.Core.html#1803" class="Function">Eq.subst</a>
          <a id="8598" class="Symbol">(λ</a> <a id="8601" href="Examples.Amortized.html#8601" class="Bound">l</a> <a id="8603" class="Symbol">→</a> <a id="8605" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="8619" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="8622" href="Examples.Amortized.html#8528" class="Bound">fl</a> <a id="8625" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="8627" href="Examples.Amortized.html#4422" class="Function">SPEC/list-queue</a> <a id="8643" href="Examples.Amortized.html#8601" class="Bound">l</a><a id="8644" class="Symbol">)</a>
          <a id="8656" class="Symbol">(</a><a id="8657" href="Data.List.Properties.html#5673" class="Function">List.++-identityʳ</a> <a id="8675" href="Examples.Amortized.html#8528" class="Bound">fl</a><a id="8677" class="Symbol">)</a>
          <a id="8689" class="Symbol">(</a><a id="8690" href="Examples.Amortized.html#7529" class="Function">batched-queue≈SPEC/list-queue</a> <a id="8720" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="8723" href="Examples.Amortized.html#8528" class="Bound">fl</a><a id="8725" class="Symbol">)</a>
      <a id="8733" class="Symbol">)</a>
  <a id="8737" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="8749" class="Symbol">(</a><a id="8750" href="Examples.Amortized.html#7529" class="Function">batched-queue≈SPEC/list-queue</a> <a id="8780" href="Examples.Amortized.html#8780" class="Bound">bl</a> <a id="8783" class="Symbol">(</a><a id="8784" href="Examples.Amortized.html#8784" class="Bound">e</a> <a id="8786" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8788" href="Examples.Amortized.html#8788" class="Bound">fl</a><a id="8790" class="Symbol">))</a> <a id="8793" class="Symbol">=</a>
    <a id="8799" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="8804" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="8806" href="Examples.Amortized.html#7529" class="Function">batched-queue≈SPEC/list-queue</a> <a id="8836" href="Examples.Amortized.html#8780" class="Bound">bl</a> <a id="8839" href="Examples.Amortized.html#8788" class="Bound">fl</a>

  <a id="8845" class="Comment">-- {-# TERMINATING #-}</a>
  <a id="8870" class="Comment">-- fake-queue : cmp (queue (F unit))</a>
  <a id="8909" class="Comment">-- Queue.quit fake-queue = ret triv</a>
  <a id="8947" class="Comment">-- Queue.enqueue fake-queue e = fake-queue</a>
  <a id="8992" class="Comment">-- Queue.dequeue fake-queue = nothing , fake-queue</a>

  <a id="9046" class="Comment">-- issue : (c₁ c₂ : ℂ) → step (queue (F unit)) c₁ fake-queue ≈ step (queue (F unit)) c₂ fake-queue</a>
  <a id="9147" class="Comment">-- _≈_.quit (issue c₁ c₂) = {!   !}</a>
  <a id="9185" class="Comment">-- _≈_.enqueue (issue c₁ c₂) e = issue c₁ c₂</a>
  <a id="9232" class="Comment">-- _≈_.dequeue (issue c₁ c₂) = refl , issue c₁ c₂</a>


  <a id="9286" class="Symbol">{-#</a> <a id="9290" class="Keyword">TERMINATING</a> <a id="9302" class="Symbol">#-}</a>
  <a id="Queue.◯[list-queue≈batched-queue]"></a><a id="9308" href="Examples.Amortized.html#9308" class="Function">◯[list-queue≈batched-queue]</a> <a id="9336" class="Symbol">:</a> <a id="9338" class="Symbol">(</a><a id="9339" href="Examples.Amortized.html#9339" class="Bound">bl</a> <a id="9342" href="Examples.Amortized.html#9342" class="Bound">fl</a> <a id="9345" class="Symbol">:</a> <a id="9347" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="9351" class="Symbol">(</a><a id="9352" href="Calf.Types.List.html#202" class="Function">list</a> <a id="9357" href="Examples.Amortized.html#3355" class="Function">E</a><a id="9358" class="Symbol">))</a> <a id="9361" class="Symbol">→</a> <a id="9363" href="Calf.PhaseDistinction.html#397" class="Function">◯</a> <a id="9365" class="Symbol">(</a><a id="9366" href="Examples.Amortized.html#4089" class="Function">list-queue</a> <a id="9377" class="Symbol">(</a><a id="9378" href="Examples.Amortized.html#9342" class="Bound">fl</a> <a id="9381" href="Data.List.Base.html#1938" class="Function Operator">++</a> <a id="9384" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="9392" href="Examples.Amortized.html#9339" class="Bound">bl</a><a id="9394" class="Symbol">)</a> <a id="9396" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="9398" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="9412" href="Examples.Amortized.html#9339" class="Bound">bl</a> <a id="9415" href="Examples.Amortized.html#9342" class="Bound">fl</a><a id="9417" class="Symbol">)</a>
  <a id="9421" href="Examples.Amortized.html#5903" class="Field">_≈_.quit</a> <a id="9430" class="Symbol">(</a><a id="9431" href="Examples.Amortized.html#9308" class="Function">◯[list-queue≈batched-queue]</a> <a id="9459" href="Examples.Amortized.html#9459" class="Bound">bl</a> <a id="9462" href="Examples.Amortized.html#9462" class="Bound">fl</a> <a id="9465" href="Examples.Amortized.html#9465" class="Bound">u</a><a id="9466" class="Symbol">)</a> <a id="9468" class="Symbol">=</a>
    <a id="9474" href="Relation.Binary.PropositionalEquality.Core.html#1707" class="Function">Eq.sym</a> <a id="9481" class="Symbol">(</a><a id="9482" href="Calf.Step.html#1260" class="Function">step/ext</a> <a id="9491" class="Symbol">(</a><a id="9492" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="9494" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="9498" class="Symbol">)</a> <a id="9500" class="Symbol">(</a><a id="9501" href="Calf.Metalanguage.html#554" class="Function">ret</a> <a id="9505" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a><a id="9509" class="Symbol">)</a> <a id="9511" class="Symbol">(</a><a id="9512" href="Data.List.Base.html#5067" class="Function">length</a> <a id="9519" href="Examples.Amortized.html#9459" class="Bound">bl</a><a id="9521" class="Symbol">)</a> <a id="9523" href="Examples.Amortized.html#9465" class="Bound">u</a><a id="9524" class="Symbol">)</a>
  <a id="9528" href="Examples.Amortized.html#5970" class="Field">_≈_.enqueue</a> <a id="9540" class="Symbol">(</a><a id="9541" href="Examples.Amortized.html#9308" class="Function">◯[list-queue≈batched-queue]</a> <a id="9569" href="Examples.Amortized.html#9569" class="Bound">bl</a> <a id="9572" href="Examples.Amortized.html#9572" class="Bound">fl</a> <a id="9575" href="Examples.Amortized.html#9575" class="Bound">u</a><a id="9576" class="Symbol">)</a> <a id="9578" href="Examples.Amortized.html#9578" class="Bound">e</a> <a id="9580" class="Symbol">=</a>
    <a id="9586" href="Relation.Binary.PropositionalEquality.Core.html#1803" class="Function">Eq.subst</a>
      <a id="9601" class="Symbol">(</a><a id="9602" href="Examples.Amortized.html#5831" class="Record Operator">_≈</a> <a id="9605" href="Examples.Amortized.html#3511" class="Field">Queue.enqueue</a> <a id="9619" class="Symbol">(</a><a id="9620" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="9634" href="Examples.Amortized.html#9569" class="Bound">bl</a> <a id="9637" href="Examples.Amortized.html#9572" class="Bound">fl</a><a id="9639" class="Symbol">)</a> <a id="9641" href="Examples.Amortized.html#9578" class="Bound">e</a><a id="9642" class="Symbol">)</a>
      <a id="9650" class="Symbol">(</a><a id="9651" href="Relation.Binary.PropositionalEquality.Core.html#1707" class="Function">Eq.sym</a> <a id="9658" class="Symbol">(</a><a id="9659" href="Calf.Step.html#1260" class="Function">step/ext</a> <a id="9668" class="Symbol">(</a><a id="9669" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="9675" class="Symbol">(</a><a id="9676" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="9678" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="9682" class="Symbol">))</a> <a id="9685" class="Symbol">(</a><a id="9686" href="Examples.Amortized.html#4089" class="Function">list-queue</a> <a id="9697" class="Symbol">_)</a> <a id="9700" class="Symbol">(</a><a id="9701" href="Data.List.Base.html#5067" class="Function">length</a> <a id="9708" class="Symbol">(</a><a id="9709" href="Examples.Amortized.html#9572" class="Bound">fl</a> <a id="9712" href="Data.List.Base.html#1938" class="Function Operator">++</a> <a id="9715" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="9723" href="Examples.Amortized.html#9569" class="Bound">bl</a><a id="9725" class="Symbol">))</a> <a id="9728" href="Examples.Amortized.html#9575" class="Bound">u</a><a id="9729" class="Symbol">))</a>
      <a id="9738" class="Symbol">(</a><a id="9739" href="Relation.Binary.PropositionalEquality.Core.html#1803" class="Function">Eq.subst</a>
        <a id="9756" class="Symbol">(λ</a> <a id="9759" href="Examples.Amortized.html#9759" class="Bound">l</a> <a id="9761" class="Symbol">→</a> <a id="9763" href="Examples.Amortized.html#4089" class="Function">list-queue</a> <a id="9774" href="Examples.Amortized.html#9759" class="Bound">l</a> <a id="9776" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="9778" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="9792" class="Symbol">(</a><a id="9793" href="Examples.Amortized.html#9578" class="Bound">e</a> <a id="9795" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9797" href="Examples.Amortized.html#9569" class="Bound">bl</a><a id="9799" class="Symbol">)</a> <a id="9801" href="Examples.Amortized.html#9572" class="Bound">fl</a><a id="9803" class="Symbol">)</a>
        <a id="9813" class="Symbol">{</a><a id="9814" class="Argument">x</a> <a id="9816" class="Symbol">=</a> <a id="9818" href="Examples.Amortized.html#9572" class="Bound">fl</a> <a id="9821" href="Data.List.Base.html#1938" class="Function Operator">++</a> <a id="9824" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="9832" class="Symbol">(</a><a id="9833" href="Examples.Amortized.html#9578" class="Bound">e</a> <a id="9835" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9837" href="Examples.Amortized.html#9569" class="Bound">bl</a><a id="9839" class="Symbol">)}</a>
        <a id="9850" class="Symbol">(</a><a id="9851" class="Keyword">let</a> <a id="9855" class="Keyword">open</a> <a id="9860" href="Relation.Binary.PropositionalEquality.Core.html#2731" class="Module">≡-Reasoning</a> <a id="9872" class="Keyword">in</a>
        <a id="9883" href="Relation.Binary.PropositionalEquality.Core.html#2829" class="Function Operator">begin</a>
          <a id="9899" href="Examples.Amortized.html#9572" class="Bound">fl</a> <a id="9902" href="Data.List.Base.html#1938" class="Function Operator">++</a> <a id="9905" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="9913" class="Symbol">(</a><a id="9914" href="Examples.Amortized.html#9578" class="Bound">e</a> <a id="9916" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9918" href="Examples.Amortized.html#9569" class="Bound">bl</a><a id="9920" class="Symbol">)</a>
        <a id="9930" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">≡⟨</a> <a id="9933" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="9941" class="Symbol">(</a><a id="9942" href="Examples.Amortized.html#9572" class="Bound">fl</a> <a id="9945" href="Data.List.Base.html#1938" class="Function Operator">++_</a><a id="9948" class="Symbol">)</a> <a id="9950" class="Symbol">(</a><a id="9951" href="Data.List.Properties.html#37329" class="Function">List.unfold-reverse</a> <a id="9971" href="Examples.Amortized.html#9578" class="Bound">e</a> <a id="9973" href="Examples.Amortized.html#9569" class="Bound">bl</a><a id="9975" class="Symbol">)</a> <a id="9977" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">⟩</a>
          <a id="9989" href="Examples.Amortized.html#9572" class="Bound">fl</a> <a id="9992" href="Data.List.Base.html#1938" class="Function Operator">++</a> <a id="9995" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="10003" href="Examples.Amortized.html#9569" class="Bound">bl</a> <a id="10006" href="Data.List.Base.html#7222" class="Function Operator">∷ʳ</a> <a id="10009" href="Examples.Amortized.html#9578" class="Bound">e</a>
        <a id="10019" href="Relation.Binary.PropositionalEquality.Core.html#3033" class="Function">≡˘⟨</a> <a id="10023" href="Data.List.Properties.html#5485" class="Function">List.++-assoc</a> <a id="10037" href="Examples.Amortized.html#9572" class="Bound">fl</a> <a id="10040" class="Symbol">(</a><a id="10041" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="10049" href="Examples.Amortized.html#9569" class="Bound">bl</a><a id="10051" class="Symbol">)</a> <a id="10053" href="Data.List.Base.html#5228" class="Function Operator">[</a> <a id="10055" href="Examples.Amortized.html#9578" class="Bound">e</a> <a id="10057" href="Data.List.Base.html#5228" class="Function Operator">]</a> <a id="10059" href="Relation.Binary.PropositionalEquality.Core.html#3033" class="Function">⟩</a>
          <a id="10071" class="Symbol">(</a><a id="10072" href="Examples.Amortized.html#9572" class="Bound">fl</a> <a id="10075" href="Data.List.Base.html#1938" class="Function Operator">++</a> <a id="10078" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="10086" href="Examples.Amortized.html#9569" class="Bound">bl</a><a id="10088" class="Symbol">)</a> <a id="10090" href="Data.List.Base.html#7222" class="Function Operator">∷ʳ</a> <a id="10093" href="Examples.Amortized.html#9578" class="Bound">e</a>
        <a id="10103" href="Relation.Binary.PropositionalEquality.Core.html#3128" class="Function Operator">∎</a><a id="10104" class="Symbol">)</a>
        <a id="10114" class="Symbol">(</a><a id="10115" href="Examples.Amortized.html#9308" class="Function">◯[list-queue≈batched-queue]</a> <a id="10143" class="Symbol">(</a><a id="10144" href="Examples.Amortized.html#9578" class="Bound">e</a> <a id="10146" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10148" href="Examples.Amortized.html#9569" class="Bound">bl</a><a id="10150" class="Symbol">)</a> <a id="10152" href="Examples.Amortized.html#9572" class="Bound">fl</a> <a id="10155" href="Examples.Amortized.html#9575" class="Bound">u</a><a id="10156" class="Symbol">))</a>
  <a id="10161" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="10173" class="Symbol">(</a><a id="10174" href="Examples.Amortized.html#9308" class="Function">◯[list-queue≈batched-queue]</a> <a id="10202" href="Examples.Amortized.html#10202" class="Bound">bl</a> <a id="10205" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="10208" href="Examples.Amortized.html#10208" class="Bound">u</a><a id="10209" class="Symbol">)</a> <a id="10211" class="Keyword">with</a> <a id="10216" href="Data.List.Base.html#6996" class="Function">reverse</a> <a id="10224" href="Examples.Amortized.html#10202" class="Bound">bl</a> <a id="10227" class="Symbol">|</a> <a id="10229" href="Data.List.Properties.html#38104" class="Function">List.reverse-injective</a> <a id="10252" class="Symbol">{</a><a id="10253" class="Argument">xs</a> <a id="10256" class="Symbol">=</a> <a id="10258" href="Examples.Amortized.html#10202" class="Bound">bl</a><a id="10260" class="Symbol">}</a> <a id="10262" class="Symbol">{</a><a id="10263" class="Argument">ys</a> <a id="10266" class="Symbol">=</a> <a id="10268" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="10270" class="Symbol">}</a>
  <a id="10274" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="10286" class="Symbol">(</a><a id="10287" href="Examples.Amortized.html#9308" class="Function">◯[list-queue≈batched-queue]</a> <a id="10315" href="Examples.Amortized.html#10315" class="Bound">bl</a> <a id="10318" class="InductiveConstructor">[]</a> <a id="10321" href="Examples.Amortized.html#10321" class="Bound">u</a><a id="10322" class="Symbol">)</a> <a id="10324" class="Symbol">|</a> <a id="10326" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="10329" class="Symbol">|</a> <a id="10331" href="Examples.Amortized.html#10331" class="Bound">h</a> <a id="10333" class="Keyword">with</a> <a id="10338" href="Examples.Amortized.html#10331" class="Bound">h</a> <a id="10340" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="10347" class="Symbol">...</a> <a id="10351" class="Symbol">|</a> <a id="10353" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="10358" class="Symbol">=</a> <a id="10360" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="10365" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10367" href="Examples.Amortized.html#9308" class="Function">◯[list-queue≈batched-queue]</a> <a id="10395" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="10398" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="10401" class="Bound">u</a>
  <a id="10405" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="10417" class="Symbol">(</a><a id="10418" href="Examples.Amortized.html#9308" class="Function">◯[list-queue≈batched-queue]</a> <a id="10446" href="Examples.Amortized.html#10446" class="Bound">bl</a> <a id="10449" class="InductiveConstructor">[]</a> <a id="10452" href="Examples.Amortized.html#10452" class="Bound">u</a><a id="10453" class="Symbol">)</a> <a id="10455" class="Symbol">|</a> <a id="10457" href="Examples.Amortized.html#10457" class="Bound">e</a> <a id="10459" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10461" href="Examples.Amortized.html#10461" class="Bound">fl</a> <a id="10464" class="Symbol">|</a> <a id="10466" class="Symbol">_</a> <a id="10468" class="Symbol">=</a>
    <a id="10474" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="10479" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a>
    <a id="10485" href="Relation.Binary.PropositionalEquality.Core.html#1858" class="Function">Eq.subst₂</a>
      <a id="10501" href="Examples.Amortized.html#5831" class="Record Operator">_≈_</a>
      <a id="10511" class="Symbol">(</a><a id="10512" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="10520" href="Examples.Amortized.html#4089" class="Function">list-queue</a> <a id="10531" class="Symbol">(</a><a id="10532" href="Data.List.Properties.html#5673" class="Function">List.++-identityʳ</a> <a id="10550" href="Examples.Amortized.html#10461" class="Bound">fl</a><a id="10552" class="Symbol">))</a>
      <a id="10561" class="Symbol">(</a><a id="10562" href="Relation.Binary.PropositionalEquality.Core.html#1707" class="Function">Eq.sym</a> <a id="10569" class="Symbol">(</a><a id="10570" href="Calf.Step.html#1260" class="Function">step/ext</a> <a id="10579" class="Symbol">(</a><a id="10580" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="10586" class="Symbol">(</a><a id="10587" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="10589" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="10593" class="Symbol">))</a> <a id="10596" class="Symbol">(</a><a id="10597" href="Examples.Amortized.html#4847" class="Function">batched-queue</a> <a id="10611" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="10614" href="Examples.Amortized.html#10461" class="Bound">fl</a><a id="10616" class="Symbol">)</a> <a id="10618" class="Symbol">(</a><a id="10619" href="Examples.Amortized.html#4764" class="Function">Φ</a> <a id="10621" href="Examples.Amortized.html#10446" class="Bound">bl</a> <a id="10624" href="Examples.Amortized.html#10461" class="Bound">fl</a><a id="10626" class="Symbol">)</a> <a id="10628" href="Examples.Amortized.html#10452" class="Bound">u</a><a id="10629" class="Symbol">))</a>
      <a id="10638" class="Symbol">(</a><a id="10639" href="Examples.Amortized.html#9308" class="Function">◯[list-queue≈batched-queue]</a> <a id="10667" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="10670" href="Examples.Amortized.html#10461" class="Bound">fl</a> <a id="10673" href="Examples.Amortized.html#10452" class="Bound">u</a><a id="10674" class="Symbol">)</a>
  <a id="10678" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="10690" class="Symbol">(</a><a id="10691" href="Examples.Amortized.html#9308" class="Function">◯[list-queue≈batched-queue]</a> <a id="10719" href="Examples.Amortized.html#10719" class="Bound">bl</a> <a id="10722" class="Symbol">(</a><a id="10723" href="Examples.Amortized.html#10723" class="Bound">e</a> <a id="10725" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10727" href="Examples.Amortized.html#10727" class="Bound">fl</a><a id="10729" class="Symbol">)</a> <a id="10731" href="Examples.Amortized.html#10731" class="Bound">u</a><a id="10732" class="Symbol">)</a> <a id="10734" class="Symbol">=</a>
    <a id="10740" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="10745" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10747" href="Examples.Amortized.html#9308" class="Function">◯[list-queue≈batched-queue]</a> <a id="10775" href="Examples.Amortized.html#10719" class="Bound">bl</a> <a id="10778" href="Examples.Amortized.html#10727" class="Bound">fl</a> <a id="10781" href="Examples.Amortized.html#10731" class="Bound">u</a>


  <a id="10787" class="Keyword">postulate</a>
    <a id="Queue.queue-program"></a><a id="10801" href="Examples.Amortized.html#10801" class="Postulate">queue-program</a> <a id="10815" class="Symbol">:</a> <a id="10817" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="10820" href="Calf.Metalanguage.html#248" class="Function">pos</a> <a id="10824" class="Symbol">→</a> <a id="10826" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="10829" href="Calf.Metalanguage.html#248" class="Function">pos</a>
  <a id="10835" class="Keyword">data</a> <a id="Queue.QueueProgram"></a><a id="10840" href="Examples.Amortized.html#10840" class="Datatype">QueueProgram</a> <a id="10853" class="Symbol">(</a><a id="10854" href="Examples.Amortized.html#10854" class="Bound">A</a> <a id="10856" class="Symbol">:</a> <a id="10858" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="10861" href="Calf.Metalanguage.html#248" class="Function">pos</a><a id="10864" class="Symbol">)</a> <a id="10866" class="Symbol">:</a> <a id="10868" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="10872" class="Keyword">where</a>
    <a id="Queue.QueueProgram.return"></a><a id="10882" href="Examples.Amortized.html#10882" class="InductiveConstructor">return</a>  <a id="10890" class="Symbol">:</a> <a id="10892" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="10896" href="Examples.Amortized.html#10854" class="Bound">A</a> <a id="10898" class="Symbol">→</a> <a id="10900" href="Examples.Amortized.html#10840" class="Datatype">QueueProgram</a> <a id="10913" href="Examples.Amortized.html#10854" class="Bound">A</a>
    <a id="Queue.QueueProgram.enqueue"></a><a id="10919" href="Examples.Amortized.html#10919" class="InductiveConstructor">enqueue</a> <a id="10927" class="Symbol">:</a> <a id="10929" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="10933" href="Examples.Amortized.html#3355" class="Function">E</a> <a id="10935" class="Symbol">→</a> <a id="10937" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="10941" class="Symbol">(</a><a id="10942" href="Examples.Amortized.html#10801" class="Postulate">queue-program</a> <a id="10956" href="Examples.Amortized.html#10854" class="Bound">A</a><a id="10957" class="Symbol">)</a> <a id="10959" class="Symbol">→</a> <a id="10961" href="Examples.Amortized.html#10840" class="Datatype">QueueProgram</a> <a id="10974" href="Examples.Amortized.html#10854" class="Bound">A</a>
    <a id="Queue.QueueProgram.dequeue"></a><a id="10980" href="Examples.Amortized.html#10980" class="InductiveConstructor">dequeue</a> <a id="10988" class="Symbol">:</a> <a id="10990" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="10994" class="Symbol">(</a><a id="10995" href="Calf.Metalanguage.html#333" class="Function">U</a> <a id="10997" class="Symbol">(</a><a id="10998" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="11000" class="Symbol">(</a><a id="11001" href="Calf.Types.Maybe.html#177" class="Function">maybe</a> <a id="11007" href="Examples.Amortized.html#3355" class="Function">E</a><a id="11008" class="Symbol">)</a> <a id="11010" class="Symbol">λ</a> <a id="11012" href="Examples.Amortized.html#11012" class="Bound">_</a> <a id="11014" class="Symbol">→</a> <a id="11016" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="11018" class="Symbol">(</a><a id="11019" href="Examples.Amortized.html#10801" class="Postulate">queue-program</a> <a id="11033" href="Examples.Amortized.html#10854" class="Bound">A</a><a id="11034" class="Symbol">)))</a> <a id="11038" class="Symbol">→</a> <a id="11040" href="Examples.Amortized.html#10840" class="Datatype">QueueProgram</a> <a id="11053" href="Examples.Amortized.html#10854" class="Bound">A</a>
  <a id="11057" class="Keyword">postulate</a>
    <a id="Queue.queue-program/decode"></a><a id="11071" href="Examples.Amortized.html#11071" class="Postulate">queue-program/decode</a> <a id="11092" class="Symbol">:</a> <a id="11094" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="11098" class="Symbol">(</a><a id="11099" href="Examples.Amortized.html#10801" class="Postulate">queue-program</a> <a id="11113" href="Examples.Amortized.html#768" class="Generalizable">A</a><a id="11114" class="Symbol">)</a> <a id="11116" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="11118" href="Examples.Amortized.html#10840" class="Datatype">QueueProgram</a> <a id="11131" href="Examples.Amortized.html#768" class="Generalizable">A</a>
    <a id="11137" class="Symbol">{-#</a> <a id="11141" class="Keyword">REWRITE</a> <a id="11149" href="Examples.Amortized.html#11071" class="Postulate">queue-program/decode</a> <a id="11170" class="Symbol">#-}</a>

  <a id="11177" class="Symbol">{-#</a> <a id="11181" class="Keyword">TERMINATING</a> <a id="11193" class="Symbol">#-}</a>
  <a id="Queue.ψ"></a><a id="11199" href="Examples.Amortized.html#11199" class="Function">ψ</a> <a id="11201" class="Symbol">:</a> <a id="11203" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="11207" class="Symbol">(</a><a id="11208" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="11210" class="Symbol">(</a><a id="11211" href="Examples.Amortized.html#10801" class="Postulate">queue-program</a> <a id="11225" href="Examples.Amortized.html#768" class="Generalizable">A</a><a id="11226" class="Symbol">)</a> <a id="11228" class="Symbol">λ</a> <a id="11230" href="Examples.Amortized.html#11230" class="Symbol">_</a> <a id="11232" class="Symbol">→</a> <a id="11234" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="11236" class="Symbol">(</a><a id="11237" href="Calf.Metalanguage.html#333" class="Function">U</a> <a id="11239" class="Symbol">(</a><a id="11240" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="11246" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="11247" class="Symbol">))</a> <a id="11250" class="Symbol">λ</a> <a id="11252" href="Examples.Amortized.html#11252" class="Symbol">_</a> <a id="11254" class="Symbol">→</a> <a id="11256" href="Examples.Amortized.html#768" class="Generalizable">A</a> <a id="11258" href="Examples.Amortized.html#801" class="Function Operator">⋉</a> <a id="11260" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="11261" class="Symbol">)</a>
  <a id="11265" href="Examples.Amortized.html#11199" class="Function">ψ</a> <a id="11267" class="Symbol">{</a><a id="11268" href="Examples.Amortized.html#11268" class="Bound">A</a><a id="11269" class="Symbol">}</a> <a id="11271" class="Symbol">{</a><a id="11272" href="Examples.Amortized.html#11272" class="Bound">X</a><a id="11273" class="Symbol">}</a> <a id="11275" class="Symbol">(</a><a id="11276" href="Examples.Amortized.html#10882" class="InductiveConstructor">return</a> <a id="11283" href="Examples.Amortized.html#11283" class="Bound">a</a>   <a id="11287" class="Symbol">)</a> <a id="11289" href="Examples.Amortized.html#11289" class="Bound">q</a> <a id="11291" class="Symbol">=</a> <a id="11293" href="Examples.Amortized.html#11283" class="Bound">a</a> <a id="11295" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11297" href="Examples.Amortized.html#3489" class="Field">Queue.quit</a> <a id="11308" href="Examples.Amortized.html#11289" class="Bound">q</a>
  <a id="11312" href="Examples.Amortized.html#11199" class="Function">ψ</a> <a id="11314" class="Symbol">{</a><a id="11315" href="Examples.Amortized.html#11315" class="Bound">A</a><a id="11316" class="Symbol">}</a> <a id="11318" class="Symbol">{</a><a id="11319" href="Examples.Amortized.html#11319" class="Bound">X</a><a id="11320" class="Symbol">}</a> <a id="11322" class="Symbol">(</a><a id="11323" href="Examples.Amortized.html#10919" class="InductiveConstructor">enqueue</a> <a id="11331" href="Examples.Amortized.html#11331" class="Bound">e</a> <a id="11333" href="Examples.Amortized.html#11333" class="Bound">p</a><a id="11334" class="Symbol">)</a> <a id="11336" href="Examples.Amortized.html#11336" class="Bound">q</a> <a id="11338" class="Symbol">=</a> <a id="11340" href="Examples.Amortized.html#11199" class="Function">ψ</a> <a id="11342" href="Examples.Amortized.html#11333" class="Bound">p</a> <a id="11344" class="Symbol">(</a><a id="11345" href="Examples.Amortized.html#3511" class="Field">Queue.enqueue</a> <a id="11359" href="Examples.Amortized.html#11336" class="Bound">q</a> <a id="11361" href="Examples.Amortized.html#11331" class="Bound">e</a><a id="11362" class="Symbol">)</a>
  <a id="11366" href="Examples.Amortized.html#11199" class="Function">ψ</a> <a id="11368" class="Symbol">{</a><a id="11369" href="Examples.Amortized.html#11369" class="Bound">A</a><a id="11370" class="Symbol">}</a> <a id="11372" class="Symbol">{</a><a id="11373" href="Examples.Amortized.html#11373" class="Bound">X</a><a id="11374" class="Symbol">}</a> <a id="11376" class="Symbol">(</a><a id="11377" href="Examples.Amortized.html#10980" class="InductiveConstructor">dequeue</a> <a id="11385" href="Examples.Amortized.html#11385" class="Bound">k</a>  <a id="11388" class="Symbol">)</a> <a id="11390" href="Examples.Amortized.html#11390" class="Bound">q</a> <a id="11392" class="Symbol">=</a>
    <a id="11398" href="Calf.Metalanguage.html#588" class="Function">bind</a> <a id="11403" class="Symbol">(</a><a id="11404" href="Examples.Amortized.html#11369" class="Bound">A</a> <a id="11406" href="Examples.Amortized.html#801" class="Function Operator">⋉</a> <a id="11408" href="Examples.Amortized.html#11373" class="Bound">X</a><a id="11409" class="Symbol">)</a> <a id="11411" class="Symbol">(</a><a id="11412" href="Examples.Amortized.html#11385" class="Bound">k</a> <a id="11414" class="Symbol">(</a><a id="11415" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="11421" class="Symbol">(</a><a id="11422" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="11436" href="Examples.Amortized.html#11390" class="Bound">q</a><a id="11437" class="Symbol">)))</a> <a id="11441" class="Symbol">λ</a> <a id="11443" href="Examples.Amortized.html#11443" class="Bound">p</a> <a id="11445" class="Symbol">→</a>
    <a id="11451" href="Examples.Amortized.html#11199" class="Function">ψ</a> <a id="11453" href="Examples.Amortized.html#11443" class="Bound">p</a> <a id="11455" class="Symbol">(</a><a id="11456" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="11462" class="Symbol">(</a><a id="11463" href="Examples.Amortized.html#3551" class="Field">Queue.dequeue</a> <a id="11477" href="Examples.Amortized.html#11390" class="Bound">q</a><a id="11478" class="Symbol">))</a>

  <a id="Queue._≈&#39;_"></a><a id="11484" href="Examples.Amortized.html#11484" class="Function Operator">_≈&#39;_</a> <a id="11489" class="Symbol">:</a> <a id="11491" class="Symbol">(</a><a id="11492" href="Examples.Amortized.html#11492" class="Bound">q₁</a> <a id="11495" href="Examples.Amortized.html#11495" class="Bound">q₂</a> <a id="11498" class="Symbol">:</a> <a id="11500" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="11504" class="Symbol">(</a><a id="11505" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="11511" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="11512" class="Symbol">))</a> <a id="11515" class="Symbol">→</a> <a id="11517" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="11523" href="Examples.Amortized.html#11523" class="Bound">q₁</a> <a id="11526" href="Examples.Amortized.html#11484" class="Function Operator">≈&#39;</a> <a id="11529" href="Examples.Amortized.html#11529" class="Bound">q₂</a> <a id="11532" class="Symbol">=</a> <a id="11534" class="Symbol">(</a><a id="11535" href="Examples.Amortized.html#11535" class="Bound">A</a> <a id="11537" class="Symbol">:</a> <a id="11539" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="11542" href="Calf.Metalanguage.html#248" class="Function">pos</a><a id="11545" class="Symbol">)</a> <a id="11547" class="Symbol">→</a> <a id="11549" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="11553" class="Symbol">(</a><a id="11554" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="11556" class="Symbol">(</a><a id="11557" href="Examples.Amortized.html#10801" class="Postulate">queue-program</a> <a id="11571" href="Examples.Amortized.html#11535" class="Bound">A</a><a id="11572" class="Symbol">)</a> <a id="11574" class="Symbol">λ</a> <a id="11576" href="Examples.Amortized.html#11576" class="Bound">p</a> <a id="11578" class="Symbol">→</a> <a id="11580" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="11585" class="Symbol">(</a><a id="11586" href="Examples.Amortized.html#11199" class="Function">ψ</a> <a id="11588" href="Examples.Amortized.html#11576" class="Bound">p</a> <a id="11590" href="Examples.Amortized.html#11523" class="Bound">q₁</a> <a id="11593" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="11595" href="Examples.Amortized.html#11199" class="Function">ψ</a> <a id="11597" href="Examples.Amortized.html#11576" class="Bound">p</a> <a id="11599" href="Examples.Amortized.html#11529" class="Bound">q₂</a><a id="11601" class="Symbol">))</a>

  <a id="11607" class="Symbol">{-#</a> <a id="11611" class="Keyword">TERMINATING</a> <a id="11623" class="Symbol">#-}</a>
  <a id="Queue.classic-amortization"></a><a id="11629" href="Examples.Amortized.html#11629" class="Function">classic-amortization</a> <a id="11650" class="Symbol">:</a> <a id="11652" class="Symbol">{</a><a id="11653" href="Examples.Amortized.html#11653" class="Bound">q₁</a> <a id="11656" href="Examples.Amortized.html#11656" class="Bound">q₂</a> <a id="11659" class="Symbol">:</a> <a id="11661" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="11665" class="Symbol">(</a><a id="11666" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="11672" href="Examples.Amortized.html#785" class="Generalizable">X</a><a id="11673" class="Symbol">)}</a> <a id="11676" class="Symbol">→</a> <a id="11678" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="11682" class="Symbol">(</a><a id="11683" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="11688" class="Symbol">(</a><a id="11689" href="Examples.Amortized.html#11653" class="Bound">q₁</a> <a id="11692" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="11694" href="Examples.Amortized.html#11656" class="Bound">q₂</a><a id="11696" class="Symbol">)</a> <a id="11698" href="Examples.Amortized.html#877" class="Function Operator">⇔</a> <a id="11700" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="11705" class="Symbol">(</a><a id="11706" href="Examples.Amortized.html#11653" class="Bound">q₁</a> <a id="11709" href="Examples.Amortized.html#11484" class="Function Operator">≈&#39;</a> <a id="11712" href="Examples.Amortized.html#11656" class="Bound">q₂</a><a id="11714" class="Symbol">))</a>
  <a id="11719" href="Examples.Amortized.html#11629" class="Function">classic-amortization</a> <a id="11740" class="Symbol">{</a><a id="11741" href="Examples.Amortized.html#11741" class="Bound">X</a><a id="11742" class="Symbol">}</a> <a id="11744" class="Symbol">=</a> <a id="11746" href="Examples.Amortized.html#11781" class="Function">forward</a> <a id="11754" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11756" href="Examples.Amortized.html#12154" class="Function">backward</a>
    <a id="11769" class="Keyword">where</a>
      <a id="11781" href="Examples.Amortized.html#11781" class="Function">forward</a> <a id="11789" class="Symbol">:</a> <a id="11791" class="Symbol">{</a><a id="11792" href="Examples.Amortized.html#11792" class="Bound">q₁</a> <a id="11795" href="Examples.Amortized.html#11795" class="Bound">q₂</a> <a id="11798" class="Symbol">:</a> <a id="11800" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="11804" class="Symbol">(</a><a id="11805" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="11811" href="Examples.Amortized.html#11741" class="Bound">X</a><a id="11812" class="Symbol">)}</a> <a id="11815" class="Symbol">→</a> <a id="11817" href="Examples.Amortized.html#11792" class="Bound">q₁</a> <a id="11820" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="11822" href="Examples.Amortized.html#11795" class="Bound">q₂</a> <a id="11825" class="Symbol">→</a> <a id="11827" href="Examples.Amortized.html#11792" class="Bound">q₁</a> <a id="11830" href="Examples.Amortized.html#11484" class="Function Operator">≈&#39;</a> <a id="11833" href="Examples.Amortized.html#11795" class="Bound">q₂</a>
      <a id="11842" href="Examples.Amortized.html#11781" class="Function">forward</a> <a id="11850" href="Examples.Amortized.html#11850" class="Bound">h</a> <a id="11852" href="Examples.Amortized.html#11852" class="Bound">A</a> <a id="11854" class="Symbol">(</a><a id="11855" href="Examples.Amortized.html#10882" class="InductiveConstructor">return</a> <a id="11862" href="Examples.Amortized.html#11862" class="Bound">a</a>   <a id="11866" class="Symbol">)</a> <a id="11868" class="Symbol">=</a> <a id="11870" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="11878" class="Symbol">(</a><a id="11879" href="Examples.Amortized.html#11862" class="Bound">a</a> <a id="11881" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,_</a><a id="11883" class="Symbol">)</a> <a id="11885" class="Symbol">(</a><a id="11886" href="Examples.Amortized.html#5903" class="Field">_≈_.quit</a> <a id="11895" href="Examples.Amortized.html#11850" class="Bound">h</a><a id="11896" class="Symbol">)</a>
      <a id="11904" href="Examples.Amortized.html#11781" class="Function">forward</a> <a id="11912" href="Examples.Amortized.html#11912" class="Bound">h</a> <a id="11914" href="Examples.Amortized.html#11914" class="Bound">A</a> <a id="11916" class="Symbol">(</a><a id="11917" href="Examples.Amortized.html#10919" class="InductiveConstructor">enqueue</a> <a id="11925" href="Examples.Amortized.html#11925" class="Bound">e</a> <a id="11927" href="Examples.Amortized.html#11927" class="Bound">p</a><a id="11928" class="Symbol">)</a> <a id="11930" class="Symbol">=</a> <a id="11932" href="Examples.Amortized.html#11781" class="Function">forward</a> <a id="11940" class="Symbol">(</a><a id="11941" href="Examples.Amortized.html#5970" class="Field">_≈_.enqueue</a> <a id="11953" href="Examples.Amortized.html#11912" class="Bound">h</a> <a id="11955" href="Examples.Amortized.html#11925" class="Bound">e</a><a id="11956" class="Symbol">)</a> <a id="11958" href="Examples.Amortized.html#11914" class="Bound">A</a> <a id="11960" href="Examples.Amortized.html#11927" class="Bound">p</a>
      <a id="11968" href="Examples.Amortized.html#11781" class="Function">forward</a> <a id="11976" href="Examples.Amortized.html#11976" class="Bound">h</a> <a id="11978" href="Examples.Amortized.html#11978" class="Bound">A</a> <a id="11980" class="Symbol">(</a><a id="11981" href="Examples.Amortized.html#10980" class="InductiveConstructor">dequeue</a> <a id="11989" href="Examples.Amortized.html#11989" class="Bound">k</a>  <a id="11992" class="Symbol">)</a> <a id="11994" class="Symbol">=</a>
        <a id="12004" href="Relation.Binary.PropositionalEquality.Core.html#1390" class="Function">Eq.cong₂</a>
          <a id="12023" class="Symbol">(λ</a> <a id="12026" href="Examples.Amortized.html#12026" class="Bound">e₁</a> <a id="12029" href="Examples.Amortized.html#12029" class="Bound">e₂</a> <a id="12032" class="Symbol">→</a> <a id="12034" href="Calf.Metalanguage.html#588" class="Function">bind</a> <a id="12039" class="Symbol">(</a><a id="12040" href="Examples.Amortized.html#11978" class="Bound">A</a> <a id="12042" href="Examples.Amortized.html#801" class="Function Operator">⋉</a> <a id="12044" href="Examples.Amortized.html#11741" class="Bound">X</a><a id="12045" class="Symbol">)</a> <a id="12047" class="Symbol">(</a><a id="12048" href="Examples.Amortized.html#11989" class="Bound">k</a> <a id="12050" href="Examples.Amortized.html#12026" class="Bound">e₁</a><a id="12052" class="Symbol">)</a> <a id="12054" href="Examples.Amortized.html#12029" class="Bound">e₂</a><a id="12056" class="Symbol">)</a>
          <a id="12068" class="Symbol">(</a><a id="12069" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="12075" class="Symbol">(</a><a id="12076" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="12088" href="Examples.Amortized.html#11976" class="Bound">h</a><a id="12089" class="Symbol">))</a>
          <a id="12102" class="Symbol">(</a><a id="12103" href="Calf.Prelude.html#171" class="Function">funext</a> <a id="12110" class="Symbol">(</a><a id="12111" href="Examples.Amortized.html#11781" class="Function">forward</a> <a id="12119" class="Symbol">(</a><a id="12120" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="12126" class="Symbol">(</a><a id="12127" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="12139" href="Examples.Amortized.html#11976" class="Bound">h</a><a id="12140" class="Symbol">))</a> <a id="12143" href="Examples.Amortized.html#11978" class="Bound">A</a><a id="12144" class="Symbol">))</a>

      <a id="12154" href="Examples.Amortized.html#12154" class="Function">backward</a> <a id="12163" class="Symbol">:</a> <a id="12165" class="Symbol">{</a><a id="12166" href="Examples.Amortized.html#12166" class="Bound">q₁</a> <a id="12169" href="Examples.Amortized.html#12169" class="Bound">q₂</a> <a id="12172" class="Symbol">:</a> <a id="12174" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="12178" class="Symbol">(</a><a id="12179" href="Examples.Amortized.html#3393" class="Postulate">queue</a> <a id="12185" href="Examples.Amortized.html#11741" class="Bound">X</a><a id="12186" class="Symbol">)}</a> <a id="12189" class="Symbol">→</a> <a id="12191" href="Examples.Amortized.html#12166" class="Bound">q₁</a> <a id="12194" href="Examples.Amortized.html#11484" class="Function Operator">≈&#39;</a> <a id="12197" href="Examples.Amortized.html#12169" class="Bound">q₂</a> <a id="12200" class="Symbol">→</a> <a id="12202" href="Examples.Amortized.html#12166" class="Bound">q₁</a> <a id="12205" href="Examples.Amortized.html#5831" class="Record Operator">≈</a> <a id="12207" href="Examples.Amortized.html#12169" class="Bound">q₂</a>
      <a id="12216" href="Examples.Amortized.html#5903" class="Field">_≈_.quit</a> <a id="12225" class="Symbol">(</a><a id="12226" href="Examples.Amortized.html#12154" class="Function">backward</a> <a id="12235" href="Examples.Amortized.html#12235" class="Bound">classic</a><a id="12242" class="Symbol">)</a> <a id="12244" class="Symbol">=</a> <a id="12246" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="12254" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="12260" class="Symbol">(</a><a id="12261" href="Examples.Amortized.html#12235" class="Bound">classic</a> <a id="12269" href="Calf.Types.Unit.html#253" class="Postulate">unit</a> <a id="12274" class="Symbol">(</a><a id="12275" href="Examples.Amortized.html#10882" class="InductiveConstructor">return</a> <a id="12282" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a><a id="12286" class="Symbol">))</a>
      <a id="12295" href="Examples.Amortized.html#5970" class="Field">_≈_.enqueue</a> <a id="12307" class="Symbol">(</a><a id="12308" href="Examples.Amortized.html#12154" class="Function">backward</a> <a id="12317" href="Examples.Amortized.html#12317" class="Bound">classic</a><a id="12324" class="Symbol">)</a> <a id="12326" href="Examples.Amortized.html#12326" class="Bound">e</a> <a id="12328" class="Symbol">=</a> <a id="12330" href="Examples.Amortized.html#12154" class="Function">backward</a> <a id="12339" class="Symbol">λ</a> <a id="12341" href="Examples.Amortized.html#12341" class="Bound">A</a> <a id="12343" href="Examples.Amortized.html#12343" class="Bound">p</a> <a id="12345" class="Symbol">→</a> <a id="12347" href="Examples.Amortized.html#12317" class="Bound">classic</a> <a id="12355" href="Examples.Amortized.html#12341" class="Bound">A</a> <a id="12357" class="Symbol">(</a><a id="12358" href="Examples.Amortized.html#10919" class="InductiveConstructor">enqueue</a> <a id="12366" href="Examples.Amortized.html#12326" class="Bound">e</a> <a id="12368" href="Examples.Amortized.html#12343" class="Bound">p</a><a id="12369" class="Symbol">)</a>
      <a id="12377" href="Examples.Amortized.html#6057" class="Field">_≈_.dequeue</a> <a id="12389" class="Symbol">(</a><a id="12390" href="Examples.Amortized.html#12154" class="Function">backward</a> <a id="12399" href="Examples.Amortized.html#12399" class="Bound">classic</a><a id="12406" class="Symbol">)</a> <a id="12408" class="Symbol">=</a>
        <a id="12418" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="12426" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="12432" class="Symbol">(</a><a id="12433" href="Examples.Amortized.html#12399" class="Bound">classic</a> <a id="12441" class="Symbol">(</a><a id="12442" href="Calf.Types.Maybe.html#177" class="Function">maybe</a> <a id="12448" href="Examples.Amortized.html#3355" class="Function">E</a><a id="12449" class="Symbol">)</a> <a id="12451" class="Symbol">(</a><a id="12452" href="Examples.Amortized.html#10980" class="InductiveConstructor">dequeue</a> <a id="12460" class="Symbol">λ</a> <a id="12462" href="Examples.Amortized.html#12462" class="Bound">e</a> <a id="12464" class="Symbol">→</a> <a id="12466" href="Calf.Metalanguage.html#554" class="Function">ret</a> <a id="12470" class="Symbol">(</a><a id="12471" href="Examples.Amortized.html#10882" class="InductiveConstructor">return</a> <a id="12478" href="Examples.Amortized.html#12462" class="Bound">e</a><a id="12479" class="Symbol">)))</a> <a id="12483" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a>
        <a id="12493" href="Examples.Amortized.html#12154" class="Function">backward</a> <a id="12502" class="Symbol">λ</a> <a id="12504" href="Examples.Amortized.html#12504" class="Bound">A</a> <a id="12506" href="Examples.Amortized.html#12506" class="Bound">p</a> <a id="12508" class="Symbol">→</a> <a id="12510" href="Examples.Amortized.html#12399" class="Bound">classic</a> <a id="12518" href="Examples.Amortized.html#12504" class="Bound">A</a> <a id="12520" class="Symbol">(</a><a id="12521" href="Examples.Amortized.html#10980" class="InductiveConstructor">dequeue</a> <a id="12529" class="Symbol">λ</a> <a id="12531" href="Examples.Amortized.html#12531" class="Bound">_</a> <a id="12533" class="Symbol">→</a> <a id="12535" href="Calf.Metalanguage.html#554" class="Function">ret</a> <a id="12539" href="Examples.Amortized.html#12506" class="Bound">p</a><a id="12540" class="Symbol">)</a>


<a id="12544" class="Keyword">module</a> <a id="DynamicArray"></a><a id="12551" href="Examples.Amortized.html#12551" class="Module">DynamicArray</a> <a id="12564" class="Keyword">where</a>
  <a id="12572" class="Keyword">postulate</a>
    <a id="DynamicArray.dynamic-array"></a><a id="12586" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="12600" class="Symbol">:</a> <a id="12602" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="12605" href="Calf.Metalanguage.html#248" class="Function">pos</a> <a id="12609" class="Symbol">→</a> <a id="12611" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="12614" href="Calf.Metalanguage.html#261" class="Function">neg</a>
  <a id="12620" class="Keyword">record</a> <a id="DynamicArray.DynamicArray"></a><a id="12627" href="Examples.Amortized.html#12627" class="Record">DynamicArray</a> <a id="12640" class="Symbol">(</a><a id="12641" href="Examples.Amortized.html#12641" class="Bound">A</a> <a id="12643" class="Symbol">:</a> <a id="12645" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="12648" href="Calf.Metalanguage.html#248" class="Function">pos</a><a id="12651" class="Symbol">)</a> <a id="12653" class="Symbol">:</a> <a id="12655" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12659" class="Keyword">where</a>
    <a id="12669" class="Keyword">coinductive</a>
    <a id="12685" class="Keyword">field</a>
      <a id="DynamicArray.DynamicArray.quit"></a><a id="12697" href="Examples.Amortized.html#12697" class="Field">quit</a>   <a id="12704" class="Symbol">:</a> <a id="12706" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="12710" class="Symbol">(</a><a id="12711" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="12713" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="12717" class="Symbol">)</a>
      <a id="DynamicArray.DynamicArray.append"></a><a id="12725" href="Examples.Amortized.html#12725" class="Field">append</a> <a id="12732" class="Symbol">:</a> <a id="12734" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="12738" class="Symbol">(</a><a id="12739" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="12741" href="Examples.Amortized.html#12641" class="Bound">A</a> <a id="12743" class="Symbol">λ</a> <a id="12745" href="Examples.Amortized.html#12745" class="Bound">_</a> <a id="12747" class="Symbol">→</a> <a id="12749" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="12763" href="Examples.Amortized.html#12641" class="Bound">A</a><a id="12764" class="Symbol">)</a>
      <a id="DynamicArray.DynamicArray.get"></a><a id="12772" href="Examples.Amortized.html#12772" class="Field">get</a>    <a id="12779" class="Symbol">:</a> <a id="12781" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="12785" class="Symbol">(</a><a id="12786" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="12788" href="Calf.Types.Nat.html#164" class="Function">nat</a> <a id="12792" class="Symbol">λ</a> <a id="12794" href="Examples.Amortized.html#12794" class="Bound">_</a> <a id="12796" class="Symbol">→</a> <a id="12798" href="Calf.Types.Maybe.html#177" class="Function">maybe</a> <a id="12804" href="Examples.Amortized.html#12641" class="Bound">A</a> <a id="12806" href="Examples.Amortized.html#801" class="Function Operator">⋉</a> <a id="12808" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="12822" href="Examples.Amortized.html#12641" class="Bound">A</a><a id="12823" class="Symbol">)</a>
  <a id="12827" class="Keyword">postulate</a>
    <a id="DynamicArray.dynamic-array/decode"></a><a id="12841" href="Examples.Amortized.html#12841" class="Postulate">dynamic-array/decode</a> <a id="12862" class="Symbol">:</a> <a id="12864" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="12868" class="Symbol">(</a><a id="12869" href="Calf.Metalanguage.html#333" class="Function">U</a> <a id="12871" class="Symbol">(</a><a id="12872" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="12886" href="Examples.Amortized.html#768" class="Generalizable">A</a><a id="12887" class="Symbol">))</a> <a id="12890" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12892" href="Examples.Amortized.html#12627" class="Record">DynamicArray</a> <a id="12905" href="Examples.Amortized.html#768" class="Generalizable">A</a>
    <a id="12911" class="Symbol">{-#</a> <a id="12915" class="Keyword">REWRITE</a> <a id="12923" href="Examples.Amortized.html#12841" class="Postulate">dynamic-array/decode</a> <a id="12944" class="Symbol">#-}</a>

    <a id="DynamicArray.quit/step"></a><a id="12953" href="Examples.Amortized.html#12953" class="Postulate">quit/step</a>   <a id="12965" class="Symbol">:</a> <a id="12967" class="Symbol">∀</a> <a id="12969" class="Symbol">{</a><a id="12970" href="Examples.Amortized.html#12970" class="Bound">c</a> <a id="12972" href="Examples.Amortized.html#12972" class="Bound">e</a><a id="12973" class="Symbol">}</a> <a id="12975" class="Symbol">→</a> <a id="12977" href="Examples.Amortized.html#12697" class="Field">DynamicArray.quit</a>   <a id="12997" class="Symbol">(</a><a id="12998" href="Calf.Step.html#337" class="Function">step</a> <a id="13003" class="Symbol">(</a><a id="13004" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="13018" href="Examples.Amortized.html#768" class="Generalizable">A</a><a id="13019" class="Symbol">)</a> <a id="13021" href="Examples.Amortized.html#12970" class="Bound">c</a> <a id="13023" href="Examples.Amortized.html#12972" class="Bound">e</a><a id="13024" class="Symbol">)</a> <a id="13026" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="13028" href="Calf.Step.html#337" class="Function">step</a> <a id="13033" class="Symbol">(</a><a id="13034" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="13036" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="13040" class="Symbol">)</a>                                <a id="13073" href="Examples.Amortized.html#12970" class="Bound">c</a> <a id="13075" class="Symbol">(</a><a id="13076" href="Examples.Amortized.html#12697" class="Field">DynamicArray.quit</a>   <a id="13096" href="Examples.Amortized.html#12972" class="Bound">e</a><a id="13097" class="Symbol">)</a>
    <a id="DynamicArray.append/step"></a><a id="13103" href="Examples.Amortized.html#13103" class="Postulate">append/step</a> <a id="13115" class="Symbol">:</a> <a id="13117" class="Symbol">∀</a> <a id="13119" class="Symbol">{</a><a id="13120" href="Examples.Amortized.html#13120" class="Bound">c</a> <a id="13122" href="Examples.Amortized.html#13122" class="Bound">e</a><a id="13123" class="Symbol">}</a> <a id="13125" class="Symbol">→</a> <a id="13127" href="Examples.Amortized.html#12725" class="Field">DynamicArray.append</a> <a id="13147" class="Symbol">(</a><a id="13148" href="Calf.Step.html#337" class="Function">step</a> <a id="13153" class="Symbol">(</a><a id="13154" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="13168" href="Examples.Amortized.html#768" class="Generalizable">A</a><a id="13169" class="Symbol">)</a> <a id="13171" href="Examples.Amortized.html#13120" class="Bound">c</a> <a id="13173" href="Examples.Amortized.html#13122" class="Bound">e</a><a id="13174" class="Symbol">)</a> <a id="13176" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="13178" href="Calf.Step.html#337" class="Function">step</a> <a id="13183" class="Symbol">(</a><a id="13184" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="13186" href="Examples.Amortized.html#768" class="Generalizable">A</a> <a id="13188" class="Symbol">λ</a> <a id="13190" href="Examples.Amortized.html#13190" class="Bound">_</a> <a id="13192" class="Symbol">→</a> <a id="13194" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="13208" href="Examples.Amortized.html#768" class="Generalizable">A</a><a id="13209" class="Symbol">)</a>             <a id="13223" href="Examples.Amortized.html#13120" class="Bound">c</a> <a id="13225" class="Symbol">(</a><a id="13226" href="Examples.Amortized.html#12725" class="Field">DynamicArray.append</a> <a id="13246" href="Examples.Amortized.html#13122" class="Bound">e</a><a id="13247" class="Symbol">)</a>
    <a id="DynamicArray.get/step"></a><a id="13253" href="Examples.Amortized.html#13253" class="Postulate">get/step</a>    <a id="13265" class="Symbol">:</a> <a id="13267" class="Symbol">∀</a> <a id="13269" class="Symbol">{</a><a id="13270" href="Examples.Amortized.html#13270" class="Bound">c</a> <a id="13272" href="Examples.Amortized.html#13272" class="Bound">e</a><a id="13273" class="Symbol">}</a> <a id="13275" class="Symbol">→</a> <a id="13277" href="Examples.Amortized.html#12772" class="Field">DynamicArray.get</a>    <a id="13297" class="Symbol">(</a><a id="13298" href="Calf.Step.html#337" class="Function">step</a> <a id="13303" class="Symbol">(</a><a id="13304" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="13318" href="Examples.Amortized.html#768" class="Generalizable">A</a><a id="13319" class="Symbol">)</a> <a id="13321" href="Examples.Amortized.html#13270" class="Bound">c</a> <a id="13323" href="Examples.Amortized.html#13272" class="Bound">e</a><a id="13324" class="Symbol">)</a> <a id="13326" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="13328" href="Calf.Step.html#337" class="Function">step</a> <a id="13333" class="Symbol">(</a><a id="13334" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="13336" href="Calf.Types.Nat.html#164" class="Function">nat</a> <a id="13340" class="Symbol">λ</a> <a id="13342" href="Examples.Amortized.html#13342" class="Bound">_</a> <a id="13344" class="Symbol">→</a> <a id="13346" href="Calf.Types.Maybe.html#177" class="Function">maybe</a> <a id="13352" href="Examples.Amortized.html#768" class="Generalizable">A</a> <a id="13354" href="Examples.Amortized.html#801" class="Function Operator">⋉</a> <a id="13356" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="13370" href="Examples.Amortized.html#768" class="Generalizable">A</a><a id="13371" class="Symbol">)</a> <a id="13373" href="Examples.Amortized.html#13270" class="Bound">c</a> <a id="13375" class="Symbol">(</a><a id="13376" href="Examples.Amortized.html#12772" class="Field">DynamicArray.get</a>    <a id="13396" href="Examples.Amortized.html#13272" class="Bound">e</a><a id="13397" class="Symbol">)</a>
    <a id="13403" class="Symbol">{-#</a> <a id="13407" class="Keyword">REWRITE</a> <a id="13415" href="Examples.Amortized.html#12953" class="Postulate">quit/step</a> <a id="13425" href="Examples.Amortized.html#13103" class="Postulate">append/step</a> <a id="13437" href="Examples.Amortized.html#13253" class="Postulate">get/step</a> <a id="13446" class="Symbol">#-}</a>

  <a id="DynamicArray.Φ"></a><a id="13453" href="Examples.Amortized.html#13453" class="Function">Φ</a> <a id="13455" class="Symbol">:</a> <a id="13457" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="13461" href="Calf.Types.Nat.html#164" class="Function">nat</a> <a id="13465" class="Symbol">→</a> <a id="13467" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="13471" href="Calf.Types.Nat.html#164" class="Function">nat</a> <a id="13475" class="Symbol">→</a> <a id="13477" href="Calf.CostMonoid.html#2944" class="Function">ℂ</a>
  <a id="13481" href="Examples.Amortized.html#13453" class="Function">Φ</a> <a id="13483" href="Examples.Amortized.html#13483" class="Bound">n</a> <a id="13485" href="Examples.Amortized.html#13485" class="Bound">m</a> <a id="13487" class="Symbol">=</a> <a id="13489" class="Number">2</a> <a id="13491" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="13493" href="Examples.Amortized.html#13483" class="Bound">n</a> <a id="13495" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="13497" class="Number">2</a> <a id="13499" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="13501" href="Examples.Amortized.html#13485" class="Bound">m</a>

  <a id="13506" class="Symbol">{-#</a> <a id="13510" class="Keyword">TERMINATING</a> <a id="13522" class="Symbol">#-}</a>
  <a id="13528" class="Comment">-- array n m</a>
  <a id="13543" class="Comment">-- length of allocated array: (2 ^ n)</a>
  <a id="13583" class="Comment">-- remaining free spaces: m (≤ 2 ^ (pred n))</a>
  <a id="DynamicArray.array"></a><a id="13630" href="Examples.Amortized.html#13630" class="Function">array</a> <a id="13636" class="Symbol">:</a> <a id="13638" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="13642" class="Symbol">(</a><a id="13643" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="13645" href="Calf.Types.Nat.html#164" class="Function">nat</a> <a id="13649" class="Symbol">λ</a> <a id="13651" href="Examples.Amortized.html#13651" class="Symbol">_</a> <a id="13653" class="Symbol">→</a> <a id="13655" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="13657" href="Calf.Types.Nat.html#164" class="Function">nat</a> <a id="13661" class="Symbol">λ</a> <a id="13663" href="Examples.Amortized.html#13663" class="Symbol">_</a> <a id="13665" class="Symbol">→</a> <a id="13667" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="13681" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="13685" class="Symbol">)</a>
  <a id="13689" href="Examples.Amortized.html#12697" class="Field">DynamicArray.quit</a> <a id="13707" class="Symbol">(</a><a id="13708" href="Examples.Amortized.html#13630" class="Function">array</a> <a id="13714" href="Examples.Amortized.html#13714" class="Bound">n</a> <a id="13716" href="Examples.Amortized.html#13716" class="Bound">m</a><a id="13717" class="Symbol">)</a> <a id="13719" class="Symbol">=</a> <a id="13721" href="Calf.Step.html#337" class="Function">step</a> <a id="13726" class="Symbol">(</a><a id="13727" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="13729" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="13733" class="Symbol">)</a> <a id="13735" class="Symbol">(</a><a id="13736" href="Examples.Amortized.html#13453" class="Function">Φ</a> <a id="13738" href="Examples.Amortized.html#13714" class="Bound">n</a> <a id="13740" href="Examples.Amortized.html#13716" class="Bound">m</a><a id="13741" class="Symbol">)</a> <a id="13743" class="Symbol">(</a><a id="13744" href="Calf.Metalanguage.html#554" class="Function">ret</a> <a id="13748" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a><a id="13752" class="Symbol">)</a>
  <a id="13756" href="Examples.Amortized.html#12725" class="Field">DynamicArray.append</a> <a id="13776" class="Symbol">(</a><a id="13777" href="Examples.Amortized.html#13630" class="Function">array</a> <a id="13783" href="Examples.Amortized.html#13783" class="Bound">n</a> <a id="13785" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="13789" class="Symbol">)</a> <a id="13791" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a> <a id="13796" class="Symbol">=</a> <a id="13798" href="Calf.Step.html#337" class="Function">step</a> <a id="13803" class="Symbol">(</a><a id="13804" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="13818" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="13822" class="Symbol">)</a> <a id="13824" class="Symbol">(</a><a id="13825" class="Number">2</a> <a id="13827" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="13829" href="Examples.Amortized.html#13783" class="Bound">n</a><a id="13830" class="Symbol">)</a> <a id="13832" class="Symbol">(</a><a id="13833" href="Examples.Amortized.html#13630" class="Function">array</a> <a id="13839" class="Symbol">(</a><a id="13840" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="13844" href="Examples.Amortized.html#13783" class="Bound">n</a><a id="13845" class="Symbol">)</a> <a id="13847" href="Data.Nat.PredExp2.html#354" class="Function Operator">pred[2^</a> <a id="13855" href="Examples.Amortized.html#13783" class="Bound">n</a> <a id="13857" href="Data.Nat.PredExp2.html#354" class="Function Operator">]</a><a id="13858" class="Symbol">)</a>
  <a id="13862" href="Examples.Amortized.html#12725" class="Field">DynamicArray.append</a> <a id="13882" class="Symbol">(</a><a id="13883" href="Examples.Amortized.html#13630" class="Function">array</a> <a id="13889" href="Examples.Amortized.html#13889" class="Bound">n</a> <a id="13891" class="Symbol">(</a><a id="13892" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="13896" href="Examples.Amortized.html#13896" class="Bound">m</a><a id="13897" class="Symbol">))</a> <a id="13900" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a> <a id="13905" class="Symbol">=</a> <a id="13907" href="Examples.Amortized.html#13630" class="Function">array</a> <a id="13913" href="Examples.Amortized.html#13889" class="Bound">n</a> <a id="13915" href="Examples.Amortized.html#13896" class="Bound">m</a>
  <a id="13919" href="Examples.Amortized.html#12772" class="Field">DynamicArray.get</a> <a id="13936" class="Symbol">(</a><a id="13937" href="Examples.Amortized.html#13630" class="Function">array</a> <a id="13943" href="Examples.Amortized.html#13943" class="Bound">n</a> <a id="13945" href="Examples.Amortized.html#13945" class="Bound">m</a><a id="13946" class="Symbol">)</a> <a id="13948" href="Examples.Amortized.html#13948" class="Bound">i</a> <a id="13950" class="Keyword">with</a> <a id="13955" href="Examples.Amortized.html#13948" class="Bound">i</a> <a id="13957" href="Data.Nat.Properties.html#10652" class="Function Operator">Nat.&lt;?</a> <a id="13964" class="Number">2</a> <a id="13966" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="13968" href="Examples.Amortized.html#13943" class="Bound">n</a> <a id="13970" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="13972" href="Examples.Amortized.html#13945" class="Bound">m</a>
  <a id="13976" class="Symbol">...</a> <a id="13980" class="Symbol">|</a> <a id="13982" href="Relation.Nullary.Decidable.Core.html#1659" class="InductiveConstructor">no</a> <a id="13985" href="Examples.Amortized.html#13985" class="Bound">¬p</a> <a id="13988" class="Symbol">=</a> <a id="13990" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a> <a id="13998" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="14000" href="Examples.Amortized.html#13630" class="Function">array</a> <a id="14006" class="Bound">n</a> <a id="14008" class="Bound">m</a>
  <a id="14012" class="Symbol">...</a> <a id="14016" class="Symbol">|</a> <a id="14018" href="Relation.Nullary.Decidable.Core.html#1622" class="InductiveConstructor">yes</a> <a id="14022" href="Examples.Amortized.html#14022" class="Bound">p</a> <a id="14024" class="Symbol">=</a> <a id="14026" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="14031" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a> <a id="14036" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="14038" href="Examples.Amortized.html#13630" class="Function">array</a> <a id="14044" class="Bound">n</a> <a id="14046" class="Bound">m</a>

  <a id="14051" class="Symbol">{-#</a> <a id="14055" class="Keyword">TERMINATING</a> <a id="14067" class="Symbol">#-}</a>
  <a id="DynamicArray.SPEC/array"></a><a id="14073" href="Examples.Amortized.html#14073" class="Function">SPEC/array</a> <a id="14084" class="Symbol">:</a> <a id="14086" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="14090" class="Symbol">(</a><a id="14091" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="14093" href="Calf.Types.Nat.html#164" class="Function">nat</a> <a id="14097" class="Symbol">λ</a> <a id="14099" href="Examples.Amortized.html#14099" class="Symbol">_</a> <a id="14101" class="Symbol">→</a> <a id="14103" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="14117" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="14121" class="Symbol">)</a>
  <a id="14125" href="Examples.Amortized.html#12697" class="Field">DynamicArray.quit</a> <a id="14143" class="Symbol">(</a><a id="14144" href="Examples.Amortized.html#14073" class="Function">SPEC/array</a> <a id="14155" href="Examples.Amortized.html#14155" class="Bound">n</a><a id="14156" class="Symbol">)</a> <a id="14158" class="Symbol">=</a> <a id="14160" href="Calf.Metalanguage.html#554" class="Function">ret</a> <a id="14164" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a>
  <a id="14171" href="Examples.Amortized.html#12725" class="Field">DynamicArray.append</a> <a id="14191" class="Symbol">(</a><a id="14192" href="Examples.Amortized.html#14073" class="Function">SPEC/array</a> <a id="14203" href="Examples.Amortized.html#14203" class="Bound">n</a><a id="14204" class="Symbol">)</a> <a id="14206" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a> <a id="14211" class="Symbol">=</a> <a id="14213" href="Calf.Step.html#337" class="Function">step</a> <a id="14218" class="Symbol">(</a><a id="14219" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="14233" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="14237" class="Symbol">)</a> <a id="14239" class="Number">2</a> <a id="14241" class="Symbol">(</a><a id="14242" href="Examples.Amortized.html#14073" class="Function">SPEC/array</a> <a id="14253" class="Symbol">(</a><a id="14254" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="14258" href="Examples.Amortized.html#14203" class="Bound">n</a><a id="14259" class="Symbol">))</a>
  <a id="14264" href="Examples.Amortized.html#12772" class="Field">DynamicArray.get</a> <a id="14281" class="Symbol">(</a><a id="14282" href="Examples.Amortized.html#14073" class="Function">SPEC/array</a> <a id="14293" href="Examples.Amortized.html#14293" class="Bound">n</a><a id="14294" class="Symbol">)</a> <a id="14296" href="Examples.Amortized.html#14296" class="Bound">i</a> <a id="14298" class="Keyword">with</a> <a id="14303" href="Examples.Amortized.html#14296" class="Bound">i</a> <a id="14305" href="Data.Nat.Properties.html#10652" class="Function Operator">Nat.&lt;?</a> <a id="14312" href="Examples.Amortized.html#14293" class="Bound">n</a>
  <a id="14316" class="Symbol">...</a> <a id="14320" class="Symbol">|</a> <a id="14322" href="Relation.Nullary.Decidable.Core.html#1659" class="InductiveConstructor">no</a> <a id="14325" href="Examples.Amortized.html#14325" class="Bound">¬p</a> <a id="14328" class="Symbol">=</a> <a id="14330" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a> <a id="14338" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="14340" href="Examples.Amortized.html#14073" class="Function">SPEC/array</a> <a id="14351" class="Bound">n</a>
  <a id="14355" class="Symbol">...</a> <a id="14359" class="Symbol">|</a> <a id="14361" href="Relation.Nullary.Decidable.Core.html#1622" class="InductiveConstructor">yes</a> <a id="14365" href="Examples.Amortized.html#14365" class="Bound">p</a> <a id="14367" class="Symbol">=</a> <a id="14369" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="14374" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a> <a id="14379" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="14381" href="Examples.Amortized.html#14073" class="Function">SPEC/array</a> <a id="14392" class="Bound">n</a>

  <a id="14397" class="Keyword">record</a> <a id="DynamicArray._≈_"></a><a id="14404" href="Examples.Amortized.html#14404" class="Record Operator">_≈_</a> <a id="14408" class="Symbol">{</a><a id="14409" href="Examples.Amortized.html#14409" class="Bound">A</a> <a id="14411" class="Symbol">:</a> <a id="14413" href="Calf.Metalanguage.html#275" class="Function">tp</a> <a id="14416" href="Calf.Metalanguage.html#248" class="Function">pos</a><a id="14419" class="Symbol">}</a> <a id="14421" class="Symbol">(</a><a id="14422" href="Examples.Amortized.html#14422" class="Bound">d₁</a> <a id="14425" href="Examples.Amortized.html#14425" class="Bound">d₂</a> <a id="14428" class="Symbol">:</a> <a id="14430" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="14434" class="Symbol">(</a><a id="14435" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="14449" href="Examples.Amortized.html#14409" class="Bound">A</a><a id="14450" class="Symbol">))</a> <a id="14453" class="Symbol">:</a> <a id="14455" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="14459" class="Keyword">where</a>
    <a id="14469" class="Keyword">coinductive</a>
    <a id="14485" class="Keyword">field</a>
      <a id="DynamicArray._≈_.quit"></a><a id="14497" href="Examples.Amortized.html#14497" class="Field">quit</a>   <a id="14504" class="Symbol">:</a> <a id="14506" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="14510" href="Function.Base.html#2003" class="Function Operator">$</a>
        <a id="14520" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="14525" class="Symbol">(</a><a id="14526" href="Examples.Amortized.html#12697" class="Field">DynamicArray.quit</a> <a id="14544" href="Examples.Amortized.html#14422" class="Bound">d₁</a> <a id="14547" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="14549" href="Examples.Amortized.html#12697" class="Field">DynamicArray.quit</a> <a id="14567" href="Examples.Amortized.html#14425" class="Bound">d₂</a><a id="14569" class="Symbol">)</a>
      <a id="DynamicArray._≈_.append"></a><a id="14577" href="Examples.Amortized.html#14577" class="Field">append</a> <a id="14584" class="Symbol">:</a> <a id="14586" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="14590" href="Function.Base.html#2003" class="Function Operator">$</a>
        <a id="14600" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="14602" href="Examples.Amortized.html#14409" class="Bound">A</a> <a id="14604" class="Symbol">λ</a> <a id="14606" href="Examples.Amortized.html#14606" class="Bound">a</a> <a id="14608" class="Symbol">→</a> <a id="14610" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="14615" class="Symbol">(</a><a id="14616" href="Examples.Amortized.html#12725" class="Field">DynamicArray.append</a> <a id="14636" href="Examples.Amortized.html#14422" class="Bound">d₁</a> <a id="14639" href="Examples.Amortized.html#14606" class="Bound">a</a> <a id="14641" href="Examples.Amortized.html#14404" class="Record Operator">≈</a> <a id="14643" href="Examples.Amortized.html#12725" class="Field">DynamicArray.append</a> <a id="14663" href="Examples.Amortized.html#14425" class="Bound">d₂</a> <a id="14666" href="Examples.Amortized.html#14606" class="Bound">a</a><a id="14667" class="Symbol">)</a>
      <a id="DynamicArray._≈_.get"></a><a id="14675" href="Examples.Amortized.html#14675" class="Field">get</a>    <a id="14682" class="Symbol">:</a> <a id="14684" href="Calf.Metalanguage.html#506" class="Function">cmp</a> <a id="14688" href="Function.Base.html#2003" class="Function Operator">$</a>
        <a id="14698" href="Calf.Metalanguage.html#1035" class="Function">Π</a> <a id="14700" href="Calf.Types.Nat.html#164" class="Function">nat</a> <a id="14704" class="Symbol">λ</a> <a id="14706" href="Examples.Amortized.html#14706" class="Bound">i</a> <a id="14708" class="Symbol">→</a>
          <a id="14720" class="Symbol">(</a><a id="14721" href="Calf.Metalanguage.html#333" class="Function">U</a> <a id="14723" class="Symbol">(</a><a id="14724" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="14729" class="Symbol">(</a><a id="14730" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="14736" class="Symbol">(</a><a id="14737" href="Examples.Amortized.html#12772" class="Field">DynamicArray.get</a> <a id="14754" href="Examples.Amortized.html#14422" class="Bound">d₁</a> <a id="14757" href="Examples.Amortized.html#14706" class="Bound">i</a><a id="14758" class="Symbol">)</a> <a id="14760" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="14762" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="14768" class="Symbol">(</a><a id="14769" href="Examples.Amortized.html#12772" class="Field">DynamicArray.get</a> <a id="14786" href="Examples.Amortized.html#14425" class="Bound">d₂</a> <a id="14789" href="Examples.Amortized.html#14706" class="Bound">i</a><a id="14790" class="Symbol">))))</a> <a id="14795" href="Examples.Amortized.html#801" class="Function Operator">⋉</a>
          <a id="14807" class="Symbol">(</a><a id="14808" href="Calf.Metalanguage.html#1715" class="Function">meta</a> <a id="14813" class="Symbol">(</a><a id="14814" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="14820" class="Symbol">(</a><a id="14821" href="Examples.Amortized.html#12772" class="Field">DynamicArray.get</a> <a id="14838" href="Examples.Amortized.html#14422" class="Bound">d₁</a> <a id="14841" href="Examples.Amortized.html#14706" class="Bound">i</a><a id="14842" class="Symbol">)</a> <a id="14844" href="Examples.Amortized.html#14404" class="Record Operator">≈</a> <a id="14846" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="14852" class="Symbol">(</a><a id="14853" href="Examples.Amortized.html#12772" class="Field">DynamicArray.get</a> <a id="14870" href="Examples.Amortized.html#14425" class="Bound">d₂</a> <a id="14873" href="Examples.Amortized.html#14706" class="Bound">i</a><a id="14874" class="Symbol">)))</a>

  <a id="DynamicArray.≈-cong"></a><a id="14881" href="Examples.Amortized.html#14881" class="Function">≈-cong</a> <a id="14888" class="Symbol">:</a> <a id="14890" class="Symbol">(</a><a id="14891" href="Examples.Amortized.html#14891" class="Bound">c</a> <a id="14893" class="Symbol">:</a> <a id="14895" href="Calf.CostMonoid.html#2944" class="Function">ℂ</a><a id="14896" class="Symbol">)</a> <a id="14898" class="Symbol">{</a><a id="14899" href="Examples.Amortized.html#14899" class="Bound">x</a> <a id="14901" href="Examples.Amortized.html#14901" class="Bound">y</a> <a id="14903" class="Symbol">:</a> <a id="14905" href="Examples.Amortized.html#12627" class="Record">DynamicArray</a> <a id="14918" href="Examples.Amortized.html#768" class="Generalizable">A</a><a id="14919" class="Symbol">}</a> <a id="14921" class="Symbol">→</a> <a id="14923" href="Examples.Amortized.html#14899" class="Bound">x</a> <a id="14925" href="Examples.Amortized.html#14404" class="Record Operator">≈</a> <a id="14927" href="Examples.Amortized.html#14901" class="Bound">y</a> <a id="14929" class="Symbol">→</a> <a id="14931" href="Calf.Step.html#337" class="Function">step</a> <a id="14936" class="Symbol">(</a><a id="14937" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="14951" href="Examples.Amortized.html#768" class="Generalizable">A</a><a id="14952" class="Symbol">)</a> <a id="14954" href="Examples.Amortized.html#14891" class="Bound">c</a> <a id="14956" href="Examples.Amortized.html#14899" class="Bound">x</a> <a id="14958" href="Examples.Amortized.html#14404" class="Record Operator">≈</a> <a id="14960" href="Calf.Step.html#337" class="Function">step</a> <a id="14965" class="Symbol">(</a><a id="14966" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="14980" href="Examples.Amortized.html#768" class="Generalizable">A</a><a id="14981" class="Symbol">)</a> <a id="14983" href="Examples.Amortized.html#14891" class="Bound">c</a> <a id="14985" href="Examples.Amortized.html#14901" class="Bound">y</a>
  <a id="14989" href="Examples.Amortized.html#14497" class="Field">_≈_.quit</a> <a id="14998" class="Symbol">(</a><a id="14999" href="Examples.Amortized.html#14881" class="Function">≈-cong</a> <a id="15006" href="Examples.Amortized.html#15006" class="Bound">c</a> <a id="15008" href="Examples.Amortized.html#15008" class="Bound">h</a><a id="15009" class="Symbol">)</a> <a id="15011" class="Symbol">=</a> <a id="15013" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="15021" class="Symbol">(</a><a id="15022" href="Calf.Step.html#337" class="Function">step</a> <a id="15027" class="Symbol">(</a><a id="15028" href="Calf.Metalanguage.html#311" class="Function">F</a> <a id="15030" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="15034" class="Symbol">)</a> <a id="15036" href="Examples.Amortized.html#15006" class="Bound">c</a><a id="15037" class="Symbol">)</a> <a id="15039" class="Symbol">(</a><a id="15040" href="Examples.Amortized.html#14497" class="Field">_≈_.quit</a> <a id="15049" href="Examples.Amortized.html#15008" class="Bound">h</a><a id="15050" class="Symbol">)</a>
  <a id="15054" href="Examples.Amortized.html#14577" class="Field">_≈_.append</a> <a id="15065" class="Symbol">(</a><a id="15066" href="Examples.Amortized.html#14881" class="Function">≈-cong</a> <a id="15073" href="Examples.Amortized.html#15073" class="Bound">c</a> <a id="15075" href="Examples.Amortized.html#15075" class="Bound">h</a><a id="15076" class="Symbol">)</a> <a id="15078" href="Examples.Amortized.html#15078" class="Bound">a</a> <a id="15080" class="Symbol">=</a> <a id="15082" href="Examples.Amortized.html#14881" class="Function">≈-cong</a> <a id="15089" href="Examples.Amortized.html#15073" class="Bound">c</a> <a id="15091" class="Symbol">(</a><a id="15092" href="Examples.Amortized.html#14577" class="Field">_≈_.append</a> <a id="15103" href="Examples.Amortized.html#15075" class="Bound">h</a> <a id="15105" href="Examples.Amortized.html#15078" class="Bound">a</a><a id="15106" class="Symbol">)</a>
  <a id="15110" href="Examples.Amortized.html#14675" class="Field">_≈_.get</a> <a id="15118" class="Symbol">(</a><a id="15119" href="Examples.Amortized.html#14881" class="Function">≈-cong</a> <a id="15126" href="Examples.Amortized.html#15126" class="Bound">c</a> <a id="15128" href="Examples.Amortized.html#15128" class="Bound">h</a><a id="15129" class="Symbol">)</a> <a id="15131" href="Examples.Amortized.html#15131" class="Bound">i</a> <a id="15133" class="Symbol">=</a> <a id="15135" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="15141" class="Symbol">(</a><a id="15142" href="Examples.Amortized.html#14675" class="Field">_≈_.get</a> <a id="15150" href="Examples.Amortized.html#15128" class="Bound">h</a> <a id="15152" href="Examples.Amortized.html#15131" class="Bound">i</a><a id="15153" class="Symbol">)</a> <a id="15155" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="15157" href="Examples.Amortized.html#14881" class="Function">≈-cong</a> <a id="15164" href="Examples.Amortized.html#15126" class="Bound">c</a> <a id="15166" class="Symbol">(</a><a id="15167" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="15173" class="Symbol">(</a><a id="15174" href="Examples.Amortized.html#14675" class="Field">_≈_.get</a> <a id="15182" href="Examples.Amortized.html#15128" class="Bound">h</a> <a id="15184" href="Examples.Amortized.html#15131" class="Bound">i</a><a id="15185" class="Symbol">))</a>

  <a id="15191" class="Comment">-- from unreleased agda-stdlib</a>
  <a id="DynamicArray.2^n&gt;0"></a><a id="15224" href="Examples.Amortized.html#15224" class="Function">2^n&gt;0</a> <a id="15230" class="Symbol">:</a> <a id="15232" class="Symbol">∀</a> <a id="15234" class="Symbol">(</a><a id="15235" href="Examples.Amortized.html#15235" class="Bound">n</a> <a id="15237" class="Symbol">:</a> <a id="15239" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="15240" class="Symbol">)</a> <a id="15242" class="Symbol">→</a> <a id="15244" class="Number">2</a> <a id="15246" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="15248" href="Examples.Amortized.html#15235" class="Bound">n</a> <a id="15250" href="Data.Nat.Base.html#1933" class="Function Operator">&gt;</a> <a id="15252" class="Number">0</a>
  <a id="15256" href="Examples.Amortized.html#15224" class="Function">2^n&gt;0</a> <a id="15262" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a> <a id="15267" class="Symbol">=</a> <a id="15269" href="Data.Nat.Base.html#1609" class="InductiveConstructor">Nat.s≤s</a> <a id="15277" href="Data.Nat.Base.html#1567" class="InductiveConstructor">Nat.z≤n</a>
  <a id="15287" href="Examples.Amortized.html#15224" class="Function">2^n&gt;0</a> <a id="15293" class="Symbol">(</a><a id="15294" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="15298" href="Examples.Amortized.html#15298" class="Bound">n</a><a id="15299" class="Symbol">)</a> <a id="15301" class="Symbol">=</a> <a id="15303" href="Data.Nat.Properties.html#5111" class="Function">Nat.≤-trans</a> <a id="15315" class="Symbol">(</a><a id="15316" href="Examples.Amortized.html#15224" class="Function">2^n&gt;0</a> <a id="15322" href="Examples.Amortized.html#15298" class="Bound">n</a><a id="15323" class="Symbol">)</a> <a id="15325" class="Symbol">(</a><a id="15326" href="Data.Nat.Properties.html#18334" class="Function">Nat.m≤m+n</a> <a id="15336" class="Symbol">(</a><a id="15337" class="Number">2</a> <a id="15339" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="15341" href="Examples.Amortized.html#15298" class="Bound">n</a><a id="15342" class="Symbol">)</a> <a id="15344" class="Symbol">((</a><a id="15346" class="Number">2</a> <a id="15348" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="15350" href="Examples.Amortized.html#15298" class="Bound">n</a><a id="15351" class="Symbol">)</a> <a id="15353" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="15355" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="15359" class="Symbol">))</a>

  <a id="DynamicArray.2^-mono"></a><a id="15365" href="Examples.Amortized.html#15365" class="Function">2^-mono</a> <a id="15373" class="Symbol">:</a> <a id="15375" class="Symbol">{</a><a id="15376" href="Examples.Amortized.html#15376" class="Bound">m</a> <a id="15378" href="Examples.Amortized.html#15378" class="Bound">n</a> <a id="15380" class="Symbol">:</a> <a id="15382" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="15383" class="Symbol">}</a> <a id="15385" class="Symbol">→</a> <a id="15387" href="Examples.Amortized.html#15376" class="Bound">m</a> <a id="15389" href="Data.Nat.Base.html#1544" class="Datatype Operator">Nat.≤</a> <a id="15395" href="Examples.Amortized.html#15378" class="Bound">n</a> <a id="15397" class="Symbol">→</a> <a id="15399" class="Number">2</a> <a id="15401" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="15403" href="Examples.Amortized.html#15376" class="Bound">m</a> <a id="15405" href="Data.Nat.Base.html#1544" class="Datatype Operator">Nat.≤</a> <a id="15411" class="Number">2</a> <a id="15413" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="15415" href="Examples.Amortized.html#15378" class="Bound">n</a>
  <a id="15419" href="Examples.Amortized.html#15365" class="Function">2^-mono</a> <a id="15427" class="Symbol">{</a><a id="15428" class="Argument">n</a> <a id="15430" class="Symbol">=</a> <a id="15432" href="Examples.Amortized.html#15432" class="Bound">n</a><a id="15433" class="Symbol">}</a> <a id="15435" href="Data.Nat.Base.html#1567" class="InductiveConstructor">Nat.z≤n</a> <a id="15443" class="Symbol">=</a> <a id="15445" href="Examples.Amortized.html#15224" class="Function">2^n&gt;0</a> <a id="15451" href="Examples.Amortized.html#15432" class="Bound">n</a>
  <a id="15455" href="Examples.Amortized.html#15365" class="Function">2^-mono</a> <a id="15463" class="Symbol">(</a><a id="15464" href="Data.Nat.Base.html#1609" class="InductiveConstructor">Nat.s≤s</a> <a id="15472" href="Examples.Amortized.html#15472" class="Bound">h</a><a id="15473" class="Symbol">)</a> <a id="15475" class="Symbol">=</a> <a id="15477" href="Data.Nat.Properties.html#26523" class="Function">Nat.*-monoʳ-≤</a> <a id="15491" class="Number">2</a> <a id="15493" class="Symbol">(</a><a id="15494" href="Examples.Amortized.html#15365" class="Function">2^-mono</a> <a id="15502" href="Examples.Amortized.html#15472" class="Bound">h</a><a id="15503" class="Symbol">)</a>

  <a id="DynamicArray.2^suc[pred[n]]"></a><a id="15508" href="Examples.Amortized.html#15508" class="Function">2^suc[pred[n]]</a> <a id="15523" class="Symbol">:</a> <a id="15525" class="Symbol">(</a><a id="15526" href="Examples.Amortized.html#15526" class="Bound">n</a> <a id="15528" class="Symbol">:</a> <a id="15530" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="15531" class="Symbol">)</a> <a id="15533" class="Symbol">→</a> <a id="15535" class="Number">2</a> <a id="15537" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="15539" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="15543" class="Symbol">(</a><a id="15544" href="Data.Nat.Base.html#3280" class="Function">pred</a> <a id="15549" href="Examples.Amortized.html#15526" class="Bound">n</a><a id="15550" class="Symbol">)</a> <a id="15552" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="15554" class="Number">2</a> <a id="15556" href="Data.Nat.Base.html#1544" class="Datatype Operator">Nat.≤</a> <a id="15562" class="Number">2</a> <a id="15564" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="15566" href="Examples.Amortized.html#15526" class="Bound">n</a>
  <a id="15570" href="Examples.Amortized.html#15508" class="Function">2^suc[pred[n]]</a> <a id="15585" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a> <a id="15590" class="Symbol">=</a> <a id="15592" href="Data.Nat.Base.html#1567" class="InductiveConstructor">Nat.z≤n</a>
  <a id="15602" href="Examples.Amortized.html#15508" class="Function">2^suc[pred[n]]</a> <a id="15617" class="Symbol">(</a><a id="15618" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="15622" href="Examples.Amortized.html#15622" class="Bound">n</a><a id="15623" class="Symbol">)</a> <a id="15625" class="Symbol">=</a> <a id="15627" href="Data.Nat.Properties.html#45614" class="Function">Nat.m∸n≤m</a> <a id="15637" class="Symbol">(</a><a id="15638" class="Number">2</a> <a id="15640" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="15642" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="15646" href="Examples.Amortized.html#15622" class="Bound">n</a><a id="15647" class="Symbol">)</a> <a id="15649" class="Number">2</a>

  <a id="15654" class="Symbol">{-#</a> <a id="15658" class="Keyword">TERMINATING</a> <a id="15670" class="Symbol">#-}</a>
  <a id="DynamicArray.array≈SPEC/array"></a><a id="15676" href="Examples.Amortized.html#15676" class="Function">array≈SPEC/array</a> <a id="15693" class="Symbol">:</a> <a id="15695" class="Symbol">(</a><a id="15696" href="Examples.Amortized.html#15696" class="Bound">n</a> <a id="15698" href="Examples.Amortized.html#15698" class="Bound">m</a> <a id="15700" class="Symbol">:</a> <a id="15702" href="Calf.Metalanguage.html#291" class="Function">val</a> <a id="15706" href="Calf.Types.Nat.html#164" class="Function">nat</a><a id="15709" class="Symbol">)</a> <a id="15711" class="Symbol">→</a> <a id="15713" href="Examples.Amortized.html#15698" class="Bound">m</a> <a id="15715" href="Data.Nat.Base.html#1544" class="Datatype Operator">Nat.≤</a> <a id="15721" href="Data.Nat.PredExp2.html#354" class="Function Operator">pred[2^</a> <a id="15729" href="Data.Nat.Base.html#3280" class="Function">pred</a> <a id="15734" href="Examples.Amortized.html#15696" class="Bound">n</a> <a id="15736" href="Data.Nat.PredExp2.html#354" class="Function Operator">]</a> <a id="15738" class="Symbol">→</a>
    <a id="15744" href="Examples.Amortized.html#13630" class="Function">array</a> <a id="15750" href="Examples.Amortized.html#15696" class="Bound">n</a> <a id="15752" href="Examples.Amortized.html#15698" class="Bound">m</a> <a id="15754" href="Examples.Amortized.html#14404" class="Record Operator">≈</a> <a id="15756" href="Calf.Step.html#337" class="Function">step</a> <a id="15761" class="Symbol">(</a><a id="15762" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="15776" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="15780" class="Symbol">)</a> <a id="15782" class="Symbol">(</a><a id="15783" class="Number">2</a> <a id="15785" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="15787" href="Examples.Amortized.html#15696" class="Bound">n</a> <a id="15789" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="15791" class="Number">2</a> <a id="15793" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="15795" href="Examples.Amortized.html#15698" class="Bound">m</a><a id="15796" class="Symbol">)</a> <a id="15798" class="Symbol">(</a><a id="15799" href="Examples.Amortized.html#14073" class="Function">SPEC/array</a> <a id="15810" class="Symbol">(</a><a id="15811" class="Number">2</a> <a id="15813" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="15815" href="Examples.Amortized.html#15696" class="Bound">n</a> <a id="15817" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="15819" href="Examples.Amortized.html#15698" class="Bound">m</a><a id="15820" class="Symbol">))</a>
  <a id="15825" href="Examples.Amortized.html#14497" class="Field">_≈_.quit</a> <a id="15834" class="Symbol">(</a><a id="15835" href="Examples.Amortized.html#15676" class="Function">array≈SPEC/array</a> <a id="15852" href="Examples.Amortized.html#15852" class="Bound">n</a> <a id="15854" href="Examples.Amortized.html#15854" class="Bound">m</a> <a id="15856" href="Examples.Amortized.html#15856" class="Bound">h</a><a id="15857" class="Symbol">)</a> <a id="15859" class="Symbol">=</a> <a id="15861" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="15868" href="Examples.Amortized.html#14577" class="Field">_≈_.append</a> <a id="15879" class="Symbol">(</a><a id="15880" href="Examples.Amortized.html#15676" class="Function">array≈SPEC/array</a> <a id="15897" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="15899" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a> <a id="15904" href="Examples.Amortized.html#15904" class="Bound">h</a><a id="15905" class="Symbol">)</a> <a id="15907" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a> <a id="15912" class="Symbol">=</a>
    <a id="15918" href="Relation.Binary.PropositionalEquality.Core.html#1858" class="Function">Eq.subst₂</a>
      <a id="15934" class="Symbol">(λ</a> <a id="15937" href="Examples.Amortized.html#15937" class="Bound">c</a> <a id="15939" href="Examples.Amortized.html#15939" class="Bound">x</a> <a id="15941" class="Symbol">→</a>
        <a id="15951" href="Calf.Step.html#337" class="Function">step</a> <a id="15956" class="Symbol">(</a><a id="15957" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="15971" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="15975" class="Symbol">)</a> <a id="15977" class="Symbol">(</a><a id="15978" class="Number">2</a> <a id="15980" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="15982" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="15983" class="Symbol">)</a> <a id="15985" class="Symbol">(</a><a id="15986" href="Examples.Amortized.html#13630" class="Function">array</a> <a id="15992" class="Symbol">(</a><a id="15993" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="15997" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="15998" class="Symbol">)</a> <a id="16000" class="Symbol">(</a><a id="16001" class="Number">2</a> <a id="16003" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16005" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16007" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16009" class="Number">1</a><a id="16010" class="Symbol">))</a> <a id="16013" href="Examples.Amortized.html#14404" class="Record Operator">≈</a>
        <a id="16023" href="Calf.Step.html#337" class="Function">step</a> <a id="16028" class="Symbol">(</a><a id="16029" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="16043" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="16047" class="Symbol">)</a> <a id="16049" class="Symbol">(</a><a id="16050" class="Number">2</a> <a id="16052" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16054" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16056" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16058" href="Examples.Amortized.html#15937" class="Bound">c</a><a id="16059" class="Symbol">)</a> <a id="16061" class="Symbol">(</a><a id="16062" href="Examples.Amortized.html#14073" class="Function">SPEC/array</a> <a id="16073" href="Examples.Amortized.html#15939" class="Bound">x</a><a id="16074" class="Symbol">))</a>
      <a id="16083" class="Symbol">(</a><a id="16084" class="Keyword">let</a> <a id="16088" class="Keyword">open</a> <a id="16093" href="Relation.Binary.PropositionalEquality.Core.html#2731" class="Module">≡-Reasoning</a> <a id="16105" class="Keyword">in</a>
      <a id="16114" href="Relation.Binary.PropositionalEquality.Core.html#2829" class="Function Operator">begin</a>
        <a id="16128" class="Number">2</a> <a id="16130" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16132" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16136" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16138" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16140" class="Number">2</a> <a id="16142" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="16144" href="Data.Nat.PredExp2.html#354" class="Function Operator">pred[2^</a> <a id="16152" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16154" href="Data.Nat.PredExp2.html#354" class="Function Operator">]</a>
      <a id="16162" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">≡⟨</a> <a id="16165" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="16173" class="Symbol">(</a><a id="16174" class="Number">2</a> <a id="16176" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16178" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16182" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16184" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸_</a><a id="16186" class="Symbol">)</a> <a id="16188" class="Symbol">(</a><a id="16189" href="Data.Nat.Properties.html#51101" class="Function">Nat.*-distribˡ-∸</a> <a id="16206" class="Number">2</a> <a id="16208" class="Symbol">(</a><a id="16209" class="Number">2</a> <a id="16211" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16213" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="16214" class="Symbol">)</a> <a id="16216" class="Number">1</a><a id="16217" class="Symbol">)</a> <a id="16219" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">⟩</a>
        <a id="16229" class="Number">2</a> <a id="16231" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16233" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16237" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16239" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16241" class="Symbol">(</a><a id="16242" class="Number">2</a> <a id="16244" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="16246" class="Number">2</a> <a id="16248" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16250" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16252" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16254" class="Number">2</a><a id="16255" class="Symbol">)</a>
      <a id="16263" href="Relation.Binary.PropositionalEquality.Core.html#2887" class="Function Operator">≡⟨⟩</a>
        <a id="16275" class="Number">2</a> <a id="16277" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16279" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16283" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16285" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16287" class="Symbol">(</a><a id="16288" class="Number">2</a> <a id="16290" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16292" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16296" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16298" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16300" class="Number">2</a><a id="16301" class="Symbol">)</a>
      <a id="16309" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">≡⟨</a> <a id="16312" href="Data.Nat.Properties.html#50163" class="Function">Nat.m∸[m∸n]≡n</a> <a id="16326" class="Symbol">(</a><a id="16327" href="Data.Nat.Properties.html#26523" class="Function">Nat.*-monoʳ-≤</a> <a id="16341" class="Number">2</a> <a id="16343" class="Symbol">(</a><a id="16344" href="Examples.Amortized.html#15224" class="Function">2^n&gt;0</a> <a id="16350" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="16351" class="Symbol">))</a> <a id="16354" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">⟩</a>
        <a id="16364" class="Number">2</a>
      <a id="16372" href="Relation.Binary.PropositionalEquality.Core.html#3128" class="Function Operator">∎</a><a id="16373" class="Symbol">)</a>
      <a id="16381" class="Symbol">(</a><a id="16382" class="Keyword">let</a> <a id="16386" class="Keyword">open</a> <a id="16391" href="Relation.Binary.PropositionalEquality.Core.html#2731" class="Module">≡-Reasoning</a> <a id="16403" class="Keyword">in</a>
      <a id="16412" href="Relation.Binary.PropositionalEquality.Core.html#2829" class="Function Operator">begin</a>
        <a id="16426" class="Number">2</a> <a id="16428" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16430" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16434" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16436" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16438" href="Data.Nat.PredExp2.html#354" class="Function Operator">pred[2^</a> <a id="16446" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16448" href="Data.Nat.PredExp2.html#354" class="Function Operator">]</a>
      <a id="16456" href="Relation.Binary.PropositionalEquality.Core.html#2887" class="Function Operator">≡⟨⟩</a>
        <a id="16468" class="Number">2</a> <a id="16470" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="16472" class="Number">2</a> <a id="16474" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16476" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16478" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16480" class="Symbol">(</a><a id="16481" class="Number">2</a> <a id="16483" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16485" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16487" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16489" class="Number">1</a><a id="16490" class="Symbol">)</a>
      <a id="16498" href="Relation.Binary.PropositionalEquality.Core.html#2887" class="Function Operator">≡⟨⟩</a>
        <a id="16510" class="Symbol">(</a><a id="16511" class="Number">2</a> <a id="16513" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16515" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16517" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16519" class="Symbol">(</a><a id="16520" class="Number">2</a> <a id="16522" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16524" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16526" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16528" class="Number">0</a><a id="16529" class="Symbol">))</a> <a id="16532" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16534" class="Symbol">(</a><a id="16535" class="Number">2</a> <a id="16537" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16539" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16541" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16543" class="Number">1</a><a id="16544" class="Symbol">)</a>
      <a id="16552" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">≡⟨</a> <a id="16555" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="16563" class="Symbol">(λ</a> <a id="16566" href="Examples.Amortized.html#16566" class="Bound">x</a> <a id="16568" class="Symbol">→</a> <a id="16570" class="Symbol">(</a><a id="16571" class="Number">2</a> <a id="16573" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16575" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="16576" class="Symbol">)</a> <a id="16578" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16580" href="Examples.Amortized.html#16566" class="Bound">x</a> <a id="16582" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16584" class="Symbol">(</a><a id="16585" class="Number">2</a> <a id="16587" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16589" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16591" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16593" class="Number">1</a><a id="16594" class="Symbol">))</a> <a id="16597" class="Symbol">(</a><a id="16598" href="Data.Nat.Properties.html#14609" class="Function">Nat.+-identityʳ</a> <a id="16614" class="Symbol">(</a><a id="16615" class="Number">2</a> <a id="16617" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16619" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="16620" class="Symbol">))</a> <a id="16623" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">⟩</a>
        <a id="16633" class="Symbol">(</a><a id="16634" class="Number">2</a> <a id="16636" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16638" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16640" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16642" class="Number">2</a> <a id="16644" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16646" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="16647" class="Symbol">)</a> <a id="16649" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16651" class="Symbol">(</a><a id="16652" class="Number">2</a> <a id="16654" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16656" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16658" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16660" class="Number">1</a><a id="16661" class="Symbol">)</a>
      <a id="16669" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">≡⟨</a> <a id="16672" href="Data.Nat.Properties.html#49003" class="Function">Nat.+-∸-assoc</a> <a id="16686" class="Symbol">(</a><a id="16687" class="Number">2</a> <a id="16689" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16691" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="16692" class="Symbol">)</a> <a id="16694" class="Symbol">{</a><a id="16695" class="Argument">n</a> <a id="16697" class="Symbol">=</a> <a id="16699" class="Number">2</a> <a id="16701" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16703" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="16704" class="Symbol">}</a> <a id="16706" class="Symbol">{</a><a id="16707" class="Argument">o</a> <a id="16709" class="Symbol">=</a> <a id="16711" class="Number">2</a> <a id="16713" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16715" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16717" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16719" class="Number">1</a><a id="16720" class="Symbol">}</a> <a id="16722" class="Symbol">(</a><a id="16723" href="Data.Nat.Properties.html#45614" class="Function">Nat.m∸n≤m</a> <a id="16733" class="Symbol">(</a><a id="16734" class="Number">2</a> <a id="16736" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16738" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="16739" class="Symbol">)</a> <a id="16741" class="Number">1</a><a id="16742" class="Symbol">)</a> <a id="16744" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">⟩</a>
        <a id="16754" class="Number">2</a> <a id="16756" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16758" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16760" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16762" class="Symbol">(</a><a id="16763" class="Number">2</a> <a id="16765" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16767" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16769" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16771" class="Symbol">(</a><a id="16772" class="Number">2</a> <a id="16774" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16776" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16778" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="16780" class="Number">1</a><a id="16781" class="Symbol">))</a>
      <a id="16790" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">≡⟨</a> <a id="16793" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="16801" class="Symbol">(</a><a id="16802" class="Number">2</a> <a id="16804" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16806" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16808" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+_</a><a id="16810" class="Symbol">)</a> <a id="16812" class="Symbol">(</a><a id="16813" href="Data.Nat.Properties.html#50163" class="Function">Nat.m∸[m∸n]≡n</a> <a id="16827" class="Symbol">(</a><a id="16828" href="Examples.Amortized.html#15224" class="Function">2^n&gt;0</a> <a id="16834" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="16835" class="Symbol">))</a> <a id="16838" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">⟩</a>
        <a id="16848" class="Number">2</a> <a id="16850" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16852" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16854" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="16856" class="Number">1</a>
      <a id="16864" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">≡⟨</a> <a id="16867" href="Data.Nat.Properties.html#14786" class="Function">Nat.+-comm</a> <a id="16878" class="Symbol">(</a><a id="16879" class="Number">2</a> <a id="16881" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16883" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="16884" class="Symbol">)</a> <a id="16886" class="Number">1</a> <a id="16888" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">⟩</a>
        <a id="16898" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16902" class="Symbol">(</a><a id="16903" class="Number">2</a> <a id="16905" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16907" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="16908" class="Symbol">)</a>
      <a id="16916" href="Relation.Binary.PropositionalEquality.Core.html#3128" class="Function Operator">∎</a><a id="16917" class="Symbol">)</a>
      <a id="16925" class="Symbol">(</a><a id="16926" href="Examples.Amortized.html#14881" class="Function">≈-cong</a> <a id="16933" class="Symbol">(</a><a id="16934" class="Number">2</a> <a id="16936" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="16938" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="16939" class="Symbol">)</a>
        <a id="16949" class="Symbol">{</a><a id="16950" class="Argument">x</a> <a id="16952" class="Symbol">=</a> <a id="16954" href="Examples.Amortized.html#13630" class="Function">array</a> <a id="16960" class="Symbol">(</a><a id="16961" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="16965" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="16966" class="Symbol">)</a> <a id="16968" href="Data.Nat.PredExp2.html#354" class="Function Operator">pred[2^</a> <a id="16976" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="16978" href="Data.Nat.PredExp2.html#354" class="Function Operator">]</a><a id="16979" class="Symbol">}</a>
        <a id="16989" class="Symbol">{</a><a id="16990" class="Argument">y</a> <a id="16992" class="Symbol">=</a> <a id="16994" href="Calf.Step.html#337" class="Function">step</a> <a id="16999" class="Symbol">(</a><a id="17000" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="17014" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="17018" class="Symbol">)</a> <a id="17020" class="Symbol">(</a><a id="17021" class="Number">2</a> <a id="17023" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="17025" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17029" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="17031" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="17033" class="Number">2</a> <a id="17035" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="17037" href="Data.Nat.PredExp2.html#354" class="Function Operator">pred[2^</a> <a id="17045" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="17047" href="Data.Nat.PredExp2.html#354" class="Function Operator">]</a><a id="17048" class="Symbol">)</a> <a id="17050" class="Symbol">(</a><a id="17051" href="Examples.Amortized.html#14073" class="Function">SPEC/array</a> <a id="17062" class="Symbol">(</a><a id="17063" class="Number">2</a> <a id="17065" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="17067" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17071" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="17073" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="17075" href="Data.Nat.PredExp2.html#354" class="Function Operator">pred[2^</a> <a id="17083" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="17085" href="Data.Nat.PredExp2.html#354" class="Function Operator">]</a><a id="17086" class="Symbol">))}</a>
        <a id="17098" class="Symbol">(</a><a id="17099" href="Examples.Amortized.html#15676" class="Function">array≈SPEC/array</a> <a id="17116" class="Symbol">(</a><a id="17117" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17121" href="Examples.Amortized.html#15897" class="Bound">n</a><a id="17122" class="Symbol">)</a> <a id="17124" href="Data.Nat.PredExp2.html#354" class="Function Operator">pred[2^</a> <a id="17132" href="Examples.Amortized.html#15897" class="Bound">n</a> <a id="17134" href="Data.Nat.PredExp2.html#354" class="Function Operator">]</a> <a id="17136" href="Data.Nat.Properties.html#4928" class="Function">Nat.≤-refl</a><a id="17146" class="Symbol">))</a>
  <a id="17151" href="Examples.Amortized.html#14577" class="Field">_≈_.append</a> <a id="17162" class="Symbol">(</a><a id="17163" href="Examples.Amortized.html#15676" class="Function">array≈SPEC/array</a> <a id="17180" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="17182" class="Symbol">(</a><a id="17183" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17187" href="Examples.Amortized.html#17187" class="Bound">m</a><a id="17188" class="Symbol">)</a> <a id="17190" href="Examples.Amortized.html#17190" class="Bound">h</a><a id="17191" class="Symbol">)</a> <a id="17193" href="Calf.Types.Unit.html#233" class="InductiveConstructor">triv</a> <a id="17198" class="Symbol">=</a>
    <a id="17204" href="Relation.Binary.PropositionalEquality.Core.html#1858" class="Function">Eq.subst₂</a>
      <a id="17220" class="Symbol">(λ</a> <a id="17223" href="Examples.Amortized.html#17223" class="Bound">c</a> <a id="17225" href="Examples.Amortized.html#17225" class="Bound">x</a> <a id="17227" class="Symbol">→</a> <a id="17229" href="Examples.Amortized.html#13630" class="Function">array</a> <a id="17235" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="17237" href="Examples.Amortized.html#17187" class="Bound">m</a> <a id="17239" href="Examples.Amortized.html#14404" class="Record Operator">≈</a> <a id="17241" href="Calf.Step.html#337" class="Function">step</a> <a id="17246" class="Symbol">(</a><a id="17247" href="Examples.Amortized.html#12586" class="Postulate">dynamic-array</a> <a id="17261" href="Calf.Types.Unit.html#253" class="Postulate">unit</a><a id="17265" class="Symbol">)</a> <a id="17267" href="Examples.Amortized.html#17223" class="Bound">c</a> <a id="17269" class="Symbol">(</a><a id="17270" href="Examples.Amortized.html#14073" class="Function">SPEC/array</a> <a id="17281" href="Examples.Amortized.html#17225" class="Bound">x</a><a id="17282" class="Symbol">))</a>
      <a id="17291" class="Symbol">(</a><a id="17292" class="Keyword">let</a>
        <a id="17304" href="Examples.Amortized.html#17304" class="Bound">lemma</a> <a id="17310" class="Symbol">:</a> <a id="17312" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17316" class="Symbol">(</a><a id="17317" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17321" class="Symbol">(</a><a id="17322" href="Examples.Amortized.html#17187" class="Bound">m</a> <a id="17324" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17326" class="Symbol">(</a><a id="17327" href="Examples.Amortized.html#17187" class="Bound">m</a> <a id="17329" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17331" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="17335" class="Symbol">)))</a> <a id="17339" href="Data.Nat.Base.html#1544" class="Datatype Operator">Nat.≤</a> <a id="17345" class="Symbol">(</a><a id="17346" class="Number">2</a> <a id="17348" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="17350" href="Examples.Amortized.html#17180" class="Bound">n</a><a id="17351" class="Symbol">)</a>
        <a id="17361" href="Examples.Amortized.html#17304" class="Bound">lemma</a> <a id="17367" class="Symbol">=</a>
          <a id="17379" class="Keyword">let</a> <a id="17383" class="Keyword">open</a> <a id="17388" href="Data.Nat.Properties.html#13869" class="Module">Nat.≤-Reasoning</a> <a id="17404" class="Keyword">in</a>
          <a id="17417" href="Relation.Binary.Reasoning.Base.Triple.html#3029" class="Function Operator">begin</a>
            <a id="17435" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17439" class="Symbol">(</a><a id="17440" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17444" class="Symbol">(</a><a id="17445" href="Examples.Amortized.html#17187" class="Bound">m</a> <a id="17447" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17449" class="Symbol">(</a><a id="17450" href="Examples.Amortized.html#17187" class="Bound">m</a> <a id="17452" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17454" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="17458" class="Symbol">)))</a>
          <a id="17472" href="Relation.Binary.Reasoning.Base.Triple.html#4889" class="Function">≡˘⟨</a> <a id="17476" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="17484" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17488" class="Symbol">(</a><a id="17489" href="Data.Nat.Properties.html#14245" class="Function">Nat.+-suc</a> <a id="17499" href="Examples.Amortized.html#17187" class="Bound">m</a> <a id="17501" class="Symbol">(</a><a id="17502" href="Examples.Amortized.html#17187" class="Bound">m</a> <a id="17504" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17506" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="17510" class="Symbol">))</a> <a id="17513" href="Relation.Binary.Reasoning.Base.Triple.html#4889" class="Function">⟩</a>
            <a id="17527" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17531" href="Examples.Amortized.html#17187" class="Bound">m</a> <a id="17533" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17535" class="Symbol">(</a><a id="17536" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17540" href="Examples.Amortized.html#17187" class="Bound">m</a> <a id="17542" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17544" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="17548" class="Symbol">)</a>
          <a id="17560" href="Relation.Binary.Reasoning.Base.Triple.html#3764" class="Function">≤⟨</a> <a id="17563" href="Data.Nat.Properties.html#18752" class="Function">Nat.+-mono-≤</a> <a id="17576" href="Examples.Amortized.html#17190" class="Bound">h</a> <a id="17578" class="Symbol">(</a><a id="17579" href="Data.Nat.Properties.html#18908" class="Function">Nat.+-monoˡ-≤</a> <a id="17593" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a> <a id="17598" href="Examples.Amortized.html#17190" class="Bound">h</a><a id="17599" class="Symbol">)</a> <a id="17601" href="Relation.Binary.Reasoning.Base.Triple.html#3764" class="Function">⟩</a>
            <a id="17615" href="Data.Nat.PredExp2.html#354" class="Function Operator">pred[2^</a> <a id="17623" href="Data.Nat.Base.html#3280" class="Function">pred</a> <a id="17628" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="17630" href="Data.Nat.PredExp2.html#354" class="Function Operator">]</a> <a id="17632" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17634" class="Symbol">(</a><a id="17635" href="Data.Nat.PredExp2.html#354" class="Function Operator">pred[2^</a> <a id="17643" href="Data.Nat.Base.html#3280" class="Function">pred</a> <a id="17648" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="17650" href="Data.Nat.PredExp2.html#354" class="Function Operator">]</a> <a id="17652" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17654" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="17658" class="Symbol">)</a>
          <a id="17670" href="Relation.Binary.Reasoning.Base.Triple.html#4537" class="Function">≡⟨</a> <a id="17673" href="Data.Nat.Properties.html#51101" class="Function">Nat.*-distribˡ-∸</a> <a id="17690" class="Number">2</a> <a id="17692" class="Symbol">(</a><a id="17693" class="Number">2</a> <a id="17695" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="17697" href="Data.Nat.Base.html#3280" class="Function">pred</a> <a id="17702" href="Examples.Amortized.html#17180" class="Bound">n</a><a id="17703" class="Symbol">)</a> <a id="17705" class="Number">1</a> <a id="17707" href="Relation.Binary.Reasoning.Base.Triple.html#4537" class="Function">⟩</a>
            <a id="17721" class="Number">2</a> <a id="17723" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="17725" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="17729" class="Symbol">(</a><a id="17730" href="Data.Nat.Base.html#3280" class="Function">pred</a> <a id="17735" href="Examples.Amortized.html#17180" class="Bound">n</a><a id="17736" class="Symbol">)</a> <a id="17738" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="17740" class="Number">2</a>
          <a id="17752" href="Relation.Binary.Reasoning.Base.Triple.html#3764" class="Function">≤⟨</a> <a id="17755" href="Examples.Amortized.html#15508" class="Function">2^suc[pred[n]]</a> <a id="17770" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="17772" href="Relation.Binary.Reasoning.Base.Triple.html#3764" class="Function">⟩</a>
            <a id="17786" class="Number">2</a> <a id="17788" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="17790" href="Examples.Amortized.html#17180" class="Bound">n</a>
          <a id="17802" href="Relation.Binary.Reasoning.Base.Triple.html#5138" class="Function Operator">∎</a>
      <a id="17810" class="Keyword">in</a>
      <a id="17819" class="Keyword">let</a> <a id="17823" class="Keyword">open</a> <a id="17828" href="Relation.Binary.PropositionalEquality.Core.html#2731" class="Module">≡-Reasoning</a> <a id="17840" class="Keyword">in</a>
      <a id="17849" href="Relation.Binary.PropositionalEquality.Core.html#2829" class="Function Operator">begin</a>
        <a id="17863" class="Number">2</a> <a id="17865" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="17867" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="17869" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="17871" class="Number">2</a> <a id="17873" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="17875" href="Examples.Amortized.html#17187" class="Bound">m</a>
      <a id="17883" href="Relation.Binary.PropositionalEquality.Core.html#3033" class="Function">≡˘⟨</a> <a id="17887" href="Data.Nat.Properties.html#50430" class="Function">Nat.[m+n]∸[m+o]≡n∸o</a> <a id="17907" class="Number">2</a> <a id="17909" class="Symbol">(</a><a id="17910" class="Number">2</a> <a id="17912" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="17914" href="Examples.Amortized.html#17180" class="Bound">n</a><a id="17915" class="Symbol">)</a> <a id="17917" class="Symbol">(</a><a id="17918" class="Number">2</a> <a id="17920" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="17922" href="Examples.Amortized.html#17187" class="Bound">m</a><a id="17923" class="Symbol">)</a> <a id="17925" href="Relation.Binary.PropositionalEquality.Core.html#3033" class="Function">⟩</a>
        <a id="17935" class="Symbol">(</a><a id="17936" class="Number">2</a> <a id="17938" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17940" class="Number">2</a> <a id="17942" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="17944" href="Examples.Amortized.html#17180" class="Bound">n</a><a id="17945" class="Symbol">)</a> <a id="17947" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="17949" class="Symbol">(</a><a id="17950" class="Number">2</a> <a id="17952" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="17954" class="Number">2</a> <a id="17956" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="17958" href="Examples.Amortized.html#17187" class="Bound">m</a><a id="17959" class="Symbol">)</a>
      <a id="17967" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">≡⟨</a> <a id="17970" href="Data.Nat.Properties.html#49003" class="Function">Nat.+-∸-assoc</a> <a id="17984" class="Number">2</a> <a id="17986" href="Examples.Amortized.html#17304" class="Bound">lemma</a> <a id="17992" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">⟩</a>
        <a id="18002" class="Number">2</a> <a id="18004" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="18006" class="Symbol">(</a><a id="18007" class="Number">2</a> <a id="18009" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="18011" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="18013" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="18015" class="Symbol">(</a><a id="18016" class="Number">2</a> <a id="18018" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="18020" class="Number">2</a> <a id="18022" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="18024" href="Examples.Amortized.html#17187" class="Bound">m</a><a id="18025" class="Symbol">))</a>
      <a id="18034" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">≡⟨</a> <a id="18037" href="Data.Nat.Properties.html#14786" class="Function">Nat.+-comm</a> <a id="18048" class="Number">2</a> <a id="18050" class="Symbol">(</a><a id="18051" class="Number">2</a> <a id="18053" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="18055" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="18057" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="18059" class="Symbol">(</a><a id="18060" class="Number">2</a> <a id="18062" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="18064" class="Number">2</a> <a id="18066" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="18068" href="Examples.Amortized.html#17187" class="Bound">m</a><a id="18069" class="Symbol">))</a> <a id="18072" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">⟩</a>
        <a id="18082" class="Number">2</a> <a id="18084" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="18086" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="18088" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="18090" class="Symbol">(</a><a id="18091" class="Number">2</a> <a id="18093" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="18095" class="Number">2</a> <a id="18097" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="18099" href="Examples.Amortized.html#17187" class="Bound">m</a><a id="18100" class="Symbol">)</a> <a id="18102" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="18104" class="Number">2</a>
      <a id="18112" href="Relation.Binary.PropositionalEquality.Core.html#3033" class="Function">≡˘⟨</a> <a id="18116" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="18124" class="Symbol">(λ</a> <a id="18127" href="Examples.Amortized.html#18127" class="Bound">x</a> <a id="18129" class="Symbol">→</a> <a id="18131" class="Number">2</a> <a id="18133" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="18135" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="18137" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="18139" href="Examples.Amortized.html#18127" class="Bound">x</a> <a id="18141" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="18143" class="Number">2</a><a id="18144" class="Symbol">)</a> <a id="18146" class="Symbol">(</a><a id="18147" href="Data.Nat.Properties.html#21851" class="Function">Nat.*-distribˡ-+</a> <a id="18164" class="Number">2</a> <a id="18166" class="Number">1</a> <a id="18168" href="Examples.Amortized.html#17187" class="Bound">m</a><a id="18169" class="Symbol">)</a> <a id="18171" href="Relation.Binary.PropositionalEquality.Core.html#3033" class="Function">⟩</a>
        <a id="18181" class="Number">2</a> <a id="18183" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="18185" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="18187" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="18189" class="Number">2</a> <a id="18191" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="18193" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="18197" href="Examples.Amortized.html#17187" class="Bound">m</a> <a id="18199" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="18201" class="Number">2</a>
      <a id="18209" href="Relation.Binary.PropositionalEquality.Core.html#3128" class="Function Operator">∎</a><a id="18210" class="Symbol">)</a>
      <a id="18218" class="Symbol">(</a><a id="18219" class="Keyword">let</a> <a id="18223" class="Keyword">open</a> <a id="18228" href="Relation.Binary.PropositionalEquality.Core.html#2731" class="Module">≡-Reasoning</a> <a id="18240" class="Keyword">in</a>
      <a id="18249" href="Relation.Binary.PropositionalEquality.Core.html#2829" class="Function Operator">begin</a>
        <a id="18263" class="Number">2</a> <a id="18265" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="18267" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="18269" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="18271" href="Examples.Amortized.html#17187" class="Bound">m</a>
      <a id="18279" href="Relation.Binary.PropositionalEquality.Core.html#3033" class="Function">≡˘⟨</a> <a id="18283" href="Data.Nat.Properties.html#50430" class="Function">Nat.[m+n]∸[m+o]≡n∸o</a> <a id="18303" class="Number">1</a> <a id="18305" class="Symbol">(</a><a id="18306" class="Number">2</a> <a id="18308" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="18310" href="Examples.Amortized.html#17180" class="Bound">n</a><a id="18311" class="Symbol">)</a> <a id="18313" href="Examples.Amortized.html#17187" class="Bound">m</a> <a id="18315" href="Relation.Binary.PropositionalEquality.Core.html#3033" class="Function">⟩</a>
        <a id="18325" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="18329" class="Symbol">(</a><a id="18330" class="Number">2</a> <a id="18332" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="18334" href="Examples.Amortized.html#17180" class="Bound">n</a><a id="18335" class="Symbol">)</a> <a id="18337" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="18339" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="18343" href="Examples.Amortized.html#17187" class="Bound">m</a>
      <a id="18351" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">≡⟨</a>
        <a id="18362" href="Data.Nat.Properties.html#49003" class="Function">Nat.+-∸-assoc</a>
          <a id="18386" class="Number">1</a>
          <a id="18398" class="Symbol">(</a><a id="18399" href="Data.Nat.Properties.html#5111" class="Function">Nat.≤-trans</a> <a id="18411" href="Examples.Amortized.html#17190" class="Bound">h</a> <a id="18413" class="Symbol">(</a><a id="18414" href="Data.Nat.Properties.html#45955" class="Function">Nat.∸-mono</a> <a id="18425" class="Symbol">(</a><a id="18426" href="Examples.Amortized.html#15365" class="Function">2^-mono</a> <a id="18434" class="Symbol">{</a><a id="18435" class="Argument">n</a> <a id="18437" class="Symbol">=</a> <a id="18439" href="Examples.Amortized.html#17180" class="Bound">n</a><a id="18440" class="Symbol">}</a> <a id="18442" href="Data.Nat.Properties.html#52794" class="Function">Nat.pred[n]≤n</a><a id="18455" class="Symbol">)</a> <a id="18457" class="Symbol">(</a><a id="18458" href="Data.Nat.Base.html#1567" class="InductiveConstructor">Nat.z≤n</a> <a id="18466" class="Symbol">{</a><a id="18467" class="Number">1</a><a id="18468" class="Symbol">})))</a>
      <a id="18479" href="Relation.Binary.PropositionalEquality.Core.html#2946" class="Function">⟩</a>
        <a id="18489" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="18493" class="Symbol">(</a><a id="18494" class="Number">2</a> <a id="18496" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="18498" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="18500" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="18502" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="18506" href="Examples.Amortized.html#17187" class="Bound">m</a><a id="18507" class="Symbol">)</a>
      <a id="18515" href="Relation.Binary.PropositionalEquality.Core.html#3128" class="Function Operator">∎</a><a id="18516" class="Symbol">)</a>
      <a id="18524" class="Symbol">(</a><a id="18525" href="Examples.Amortized.html#15676" class="Function">array≈SPEC/array</a> <a id="18542" href="Examples.Amortized.html#17180" class="Bound">n</a> <a id="18544" href="Examples.Amortized.html#17187" class="Bound">m</a> <a id="18546" class="Symbol">(</a><a id="18547" href="Data.Nat.Properties.html#8215" class="Function">Nat.&lt;⇒≤</a> <a id="18555" href="Examples.Amortized.html#17190" class="Bound">h</a><a id="18556" class="Symbol">))</a>
  <a id="18561" href="Examples.Amortized.html#14675" class="Field">_≈_.get</a> <a id="18569" class="Symbol">(</a><a id="18570" href="Examples.Amortized.html#15676" class="Function">array≈SPEC/array</a> <a id="18587" href="Examples.Amortized.html#18587" class="Bound">n</a> <a id="18589" href="Examples.Amortized.html#18589" class="Bound">m</a> <a id="18591" href="Examples.Amortized.html#18591" class="Bound">h</a><a id="18592" class="Symbol">)</a> <a id="18594" href="Examples.Amortized.html#18594" class="Bound">i</a> <a id="18596" class="Keyword">with</a> <a id="18601" href="Examples.Amortized.html#18594" class="Bound">i</a> <a id="18603" href="Data.Nat.Properties.html#10652" class="Function Operator">Nat.&lt;?</a> <a id="18610" class="Number">2</a> <a id="18612" href="Data.Nat.Base.html#4551" class="Function Operator">^</a> <a id="18614" href="Examples.Amortized.html#18587" class="Bound">n</a> <a id="18616" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="18618" href="Examples.Amortized.html#18589" class="Bound">m</a>
  <a id="18622" class="Symbol">...</a> <a id="18626" class="Symbol">|</a> <a id="18628" href="Relation.Nullary.Decidable.Core.html#1659" class="InductiveConstructor">no</a> <a id="18631" href="Examples.Amortized.html#18631" class="Bound">¬p</a> <a id="18634" class="Symbol">=</a> <a id="18636" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="18641" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="18643" href="Examples.Amortized.html#15676" class="Function">array≈SPEC/array</a> <a id="18660" class="Bound">n</a> <a id="18662" class="Bound">m</a> <a id="18664" class="Bound">h</a>
  <a id="18668" class="Symbol">...</a> <a id="18672" class="Symbol">|</a> <a id="18674" href="Relation.Nullary.Decidable.Core.html#1622" class="InductiveConstructor">yes</a> <a id="18678" href="Examples.Amortized.html#18678" class="Bound">p</a> <a id="18680" class="Symbol">=</a> <a id="18682" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="18687" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="18689" href="Examples.Amortized.html#15676" class="Function">array≈SPEC/array</a> <a id="18706" class="Bound">n</a> <a id="18708" class="Bound">m</a> <a id="18710" class="Bound">h</a>
</pre></body></html>