<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Examples.Amortized.Simple</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--rewriting</a> <a id="25" class="Symbol">#-}</a>

<a id="30" class="Keyword">module</a> <a id="37" href="Examples.Amortized.Simple.html" class="Module">Examples.Amortized.Simple</a> <a id="63" class="Keyword">where</a>

<a id="70" class="Keyword">open</a> <a id="75" class="Keyword">import</a> <a id="82" href="Algebra.Cost.html" class="Module">Algebra.Cost</a>

<a id="costMonoid"></a><a id="96" href="Examples.Amortized.Simple.html#96" class="Function">costMonoid</a> <a id="107" class="Symbol">=</a> <a id="109" href="Algebra.Cost.Instances.html#357" class="Function">ℕ-CostMonoid</a>
<a id="122" class="Keyword">open</a> <a id="127" href="Algebra.Cost.Bundles.html#322" class="Module">CostMonoid</a> <a id="138" href="Examples.Amortized.Simple.html#96" class="Function">costMonoid</a> <a id="149" class="Keyword">using</a> <a id="155" class="Symbol">(</a><a id="156" href="Algebra.Cost.Bundles.html#374" class="Field">ℂ</a><a id="157" class="Symbol">)</a>

<a id="160" class="Keyword">open</a> <a id="165" class="Keyword">import</a> <a id="172" href="Level.html" class="Module">Level</a> <a id="178" class="Keyword">using</a> <a id="184" class="Symbol">(</a><a id="185" href="Level.html#521" class="Function">0ℓ</a><a id="187" class="Symbol">)</a>

<a id="190" class="Keyword">open</a> <a id="195" class="Keyword">import</a> <a id="202" href="Calf.html" class="Module">Calf</a> <a id="207" href="Examples.Amortized.Simple.html#96" class="Function">costMonoid</a>
<a id="218" class="Keyword">open</a> <a id="223" class="Keyword">import</a> <a id="230" href="Calf.Data.Product.html" class="Module">Calf.Data.Product</a>
<a id="248" class="Keyword">open</a> <a id="253" class="Keyword">import</a> <a id="260" href="Calf.Data.Bool.html" class="Module">Calf.Data.Bool</a>
<a id="275" class="Keyword">open</a> <a id="280" class="Keyword">import</a> <a id="287" href="Calf.Data.Nat.html" class="Module">Calf.Data.Nat</a> <a id="301" class="Symbol">as</a> <a id="304" class="Module">Nat</a> <a id="308" class="Keyword">using</a> <a id="314" class="Symbol">(</a><a id="315" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="316" class="Symbol">;</a> <a id="318" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="322" class="Symbol">;</a> <a id="324" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a><a id="327" class="Symbol">;</a> <a id="329" href="Calf.Data.Nat.html#135" class="Function">nat</a><a id="332" class="Symbol">;</a> <a id="334" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a><a id="337" class="Symbol">;</a> <a id="339" href="Data.Nat.Base.html#3211" class="Primitive Operator">_∸_</a><a id="342" class="Symbol">;</a> <a id="344" href="Data.Nat.Base.html#3280" class="Function">pred</a><a id="348" class="Symbol">;</a> <a id="350" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a><a id="353" class="Symbol">;</a> <a id="355" href="Data.Nat.Base.html#4551" class="Function Operator">_^_</a><a id="358" class="Symbol">;</a> <a id="360" href="Data.Nat.Base.html#1933" class="Function Operator">_&gt;_</a><a id="363" class="Symbol">)</a>
<a id="365" class="Keyword">open</a> <a id="370" class="Keyword">import</a> <a id="377" href="Calf.Data.Equality.html" class="Module">Calf.Data.Equality</a> <a id="396" class="Symbol">as</a> <a id="399" class="Module">Eq</a> <a id="402" class="Keyword">using</a> <a id="408" class="Symbol">(</a><a id="409" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="412" class="Symbol">;</a> <a id="414" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="418" class="Symbol">;</a> <a id="420" href="Calf.Data.Equality.html#169" class="Function Operator">_≡⁺_</a><a id="424" class="Symbol">;</a> <a id="426" href="Calf.Data.Equality.html#240" class="Function">≡⁺-syntax</a><a id="435" class="Symbol">;</a> <a id="437" href="Calf.Data.Equality.html#353" class="Postulate Operator">_≡⁻_</a><a id="441" class="Symbol">;</a> <a id="443" href="Calf.Data.Equality.html#506" class="Function">≡⁻-syntax</a><a id="452" class="Symbol">;</a> <a id="454" class="Keyword">module</a> <a id="461" href="Relation.Binary.PropositionalEquality.Core.html#2731" class="Module">≡-Reasoning</a><a id="472" class="Symbol">)</a>

<a id="475" class="Keyword">open</a> <a id="480" class="Keyword">import</a> <a id="487" href="Examples.Amortized.Core.html" class="Module">Examples.Amortized.Core</a>


<a id="513" class="Keyword">postulate</a>
  <a id="simple"></a><a id="525" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a> <a id="532" class="Symbol">:</a> <a id="534" href="Calf.CBPV.html#386" class="Function">tp⁻</a>
<a id="538" class="Keyword">record</a> <a id="Simple"></a><a id="545" href="Examples.Amortized.Simple.html#545" class="Record">Simple</a> <a id="552" class="Symbol">:</a> <a id="554" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="558" class="Keyword">where</a>
  <a id="566" class="Keyword">coinductive</a>
  <a id="580" class="Keyword">field</a>
    <a id="Simple.quit"></a><a id="590" href="Examples.Amortized.Simple.html#590" class="Field">quit</a> <a id="595" class="Symbol">:</a> <a id="597" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="601" class="Symbol">(</a><a id="602" href="Calf.CBPV.html#413" class="Function">F</a> <a id="604" href="Calf.Data.Product.html#342" class="Function">unit</a><a id="608" class="Symbol">)</a>
    <a id="Simple.next"></a><a id="614" href="Examples.Amortized.Simple.html#614" class="Field">next</a> <a id="619" class="Symbol">:</a> <a id="621" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="625" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a>
<a id="632" class="Keyword">postulate</a>
  <a id="simple/decode"></a><a id="644" href="Examples.Amortized.Simple.html#644" class="Postulate">simple/decode</a> <a id="658" class="Symbol">:</a> <a id="660" href="Calf.CBPV.html#396" class="Function">val</a> <a id="664" class="Symbol">(</a><a id="665" href="Calf.CBPV.html#429" class="Function">U</a> <a id="667" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a><a id="673" class="Symbol">)</a> <a id="675" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="677" href="Examples.Amortized.Simple.html#545" class="Record">Simple</a>
  <a id="686" class="Symbol">{-#</a> <a id="690" class="Keyword">REWRITE</a> <a id="698" href="Examples.Amortized.Simple.html#644" class="Postulate">simple/decode</a> <a id="712" class="Symbol">#-}</a>

  <a id="quit/step"></a><a id="719" href="Examples.Amortized.Simple.html#719" class="Postulate">quit/step</a> <a id="729" class="Symbol">:</a> <a id="731" class="Symbol">∀</a> <a id="733" class="Symbol">{</a><a id="734" href="Examples.Amortized.Simple.html#734" class="Bound">c</a> <a id="736" href="Examples.Amortized.Simple.html#736" class="Bound">e</a><a id="737" class="Symbol">}</a> <a id="739" class="Symbol">→</a> <a id="741" href="Examples.Amortized.Simple.html#590" class="Field">Simple.quit</a> <a id="753" class="Symbol">(</a><a id="754" href="Calf.Step.html#440" class="Function">step</a> <a id="759" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a> <a id="766" href="Examples.Amortized.Simple.html#734" class="Bound">c</a> <a id="768" href="Examples.Amortized.Simple.html#736" class="Bound">e</a><a id="769" class="Symbol">)</a> <a id="771" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="773" href="Calf.Step.html#440" class="Function">step</a> <a id="778" class="Symbol">(</a><a id="779" href="Calf.CBPV.html#413" class="Function">F</a> <a id="781" href="Calf.Data.Product.html#342" class="Function">unit</a><a id="785" class="Symbol">)</a> <a id="787" href="Examples.Amortized.Simple.html#734" class="Bound">c</a> <a id="789" class="Symbol">(</a><a id="790" href="Examples.Amortized.Simple.html#590" class="Field">Simple.quit</a> <a id="802" href="Examples.Amortized.Simple.html#736" class="Bound">e</a><a id="803" class="Symbol">)</a>
  <a id="next/step"></a><a id="807" href="Examples.Amortized.Simple.html#807" class="Postulate">next/step</a> <a id="817" class="Symbol">:</a> <a id="819" class="Symbol">∀</a> <a id="821" class="Symbol">{</a><a id="822" href="Examples.Amortized.Simple.html#822" class="Bound">c</a> <a id="824" href="Examples.Amortized.Simple.html#824" class="Bound">e</a><a id="825" class="Symbol">}</a> <a id="827" class="Symbol">→</a> <a id="829" href="Examples.Amortized.Simple.html#614" class="Field">Simple.next</a> <a id="841" class="Symbol">(</a><a id="842" href="Calf.Step.html#440" class="Function">step</a> <a id="847" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a> <a id="854" href="Examples.Amortized.Simple.html#822" class="Bound">c</a> <a id="856" href="Examples.Amortized.Simple.html#824" class="Bound">e</a><a id="857" class="Symbol">)</a> <a id="859" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="861" href="Calf.Step.html#440" class="Function">step</a> <a id="866" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a>   <a id="875" href="Examples.Amortized.Simple.html#822" class="Bound">c</a> <a id="877" class="Symbol">(</a><a id="878" href="Examples.Amortized.Simple.html#614" class="Field">Simple.next</a> <a id="890" href="Examples.Amortized.Simple.html#824" class="Bound">e</a><a id="891" class="Symbol">)</a>
  <a id="895" class="Symbol">{-#</a> <a id="899" class="Keyword">REWRITE</a> <a id="907" href="Examples.Amortized.Simple.html#719" class="Postulate">quit/step</a> <a id="917" href="Examples.Amortized.Simple.html#807" class="Postulate">next/step</a> <a id="927" class="Symbol">#-}</a>

<a id="932" class="Symbol">{-#</a> <a id="936" class="Keyword">TERMINATING</a> <a id="948" class="Symbol">#-}</a>
<a id="every"></a><a id="952" href="Examples.Amortized.Simple.html#952" class="Function">every</a> <a id="958" class="Symbol">:</a> <a id="960" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="964" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a>
<a id="971" href="Examples.Amortized.Simple.html#590" class="Field">Simple.quit</a> <a id="983" href="Examples.Amortized.Simple.html#952" class="Function">every</a> <a id="989" class="Symbol">=</a> <a id="991" href="Calf.CBPV.html#936" class="Function">ret</a> <a id="995" href="Agda.Builtin.Unit.html#195" class="InductiveConstructor">triv</a>
<a id="1000" href="Examples.Amortized.Simple.html#614" class="Field">Simple.next</a> <a id="1012" href="Examples.Amortized.Simple.html#952" class="Function">every</a> <a id="1018" class="Symbol">=</a> <a id="1020" href="Calf.Step.html#440" class="Function">step</a> <a id="1025" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a> <a id="1032" class="Number">1</a> <a id="1034" href="Examples.Amortized.Simple.html#952" class="Function">every</a>

<a id="Φ"></a><a id="1041" href="Examples.Amortized.Simple.html#1041" class="Function">Φ</a> <a id="1043" class="Symbol">:</a> <a id="1045" href="Calf.CBPV.html#396" class="Function">val</a> <a id="1049" href="Calf.Data.Bool.html#137" class="Function">bool</a> <a id="1054" class="Symbol">→</a> <a id="1056" href="Algebra.Cost.Bundles.html#374" class="Function">ℂ</a>
<a id="1058" href="Examples.Amortized.Simple.html#1041" class="Function">Φ</a> <a id="1060" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a> <a id="1066" class="Symbol">=</a> <a id="1068" class="Number">1</a>
<a id="1070" href="Examples.Amortized.Simple.html#1041" class="Function">Φ</a> <a id="1072" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>  <a id="1078" class="Symbol">=</a> <a id="1080" class="Number">0</a>

<a id="1083" class="Symbol">{-#</a> <a id="1087" class="Keyword">TERMINATING</a> <a id="1099" class="Symbol">#-}</a>
<a id="alternating"></a><a id="1103" href="Examples.Amortized.Simple.html#1103" class="Function">alternating</a> <a id="1115" class="Symbol">:</a> <a id="1117" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="1121" class="Symbol">(</a><a id="1122" href="Calf.CBPV.html#1327" class="Function">Π</a> <a id="1124" href="Calf.Data.Bool.html#137" class="Function">bool</a> <a id="1129" class="Symbol">λ</a> <a id="1131" href="Examples.Amortized.Simple.html#1131" class="Bound">_</a> <a id="1133" class="Symbol">→</a> <a id="1135" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a><a id="1141" class="Symbol">)</a>
<a id="1143" href="Examples.Amortized.Simple.html#590" class="Field">Simple.quit</a> <a id="1155" class="Symbol">(</a><a id="1156" href="Examples.Amortized.Simple.html#1103" class="Function">alternating</a> <a id="1168" href="Examples.Amortized.Simple.html#1168" class="Bound">b</a><a id="1169" class="Symbol">)</a> <a id="1171" class="Symbol">=</a> <a id="1173" href="Calf.Step.html#440" class="Function">step</a> <a id="1178" class="Symbol">(</a><a id="1179" href="Calf.CBPV.html#413" class="Function">F</a> <a id="1181" href="Calf.Data.Product.html#342" class="Function">unit</a><a id="1185" class="Symbol">)</a> <a id="1187" class="Symbol">(</a><a id="1188" href="Examples.Amortized.Simple.html#1041" class="Function">Φ</a> <a id="1190" href="Examples.Amortized.Simple.html#1168" class="Bound">b</a><a id="1191" class="Symbol">)</a> <a id="1193" class="Symbol">(</a><a id="1194" href="Calf.CBPV.html#936" class="Function">ret</a> <a id="1198" href="Agda.Builtin.Unit.html#195" class="InductiveConstructor">triv</a><a id="1202" class="Symbol">)</a>
<a id="1204" href="Examples.Amortized.Simple.html#614" class="Field">Simple.next</a> <a id="1216" class="Symbol">(</a><a id="1217" href="Examples.Amortized.Simple.html#1103" class="Function">alternating</a> <a id="1229" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="1234" class="Symbol">)</a> <a id="1236" class="Symbol">=</a> <a id="1238" href="Calf.Step.html#440" class="Function">step</a> <a id="1243" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a> <a id="1250" class="Number">2</a> <a id="1252" class="Symbol">(</a><a id="1253" href="Examples.Amortized.Simple.html#1103" class="Function">alternating</a> <a id="1265" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="1269" class="Symbol">)</a>
<a id="1271" href="Examples.Amortized.Simple.html#614" class="Field">Simple.next</a> <a id="1283" class="Symbol">(</a><a id="1284" href="Examples.Amortized.Simple.html#1103" class="Function">alternating</a> <a id="1296" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="1301" class="Symbol">)</a> <a id="1303" class="Symbol">=</a> <a id="1305" href="Examples.Amortized.Simple.html#1103" class="Function">alternating</a> <a id="1317" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>

<a id="1324" class="Keyword">record</a> <a id="_≈_"></a><a id="1331" href="Examples.Amortized.Simple.html#1331" class="Record Operator">_≈_</a> <a id="1335" class="Symbol">(</a><a id="1336" href="Examples.Amortized.Simple.html#1336" class="Bound">s₁</a> <a id="1339" href="Examples.Amortized.Simple.html#1339" class="Bound">s₂</a> <a id="1342" class="Symbol">:</a> <a id="1344" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="1348" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a><a id="1354" class="Symbol">)</a> <a id="1356" class="Symbol">:</a> <a id="1358" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1362" class="Keyword">where</a>
  <a id="1370" class="Keyword">coinductive</a>
  <a id="1384" class="Keyword">field</a>
    <a id="_≈_.quit"></a><a id="1394" href="Examples.Amortized.Simple.html#1394" class="Field">quit</a> <a id="1399" class="Symbol">:</a> <a id="1401" href="Examples.Amortized.Simple.html#590" class="Field">Simple.quit</a> <a id="1413" href="Examples.Amortized.Simple.html#1336" class="Bound">s₁</a> <a id="1416" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1418" href="Examples.Amortized.Simple.html#590" class="Field">Simple.quit</a> <a id="1430" href="Examples.Amortized.Simple.html#1339" class="Bound">s₂</a>
    <a id="_≈_.next"></a><a id="1437" href="Examples.Amortized.Simple.html#1437" class="Field">next</a> <a id="1442" class="Symbol">:</a> <a id="1444" href="Examples.Amortized.Simple.html#614" class="Field">Simple.next</a> <a id="1456" href="Examples.Amortized.Simple.html#1336" class="Bound">s₁</a> <a id="1459" href="Examples.Amortized.Simple.html#1331" class="Record Operator">≈</a> <a id="1461" href="Examples.Amortized.Simple.html#614" class="Field">Simple.next</a> <a id="1473" href="Examples.Amortized.Simple.html#1339" class="Bound">s₂</a>
<a id="1476" class="Keyword">postulate</a>
  <a id="_≈⁻_"></a><a id="1488" href="Examples.Amortized.Simple.html#1488" class="Postulate Operator">_≈⁻_</a> <a id="1493" class="Symbol">:</a> <a id="1495" class="Symbol">(</a><a id="1496" href="Examples.Amortized.Simple.html#1496" class="Bound">s₁</a> <a id="1499" href="Examples.Amortized.Simple.html#1499" class="Bound">s₂</a> <a id="1502" class="Symbol">:</a> <a id="1504" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="1508" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a><a id="1514" class="Symbol">)</a> <a id="1516" class="Symbol">→</a> <a id="1518" href="Calf.CBPV.html#386" class="Function">tp⁻</a>
  <a id="≈⁻/decode"></a><a id="1524" href="Examples.Amortized.Simple.html#1524" class="Postulate">≈⁻/decode</a> <a id="1534" class="Symbol">:</a> <a id="1536" class="Symbol">{</a><a id="1537" href="Examples.Amortized.Simple.html#1537" class="Bound">s₁</a> <a id="1540" href="Examples.Amortized.Simple.html#1540" class="Bound">s₂</a> <a id="1543" class="Symbol">:</a> <a id="1545" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="1549" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a><a id="1555" class="Symbol">}</a> <a id="1557" class="Symbol">→</a> <a id="1559" href="Calf.CBPV.html#396" class="Function">val</a> <a id="1563" class="Symbol">(</a><a id="1564" href="Calf.CBPV.html#429" class="Function">U</a> <a id="1566" class="Symbol">(</a><a id="1567" href="Examples.Amortized.Simple.html#1537" class="Bound">s₁</a> <a id="1570" href="Examples.Amortized.Simple.html#1488" class="Postulate Operator">≈⁻</a> <a id="1573" href="Examples.Amortized.Simple.html#1540" class="Bound">s₂</a><a id="1575" class="Symbol">))</a> <a id="1578" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1580" href="Examples.Amortized.Simple.html#1537" class="Bound">s₁</a> <a id="1583" href="Examples.Amortized.Simple.html#1331" class="Record Operator">≈</a> <a id="1585" href="Examples.Amortized.Simple.html#1540" class="Bound">s₂</a>
  <a id="1590" class="Symbol">{-#</a> <a id="1594" class="Keyword">REWRITE</a> <a id="1602" href="Examples.Amortized.Simple.html#1524" class="Postulate">≈⁻/decode</a> <a id="1612" class="Symbol">#-}</a>

<a id="≈-cong"></a><a id="1617" href="Examples.Amortized.Simple.html#1617" class="Function">≈-cong</a> <a id="1624" class="Symbol">:</a> <a id="1626" class="Symbol">(</a><a id="1627" href="Examples.Amortized.Simple.html#1627" class="Bound">c</a> <a id="1629" class="Symbol">:</a> <a id="1631" href="Algebra.Cost.Bundles.html#374" class="Function">ℂ</a><a id="1632" class="Symbol">)</a> <a id="1634" class="Symbol">{</a><a id="1635" href="Examples.Amortized.Simple.html#1635" class="Bound">x</a> <a id="1637" href="Examples.Amortized.Simple.html#1637" class="Bound">y</a> <a id="1639" class="Symbol">:</a> <a id="1641" href="Examples.Amortized.Simple.html#545" class="Record">Simple</a><a id="1647" class="Symbol">}</a> <a id="1649" class="Symbol">→</a> <a id="1651" href="Examples.Amortized.Simple.html#1635" class="Bound">x</a> <a id="1653" href="Examples.Amortized.Simple.html#1331" class="Record Operator">≈</a> <a id="1655" href="Examples.Amortized.Simple.html#1637" class="Bound">y</a> <a id="1657" class="Symbol">→</a> <a id="1659" href="Calf.Step.html#440" class="Function">step</a> <a id="1664" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a> <a id="1671" href="Examples.Amortized.Simple.html#1627" class="Bound">c</a> <a id="1673" href="Examples.Amortized.Simple.html#1635" class="Bound">x</a> <a id="1675" href="Examples.Amortized.Simple.html#1331" class="Record Operator">≈</a> <a id="1677" href="Calf.Step.html#440" class="Function">step</a> <a id="1682" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a> <a id="1689" href="Examples.Amortized.Simple.html#1627" class="Bound">c</a> <a id="1691" href="Examples.Amortized.Simple.html#1637" class="Bound">y</a>
<a id="1693" href="Examples.Amortized.Simple.html#1394" class="Field">_≈_.quit</a> <a id="1702" class="Symbol">(</a><a id="1703" href="Examples.Amortized.Simple.html#1617" class="Function">≈-cong</a> <a id="1710" href="Examples.Amortized.Simple.html#1710" class="Bound">c</a> <a id="1712" href="Examples.Amortized.Simple.html#1712" class="Bound">h</a><a id="1713" class="Symbol">)</a> <a id="1715" class="Symbol">=</a> <a id="1717" href="Relation.Binary.PropositionalEquality.Core.html#1153" class="Function">Eq.cong</a> <a id="1725" class="Symbol">(</a><a id="1726" href="Calf.Step.html#440" class="Function">step</a> <a id="1731" class="Symbol">(</a><a id="1732" href="Calf.CBPV.html#413" class="Function">F</a> <a id="1734" href="Calf.Data.Product.html#342" class="Function">unit</a><a id="1738" class="Symbol">)</a> <a id="1740" href="Examples.Amortized.Simple.html#1710" class="Bound">c</a><a id="1741" class="Symbol">)</a> <a id="1743" class="Symbol">(</a><a id="1744" href="Examples.Amortized.Simple.html#1394" class="Field">_≈_.quit</a> <a id="1753" href="Examples.Amortized.Simple.html#1712" class="Bound">h</a><a id="1754" class="Symbol">)</a>
<a id="1756" href="Examples.Amortized.Simple.html#1437" class="Field">_≈_.next</a> <a id="1765" class="Symbol">(</a><a id="1766" href="Examples.Amortized.Simple.html#1617" class="Function">≈-cong</a> <a id="1773" href="Examples.Amortized.Simple.html#1773" class="Bound">c</a> <a id="1775" href="Examples.Amortized.Simple.html#1775" class="Bound">h</a><a id="1776" class="Symbol">)</a> <a id="1778" class="Symbol">=</a> <a id="1780" href="Examples.Amortized.Simple.html#1617" class="Function">≈-cong</a> <a id="1787" href="Examples.Amortized.Simple.html#1773" class="Bound">c</a> <a id="1789" class="Symbol">(</a><a id="1790" href="Examples.Amortized.Simple.html#1437" class="Field">_≈_.next</a> <a id="1799" href="Examples.Amortized.Simple.html#1775" class="Bound">h</a><a id="1800" class="Symbol">)</a>

<a id="1803" class="Symbol">{-#</a> <a id="1807" class="Keyword">TERMINATING</a> <a id="1819" class="Symbol">#-}</a>
<a id="every≈alternating"></a><a id="1823" href="Examples.Amortized.Simple.html#1823" class="Function">every≈alternating</a> <a id="1841" class="Symbol">:</a> <a id="1843" class="Symbol">∀</a> <a id="1845" href="Examples.Amortized.Simple.html#1845" class="Bound">b</a> <a id="1847" class="Symbol">→</a> <a id="1849" href="Examples.Amortized.Simple.html#1103" class="Function">alternating</a> <a id="1861" href="Examples.Amortized.Simple.html#1845" class="Bound">b</a> <a id="1863" href="Examples.Amortized.Simple.html#1331" class="Record Operator">≈</a> <a id="1865" href="Calf.Step.html#440" class="Function">step</a> <a id="1870" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a> <a id="1877" class="Symbol">(</a><a id="1878" href="Examples.Amortized.Simple.html#1041" class="Function">Φ</a> <a id="1880" href="Examples.Amortized.Simple.html#1845" class="Bound">b</a><a id="1881" class="Symbol">)</a> <a id="1883" href="Examples.Amortized.Simple.html#952" class="Function">every</a>
<a id="1889" href="Examples.Amortized.Simple.html#1394" class="Field">_≈_.quit</a> <a id="1898" class="Symbol">(</a><a id="1899" href="Examples.Amortized.Simple.html#1823" class="Function">every≈alternating</a> <a id="1917" class="Symbol">_)</a> <a id="1920" class="Symbol">=</a> <a id="1922" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="1927" href="Examples.Amortized.Simple.html#1437" class="Field">_≈_.next</a> <a id="1936" class="Symbol">(</a><a id="1937" href="Examples.Amortized.Simple.html#1823" class="Function">every≈alternating</a> <a id="1955" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="1960" class="Symbol">)</a> <a id="1962" class="Symbol">=</a> <a id="1964" href="Examples.Amortized.Simple.html#1617" class="Function">≈-cong</a> <a id="1971" class="Number">2</a> <a id="1973" class="Symbol">(</a><a id="1974" href="Examples.Amortized.Simple.html#1823" class="Function">every≈alternating</a> <a id="1992" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="1996" class="Symbol">)</a>
<a id="1998" href="Examples.Amortized.Simple.html#1437" class="Field">_≈_.next</a> <a id="2007" class="Symbol">(</a><a id="2008" href="Examples.Amortized.Simple.html#1823" class="Function">every≈alternating</a> <a id="2026" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="2031" class="Symbol">)</a> <a id="2033" class="Symbol">=</a> <a id="2035" href="Examples.Amortized.Simple.html#1823" class="Function">every≈alternating</a> <a id="2053" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>

<a id="simple-program"></a><a id="2060" href="Examples.Amortized.Simple.html#2060" class="Function">simple-program</a> <a id="2075" class="Symbol">:</a> <a id="2077" href="Calf.CBPV.html#376" class="Function">tp⁺</a>
<a id="2081" href="Examples.Amortized.Simple.html#2060" class="Function">simple-program</a> <a id="2096" class="Symbol">=</a> <a id="2098" href="Calf.Data.Nat.html#135" class="Function">nat</a>

<a id="2103" class="Symbol">{-#</a> <a id="2107" class="Keyword">TERMINATING</a> <a id="2119" class="Symbol">#-}</a>
<a id="ψ"></a><a id="2123" href="Examples.Amortized.Simple.html#2123" class="Function">ψ</a> <a id="2125" class="Symbol">:</a> <a id="2127" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="2131" class="Symbol">(</a><a id="2132" href="Calf.CBPV.html#1327" class="Function">Π</a> <a id="2134" href="Examples.Amortized.Simple.html#2060" class="Function">simple-program</a> <a id="2149" class="Symbol">λ</a> <a id="2151" href="Examples.Amortized.Simple.html#2151" class="Bound">_</a> <a id="2153" class="Symbol">→</a> <a id="2155" href="Calf.CBPV.html#1327" class="Function">Π</a> <a id="2157" class="Symbol">(</a><a id="2158" href="Calf.CBPV.html#429" class="Function">U</a> <a id="2160" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a><a id="2166" class="Symbol">)</a> <a id="2168" class="Symbol">λ</a> <a id="2170" href="Examples.Amortized.Simple.html#2170" class="Bound">_</a> <a id="2172" class="Symbol">→</a> <a id="2174" href="Calf.CBPV.html#413" class="Function">F</a> <a id="2176" href="Calf.Data.Product.html#342" class="Function">unit</a><a id="2180" class="Symbol">)</a>
<a id="2182" href="Examples.Amortized.Simple.html#2123" class="Function">ψ</a> <a id="2184" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a>    <a id="2192" href="Examples.Amortized.Simple.html#2192" class="Bound">s</a> <a id="2194" class="Symbol">=</a> <a id="2196" href="Examples.Amortized.Simple.html#590" class="Field">Simple.quit</a> <a id="2208" href="Examples.Amortized.Simple.html#2192" class="Bound">s</a>
<a id="2210" href="Examples.Amortized.Simple.html#2123" class="Function">ψ</a> <a id="2212" class="Symbol">(</a><a id="2213" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="2217" href="Examples.Amortized.Simple.html#2217" class="Bound">n</a><a id="2218" class="Symbol">)</a> <a id="2220" href="Examples.Amortized.Simple.html#2220" class="Bound">s</a> <a id="2222" class="Symbol">=</a> <a id="2224" href="Examples.Amortized.Simple.html#2123" class="Function">ψ</a> <a id="2226" href="Examples.Amortized.Simple.html#2217" class="Bound">n</a> <a id="2228" class="Symbol">(</a><a id="2229" href="Examples.Amortized.Simple.html#614" class="Field">Simple.next</a> <a id="2241" href="Examples.Amortized.Simple.html#2220" class="Bound">s</a><a id="2242" class="Symbol">)</a>

<a id="_≈&#39;_"></a><a id="2245" href="Examples.Amortized.Simple.html#2245" class="Function Operator">_≈&#39;_</a> <a id="2250" class="Symbol">:</a> <a id="2252" class="Symbol">(</a><a id="2253" href="Examples.Amortized.Simple.html#2253" class="Bound">q₁</a> <a id="2256" href="Examples.Amortized.Simple.html#2256" class="Bound">q₂</a> <a id="2259" class="Symbol">:</a> <a id="2261" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="2265" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a><a id="2271" class="Symbol">)</a> <a id="2273" class="Symbol">→</a> <a id="2275" href="Calf.CBPV.html#386" class="Function">tp⁻</a>
<a id="2279" href="Examples.Amortized.Simple.html#2279" class="Bound">s₁</a> <a id="2282" href="Examples.Amortized.Simple.html#2245" class="Function Operator">≈&#39;</a> <a id="2285" href="Examples.Amortized.Simple.html#2285" class="Bound">s₂</a> <a id="2288" class="Symbol">=</a> <a id="2290" href="Calf.CBPV.html#1327" class="Function">Π</a> <a id="2292" href="Examples.Amortized.Simple.html#2060" class="Function">simple-program</a> <a id="2307" class="Symbol">λ</a> <a id="2309" href="Examples.Amortized.Simple.html#2309" class="Bound">p</a> <a id="2311" class="Symbol">→</a> <a id="2313" href="Examples.Amortized.Simple.html#2123" class="Function">ψ</a> <a id="2315" href="Examples.Amortized.Simple.html#2309" class="Bound">p</a> <a id="2317" href="Examples.Amortized.Simple.html#2279" class="Bound">s₁</a> <a id="2320" href="Calf.Data.Equality.html#506" class="Function">≡⁻[</a> <a id="2324" href="Calf.CBPV.html#413" class="Function">F</a> <a id="2326" href="Calf.Data.Product.html#342" class="Function">unit</a> <a id="2331" href="Calf.Data.Equality.html#506" class="Function">]</a> <a id="2333" href="Examples.Amortized.Simple.html#2123" class="Function">ψ</a> <a id="2335" href="Examples.Amortized.Simple.html#2309" class="Bound">p</a> <a id="2337" href="Examples.Amortized.Simple.html#2285" class="Bound">s₂</a>

<a id="2341" class="Symbol">{-#</a> <a id="2345" class="Keyword">TERMINATING</a> <a id="2357" class="Symbol">#-}</a>
<a id="classic-amortization"></a><a id="2361" href="Examples.Amortized.Simple.html#2361" class="Function">classic-amortization</a> <a id="2382" class="Symbol">:</a> <a id="2384" class="Symbol">{</a><a id="2385" href="Examples.Amortized.Simple.html#2385" class="Bound">s₁</a> <a id="2388" href="Examples.Amortized.Simple.html#2388" class="Bound">s₂</a> <a id="2391" class="Symbol">:</a> <a id="2393" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="2397" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a><a id="2403" class="Symbol">}</a> <a id="2405" class="Symbol">→</a> <a id="2407" href="Calf.CBPV.html#396" class="Function">val</a> <a id="2411" class="Symbol">(</a><a id="2412" href="Calf.CBPV.html#429" class="Function">U</a> <a id="2414" class="Symbol">(</a><a id="2415" href="Examples.Amortized.Simple.html#2385" class="Bound">s₁</a> <a id="2418" href="Examples.Amortized.Simple.html#1488" class="Postulate Operator">≈⁻</a> <a id="2421" href="Examples.Amortized.Simple.html#2388" class="Bound">s₂</a><a id="2423" class="Symbol">)</a> <a id="2425" href="Examples.Amortized.Core.html#238" class="Function Operator">⇔</a> <a id="2427" href="Calf.CBPV.html#429" class="Function">U</a> <a id="2429" class="Symbol">(</a><a id="2430" href="Examples.Amortized.Simple.html#2385" class="Bound">s₁</a> <a id="2433" href="Examples.Amortized.Simple.html#2245" class="Function Operator">≈&#39;</a> <a id="2436" href="Examples.Amortized.Simple.html#2388" class="Bound">s₂</a><a id="2438" class="Symbol">))</a>
<a id="2441" href="Examples.Amortized.Simple.html#2361" class="Function">classic-amortization</a> <a id="2462" class="Symbol">=</a> <a id="2464" href="Examples.Amortized.Simple.html#2495" class="Function">forward</a> <a id="2472" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2474" href="Examples.Amortized.Simple.html#2640" class="Function">backward</a>
  <a id="2485" class="Keyword">where</a>
    <a id="2495" href="Examples.Amortized.Simple.html#2495" class="Function">forward</a> <a id="2503" class="Symbol">:</a> <a id="2505" class="Symbol">{</a><a id="2506" href="Examples.Amortized.Simple.html#2506" class="Bound">s₁</a> <a id="2509" href="Examples.Amortized.Simple.html#2509" class="Bound">s₂</a> <a id="2512" class="Symbol">:</a> <a id="2514" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="2518" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a><a id="2524" class="Symbol">}</a> <a id="2526" class="Symbol">→</a> <a id="2528" href="Examples.Amortized.Simple.html#2506" class="Bound">s₁</a> <a id="2531" href="Examples.Amortized.Simple.html#1331" class="Record Operator">≈</a> <a id="2533" href="Examples.Amortized.Simple.html#2509" class="Bound">s₂</a> <a id="2536" class="Symbol">→</a> <a id="2538" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="2542" class="Symbol">(</a><a id="2543" href="Examples.Amortized.Simple.html#2506" class="Bound">s₁</a> <a id="2546" href="Examples.Amortized.Simple.html#2245" class="Function Operator">≈&#39;</a> <a id="2549" href="Examples.Amortized.Simple.html#2509" class="Bound">s₂</a><a id="2551" class="Symbol">)</a>
    <a id="2557" href="Examples.Amortized.Simple.html#2495" class="Function">forward</a> <a id="2565" href="Examples.Amortized.Simple.html#2565" class="Bound">h</a> <a id="2567" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a>    <a id="2575" class="Symbol">=</a> <a id="2577" href="Examples.Amortized.Simple.html#1394" class="Field">_≈_.quit</a> <a id="2586" href="Examples.Amortized.Simple.html#2565" class="Bound">h</a>
    <a id="2592" href="Examples.Amortized.Simple.html#2495" class="Function">forward</a> <a id="2600" href="Examples.Amortized.Simple.html#2600" class="Bound">h</a> <a id="2602" class="Symbol">(</a><a id="2603" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="2607" href="Examples.Amortized.Simple.html#2607" class="Bound">n</a><a id="2608" class="Symbol">)</a> <a id="2610" class="Symbol">=</a> <a id="2612" href="Examples.Amortized.Simple.html#2495" class="Function">forward</a> <a id="2620" class="Symbol">(</a><a id="2621" href="Examples.Amortized.Simple.html#1437" class="Field">_≈_.next</a> <a id="2630" href="Examples.Amortized.Simple.html#2600" class="Bound">h</a><a id="2631" class="Symbol">)</a> <a id="2633" href="Examples.Amortized.Simple.html#2607" class="Bound">n</a>

    <a id="2640" href="Examples.Amortized.Simple.html#2640" class="Function">backward</a> <a id="2649" class="Symbol">:</a> <a id="2651" class="Symbol">{</a><a id="2652" href="Examples.Amortized.Simple.html#2652" class="Bound">s₁</a> <a id="2655" href="Examples.Amortized.Simple.html#2655" class="Bound">s₂</a> <a id="2658" class="Symbol">:</a> <a id="2660" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="2664" href="Examples.Amortized.Simple.html#525" class="Postulate">simple</a><a id="2670" class="Symbol">}</a> <a id="2672" class="Symbol">→</a> <a id="2674" href="Calf.CBPV.html#595" class="Function">cmp</a> <a id="2678" class="Symbol">(</a><a id="2679" href="Examples.Amortized.Simple.html#2652" class="Bound">s₁</a> <a id="2682" href="Examples.Amortized.Simple.html#2245" class="Function Operator">≈&#39;</a> <a id="2685" href="Examples.Amortized.Simple.html#2655" class="Bound">s₂</a><a id="2687" class="Symbol">)</a> <a id="2689" class="Symbol">→</a> <a id="2691" href="Examples.Amortized.Simple.html#2652" class="Bound">s₁</a> <a id="2694" href="Examples.Amortized.Simple.html#1331" class="Record Operator">≈</a> <a id="2696" href="Examples.Amortized.Simple.html#2655" class="Bound">s₂</a>
    <a id="2703" href="Examples.Amortized.Simple.html#1394" class="Field">_≈_.quit</a> <a id="2712" class="Symbol">(</a><a id="2713" href="Examples.Amortized.Simple.html#2640" class="Function">backward</a> <a id="2722" href="Examples.Amortized.Simple.html#2722" class="Bound">classic</a><a id="2729" class="Symbol">)</a> <a id="2731" class="Symbol">=</a> <a id="2733" href="Examples.Amortized.Simple.html#2722" class="Bound">classic</a> <a id="2741" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a>
    <a id="2750" href="Examples.Amortized.Simple.html#1437" class="Field">_≈_.next</a> <a id="2759" class="Symbol">(</a><a id="2760" href="Examples.Amortized.Simple.html#2640" class="Function">backward</a> <a id="2769" href="Examples.Amortized.Simple.html#2769" class="Bound">classic</a><a id="2776" class="Symbol">)</a> <a id="2778" class="Symbol">=</a> <a id="2780" href="Examples.Amortized.Simple.html#2640" class="Function">backward</a> <a id="2789" class="Symbol">(λ</a> <a id="2792" href="Examples.Amortized.Simple.html#2792" class="Bound">n</a> <a id="2794" class="Symbol">→</a> <a id="2796" href="Examples.Amortized.Simple.html#2769" class="Bound">classic</a> <a id="2804" class="Symbol">(</a><a id="2805" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="2809" href="Examples.Amortized.Simple.html#2792" class="Bound">n</a><a id="2810" class="Symbol">))</a>
</pre></body></html>